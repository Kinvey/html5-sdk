/**
 * @preserve
 * kinvey-html5-sdk v3.5.2
 * Kinvey JavaScript SDK for HTML5 applications.
 * http://www.kinvey.com
 *
 * Copyright (c) 2016, Kinvey.
 * All rights reserved.
 *
 * Released under the Apache-2.0 license.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Kinvey=t():e.Kinvey=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(338),u=r(342);Object.keys(o.default).forEach(function(e){u.Kinvey[e]=o.default[e]}),u.Kinvey.User=i.User,e.exports=u.Kinvey},function(e,t,r){"use strict";var n=r(2),o=r(40),i=r(139),u=r(210),a=r(260),s=r(300),c=r(320),f=r(324),l=r(143),h=r(337);h.Kinvey.Acl=c.Acl,h.Kinvey.Aggregation=a.Aggregation,h.Kinvey.AuthorizationGrant=f.AuthorizationGrant,h.Kinvey.CustomEndpoint=i.CustomEndpoint,h.Kinvey.DataStore=s.DataStore,h.Kinvey.DataStoreType=s.DataStoreType,h.Kinvey.Files=new s.FileStore,h.Kinvey.Group=a.Aggregation,h.Kinvey.Log=o.Log,h.Kinvey.Metadata=c.Metadata,h.Kinvey.Query=u.Query,h.Kinvey.SyncOperation=s.SyncOperation,h.Kinvey.User=c.User,h.Kinvey.ActiveUserError=n.ActiveUserError,h.Kinvey.APIVersionNotAvailableError=n.APIVersionNotAvailableError,h.Kinvey.APIVersionNotImplementedError=n.APIVersionNotImplementedError,h.Kinvey.AppProblemError=n.AppProblemError,h.Kinvey.BadRequestError=n.BadRequestError,h.Kinvey.BLError=n.BLError,h.Kinvey.CORSDisabledError=n.CORSDisabledError,h.Kinvey.DuplicateEndUsersError=n.DuplicateEndUsersError,h.Kinvey.FeatureUnavailableError=n.FeatureUnavailableError,h.Kinvey.IncompleteRequestBodyError=n.IncompleteRequestBodyError,h.Kinvey.IndirectCollectionAccessDisallowedError=n.IndirectCollectionAccessDisallowedError,h.Kinvey.InsufficientCredentialsError=n.InsufficientCredentialsError,h.Kinvey.InvalidCredentialsError=n.InvalidCredentialsError,h.Kinvey.InvalidIdentifierError=n.InvalidIdentifierError,h.Kinvey.InvalidQuerySyntaxError=n.InvalidQuerySyntaxError,h.Kinvey.JSONParseError=n.JSONParseError,h.Kinvey.KinveyError=n.KinveyError,h.Kinvey.KinveyInternalErrorRetry=n.KinveyInternalErrorRetry,h.Kinvey.KinveyInternalErrorStop=n.KinveyInternalErrorStop,h.Kinvey.MissingQueryError=n.MissingQueryError,h.Kinvey.MissingRequestHeaderError=n.MissingRequestHeaderError,h.Kinvey.MissingRequestParameterError=n.MissingRequestParameterError,h.Kinvey.MobileIdentityConnectError=n.MobileIdentityConnectError,h.Kinvey.NoActiveUserError=n.NoActiveUserError,h.Kinvey.NetworkConnectionError=n.NetworkConnectionError,h.Kinvey.NoResponseError=n.NoResponseError,h.Kinvey.NotFoundError=n.NotFoundError,h.Kinvey.ParameterValueOutOfRangeError=n.ParameterValueOutOfRangeError,h.Kinvey.PopupError=n.PopupError,h.Kinvey.QueryError=n.QueryError,h.Kinvey.ServerError=n.ServerError,h.Kinvey.StaleRequestError=n.StaleRequestError,h.Kinvey.SyncError=n.SyncError,h.Kinvey.TimeoutError=n.TimeoutError,h.Kinvey.UserAlreadyExistsError=n.UserAlreadyExistsError,h.Kinvey.WritesToCollectionDisallowedError=n.WritesToCollectionDisallowedError,h.Kinvey.CacheRack=l.CacheRack,h.Kinvey.NetworkRack=l.NetworkRack,h.Kinvey.Rack=l.Rack,e.exports=h.Kinvey},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(6);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(7);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(8);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(4);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=r(9);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var f=r(10);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var l=r(11);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var h=r(12);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(13);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=r(14);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})});var y=r(15);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var v=r(16);Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})});var b=r(17);Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})});var m=r(18);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})});var g=r(19);Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});var w=r(20);Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})});var _=r(21);Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})});var E=r(22);Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}})});var O=r(23);Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}})});var j=r(24);Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}})});var k=r(25);Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}})});var P=r(26);Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})});var x=r(27);Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}})});var S=r(28);Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}})});var T=r(29);Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}})});var A=r(30);Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}})});var R=r(31);Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}})});var M=r(32);Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}})});var I=r(33);Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}})});var C=r(34);Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}})});var q=r(35);Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return q[e]}})});var D=r(36);Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}})});var U=r(37);Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return U[e]}})});var K=r(38);Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return K[e]}})});var B=r(39);Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return B[e]}})})},function(e,t,r){"use strict";function n(e,t,r,n){this.name="ActiveUserError",this.message=e||"An active user already exists.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveUserError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.ActiveUserError=n},function(e,t){"use strict";function r(e,t,r,n){this.name="BaseError",this.message=e||"An error occurred.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.BaseError=r},function(e,t,r){"use strict";function n(e,t,r,n){this.name="APIVersionNotAvailableError",this.message=e||"This API version is not available for your app.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.APIVersionNotAvailableError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.APIVersionNotAvailableError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="APIVersionNotImplementedError",this.message=e||"This API version is not implemented.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.APIVersionNotImplementedError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.APIVersionNotImplementedError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="AppProblemError",this.message=e||"There is a problem with this app backend that prevents execution of this operation. Please contact support@kinvey.com for assistance.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.AppProblemError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.AppProblemError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="BadRequestError",this.message=e||"Unable to understand request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.BadRequestError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.BadRequestError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="BLError",this.message=e||"The Business Logic script did not complete.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.BLError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.BLError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="CORSDisabledError",this.message=e||"Cross Origin Support is disabled for this application.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.CORSDisabledError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.CORSDisabledError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="DuplicateEndUsersError",this.message=e||"More than one user registered with this username for this application.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.DuplicateEndUsersError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.DuplicateEndUsersError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="FeatureUnavailableError",this.message=e||"Requested functionality is unavailable in this API version.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureUnavailableError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.FeatureUnavailableError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="IncompleteRequestBodyError",this.message=e||"The request body is either missing or incomplete.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.IncompleteRequestBodyError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.IncompleteRequestBodyError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="IndirectCollectionAccessDisallowedError",this.message=e||"Please use the appropriate API to access this collection for this app backend.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.IndirectCollectionAccessDisallowedError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.IndirectCollectionAccessDisallowedError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="InsufficientCredentialsError",this.message=e||"The credentials used to authenticate this request are not authorized to run this operation. Please retry your request with appropriate credentials.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.InsufficientCredentialsError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.InsufficientCredentialsError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="InvalidCredentialsError",this.message=e||"Invalid credentials. Please retry your request with correct credentials.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidCredentialsError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.InvalidCredentialsError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="InvalidIdentifierError",this.message=e||"One of more identifier names in the request has an invalid format.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidIdentifierError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.InvalidIdentifierError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="InvalidQuerySyntaxError",this.message=e||"The query string in the request has an invalid syntax.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidQuerySyntaxError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.InvalidQuerySyntaxError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="JSONParseError",this.message=e||"Unable to parse the JSON in the request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.JSONParseError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.JSONParseError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="KinveyInternalErrorRetry",this.message=e||"The Kinvey server encountered an unexpected error. Please retry your request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyInternalErrorRetry=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.KinveyInternalErrorRetry=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="KinveyInternalErrorStop",this.message=e||"The Kinvey server encountered an unexpected error. Please contact support@kinvey.com for assistance.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyInternalErrorStop=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.KinveyInternalErrorStop=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="KinveyError",this.message=e||"An error occurred.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.KinveyError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="MissingQueryError",this.message=e||"The request is missing a query string.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.MissingQueryError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.MissingQueryError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="MissingRequestHeaderError",this.message=e||"The request is missing a required header.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRequestHeaderError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.MissingRequestHeaderError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="MissingRequestParameterError",this.message=e||"A required parameter is missing from the request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRequestParameterError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.MissingRequestParameterError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="MobileIdentityConnectError",this.message=e||"An error has occurred with Mobile Identity Connect.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileIdentityConnectError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.MobileIdentityConnectError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="NetworkConnectionError",this.message=e||"There was an error connecting to the network.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkConnectionError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.NetworkConnectionError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="NoActiveUserError",this.message=e||"There is not an active user.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.NoActiveUserError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.NoActiveUserError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="NoResponseError",this.message=e||"No response was provided.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.NoResponseError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.NoResponseError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="NotFoundError",this.message=e||"The entity was not found.",this.debug=t||void 0,this.code=r||404,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.NotFoundError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="ParameterValueOutOfRangeError",this.message=e||"The value specified for one of the request parameters is out of range.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterValueOutOfRangeError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.ParameterValueOutOfRangeError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="PopupError",this.message=e||"Unable to open a popup on this platform.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.PopupError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.PopupError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="QueryError",this.message=e||"An error occurred with the query.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.QueryError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.QueryError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="ServerError",this.message=e||"An error occurred on the server.",this.debug=t||void 0,this.code=r||500,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.ServerError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="StaleRequestError",this.message=e||"The time window for this request has expired.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.StaleRequestError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.StaleRequestError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="SyncError",this.message=e||"An error occurred during sync.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.SyncError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="TimeoutError",this.message=e||"The request timed out.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.TimeoutError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="UserAlreadyExistsError",this.message=e||"This username is already taken. Please retry your request with a different username.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.UserAlreadyExistsError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.UserAlreadyExistsError=n},function(e,t,r){"use strict";function n(e,t,r,n){this.name="WritesToCollectionDisallowedError",this.message=e||"This collection is configured to disallow any modifications to an existing entity or creation of new entities.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}Object.defineProperty(t,"__esModule",{value:!0}),t.WritesToCollectionDisallowedError=void 0;var o=r(4);n.prototype=Object.create(o.BaseError.prototype),n.prototype.constructor=n,t.WritesToCollectionDisallowedError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(43);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(46);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(64);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(65);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(66);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;var n=r(42),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=o.default.methodFactory;o.default.methodFactory=function(e,t,r){var n=i(e,t,r);return function(e){e="Kinvey: "+e;for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];r.length>0?n(e,r):n(e)}},o.default.setDefaultLevel(o.default.levels.SILENT),t.Log=o.default},function(e,t,r){var n,o;!function(i,u){"use strict";n=u,void 0!==(o="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(0,function(){"use strict";function e(e){return typeof console!==a&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):u)}function t(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function r(e,t,r){return function(){typeof console!==a&&(n.call(this,t,r),this[e].apply(this,arguments))}}function n(e,t){for(var r=0;r<s.length;r++){var n=s[r];this[n]=r<e?u:this.methodFactory(n,e,t)}}function o(t,n,o){return e(t)||r.apply(this,arguments)}function i(e,t,r){function i(e){var t=(s[e]||"silent").toUpperCase();try{return void(window.localStorage[l]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+t+";"}catch(e){}}function u(){var e;try{e=window.localStorage[l]}catch(e){}if(typeof e===a)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(l)+"=");r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===f.levels[e]&&(e=void 0),e}var c,f=this,l="loglevel";e&&(l+=":"+e),f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=r||o,f.getLevel=function(){return c},f.setLevel=function(t,r){if("string"==typeof t&&void 0!==f.levels[t.toUpperCase()]&&(t=f.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=f.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(c=t,r!==!1&&i(t),n.call(f,t,e),typeof console===a&&t<f.levels.SILENT)return"No console available for logging"},f.setDefaultLevel=function(e){u()||f.setLevel(e,!1)},f.enableAll=function(e){f.setLevel(f.levels.TRACE,e)},f.disableAll=function(e){f.setLevel(f.levels.SILENT,e)};var h=u();null==h&&(h=null==t?"WARN":t),f.setLevel(h,!1)}var u=function(){},a="undefined",s=["trace","debug","info","warn","error"],c=new i,f={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new i(e,c.getLevel(),c.methodFactory)),t};var l=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=l),c},c})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,c.default)(e)===!1&&(0,a.default)(e)===!1}function i(e,t,r){if(o(t)===!1)return e=r||e;for(var n=t.split("."),i=n.shift();i&&e;)e=e[i],i=n.shift();return r||e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=o,t.nested=i;var u=r(44),a=n(u),s=r(45),c=n(s)},function(e,t){function r(e){return null===e}e.exports=r},function(e,t){function r(e){return void 0===e}e.exports=r},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyObservable=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(50);t.KinveyObservable=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"toPromise",value:function(){var e=this;return new s.default(function(t,r){var n=void 0;e.subscribe(function(e){n=e},r,function(){t(n)})})}}],[{key:"create",value:function(e){return new t(e)}}]),t}(c.Observable)},function(e,t,r){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!function(t,r){e.exports=r()}(0,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){z=e}function u(e){$=e}function a(){return void 0!==Q?function(){Q(c)}:s()}function s(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<H;e+=2){(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0}H=0}function f(e,t){var r=arguments,n=this,o=new this.constructor(h);void 0===o[ee]&&R(o);var i=n._state;return i?function(){var e=r[i-1];$(function(){return S(i,o,e,n._result)})}():j(n,o,e,t),o}function l(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(h);return w(r,e),r}function h(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(e){return oe.error=e,oe}}function v(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function b(e,t,r){$(function(e){var n=!1,o=v(r,t,function(r){n||(n=!0,t!==r?w(e,r):E(e,r))},function(t){n||(n=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,O(e,o))},e)}function m(e,t){t._state===re?E(e,t._result):t._state===ne?O(e,t._result):j(t,void 0,function(t){return w(e,t)},function(t){return O(e,t)})}function g(e,t,r){t.constructor===e.constructor&&r===f&&t.constructor.resolve===l?m(e,t):r===oe?(O(e,oe.error),oe.error=null):void 0===r?E(e,t):o(r)?b(e,t,r):E(e,t)}function w(t,r){t===r?O(t,p()):e(r)?g(t,r,y(r)):E(t,r)}function _(e){e._onerror&&e._onerror(e._result),k(e)}function E(e,t){e._state===te&&(e._result=t,e._state=re,0!==e._subscribers.length&&$(k,e))}function O(e,t){e._state===te&&(e._state=ne,e._result=t,$(_,e))}function j(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=r,o[i+ne]=n,0===i&&e._state&&$(k,e)}function k(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,u=0;u<t.length;u+=3)n=t[u],o=t[u+r],n?S(r,n,o,i):o(i);e._subscribers.length=0}}function P(){this.error=null}function x(e,t){try{return e(t)}catch(e){return ie.error=e,ie}}function S(e,t,r,n){var i=o(r),u=void 0,a=void 0,s=void 0,c=void 0;if(i){if(u=x(r,n),u===ie?(c=!0,a=u.error,u.error=null):s=!0,t===u)return void O(t,d())}else u=n,s=!0;t._state!==te||(i&&s?w(t,u):c?O(t,a):e===re?E(t,u):e===ne&&O(t,u))}function T(e,t){try{t(function(t){w(e,t)},function(t){O(e,t)})}catch(t){O(e,t)}}function A(){return ue++}function R(e){e[ee]=ue++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[ee]||R(this.promise),F(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):O(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function C(e){return new M(this,e).promise}function q(e){var t=this;return new t(F(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function D(e){var t=this,r=new t(h);return O(r,e),r}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(e){this[ee]=A(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&U(),this instanceof B?T(this,e):K())}function L(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=B}var N=void 0;N=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var F=N,H=0,Q=void 0,z=void 0,$=function(e,t){X[H]=e,X[H+1]=t,2===(H+=2)&&(z?z(c):Z())},Y="undefined"!=typeof window?window:void 0,V=Y||{},W=V.MutationObserver||V.WebKitMutationObserver,G="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=G?function(){return function(){return t.nextTick(c)}}():W?function(){var e=0,t=new W(c),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():J?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===Y?function(){try{var e=r(49);return Q=e.runOnLoop||e.runOnContext,a()}catch(e){return s()}}():s();var ee=Math.random().toString(36).substring(16),te=void 0,re=1,ne=2,oe=new P,ie=new P,ue=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===te&&r<e;r++)this._eachEntry(t[r],r)},M.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===l){var o=y(e);if(o===f&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===B){var i=new r(h);g(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},M.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===te&&(this._remaining--,e===ne?O(n,r):this._result[t]=r),0===this._remaining&&E(n,this._result)},M.prototype._willSettleAt=function(e,t){var r=this;j(e,void 0,function(e){return r._settledAt(re,t,e)},function(e){return r._settledAt(ne,t,e)})},B.all=C,B.race=q,B.resolve=l,B.reject=D,B._setScheduler=i,B._setAsap=u,B._asap=$,B.prototype={constructor:B,then:f,catch:function(e){return this.then(null,e)}},B.polyfill=L,B.Promise=B,B})}).call(t,r(48),function(){return this}())},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function u(){y&&p&&(y=!1,p.length?d=p.concat(d):v=-1,d.length&&a())}function a(){if(!y){var e=o(u);y=!0;for(var t=d.length;t;){for(p=d,d=[];++v<t;)p&&p[v].run();v=-1,t=d.length}p=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var f,l,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,d=[],y=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new s(e,t)),1!==d.length||y||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){},function(e,t,r){"use strict";var n=r(51),o=r(52),i=r(63),u=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=o.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var o;o=r.subscribe(function(t){if(o)try{e(t)}catch(e){n(e),o.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[i.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=u},function(e,t){(function(e){"use strict";var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=void 0!==e&&e,i=r||o||n;t.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e,t,r){if(e){if(e instanceof o.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new o.Subscriber(e,t,r):new o.Subscriber(u.empty)}var o=r(53),i=r(62),u=r(61);t.toSubscriber=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=r(54),i=r(55),u=r(61),a=r(62),s=function(e){function t(r,n,o){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!r){this.destination=u.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,o)}}return n(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,r=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=r,this},t}(i.Subscription);t.Subscriber=s;var c=function(e){function t(t,r,n,i){e.call(this),this._parentSubscriber=t;var a,s=this;o.isFunction(r)?a=r:r&&(a=r.next,n=r.error,i=r.complete,r!==u.empty&&(s=Object.create(r),o.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=a,this._error=n,this._complete=i}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(s)},function(e,t){"use strict";function r(e){return"function"==typeof e}t.isFunction=r},function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var o=r(56),i=r(57),u=r(54),a=r(58),s=r(59),c=r(60),f=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this,f=r._parent,l=r._parents,h=r._unsubscribe,p=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,y=l?l.length:0;f;)f.remove(this),f=++d<y&&l[d]||null;if(u.isFunction(h)){var v=a.tryCatch(h).call(this);v===s.errorObject&&(t=!0,e=e||(s.errorObject.e instanceof c.UnsubscriptionError?n(s.errorObject.e.errors):[s.errorObject.e]))}if(o.isArray(p))for(d=-1,y=p.length;++d<y;){var b=p[d];if(i.isObject(b)){var v=a.tryCatch(b.unsubscribe).call(b);if(v===s.errorObject){t=!0,e=e||[];var m=s.errorObject.e;m instanceof c.UnsubscriptionError?e=e.concat(n(m.errors)):e.push(m)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;r=new e,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this,r=t._parent,n=t._parents;r&&r!==e?n?n.indexOf(e)===-1&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=f},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function r(e){return null!=e&&"object"==typeof e}t.isObject=r},function(e,t,r){"use strict";function n(){try{return i.apply(this,arguments)}catch(e){return u.errorObject.e=e,u.errorObject}}function o(e){return i=e,n}var i,u=r(59);t.tryCatch=o},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(t,e),t}(Error);t.UnsubscriptionError=n},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,r){"use strict";var n=r(51),o=n.root.Symbol;t.rxSubscriber="function"==typeof o&&"function"==typeof o.for?o.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var o=r(51);t.getSymbolObservable=n,t.observable=n(o.root),t.$$observable=t.observable},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e&&"function"==typeof e.then?e:a.default.resolve(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(){};t.Queue=function(){function e(t,r){n(this,e),this.pendingPromises=0,this.maxPendingPromises=void 0!==t?t:1/0,this.maxQueuedPromises=void 0!==r?r:1/0,this.queue=[]}return i(e,[{key:"add",value:function(e){var t=this;return new a.default(function(r,n,o){if(t.queue.length>=t.maxQueuedPromises)return void n(new Error("Queue limit reached"));t.queue.push({promiseGenerator:e,resolve:r,reject:n,notify:o||s}),t._dequeue()})}},{key:"getPendingLength",value:function(){return this.pendingPromises}},{key:"getQueueLength",value:function(){return this.queue.length}},{key:"_dequeue",value:function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t=this.queue.shift();if(!t)return!1;try{this.pendingPromises+=1,o(t.promiseGenerator()).then(function(r){e.pendingPromises-=1,t.resolve(r),e._dequeue()},function(r){e.pendingPromises-=1,t.reject(r),e._dequeue()},function(e){t.notify(e)})}catch(e){this.pendingPromises-=1,t.reject(e),this._dequeue()}return!0}}]),e}()},function(e,t){"use strict";function r(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n+=1)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function n(e){return""+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=[],i=!1;return(0,p.default)(e)&&(0,w.isDefined)(r)&&(i=!0),Object.keys(e).forEach(function(u){var a=void 0,s=e[u],c=r?r+"["+(i?"":u)+"]":u;if((0,w.isDefined)(s)===!1){if(t.removeNull===!0)return;a=t.encodeComponents===!0?encodeURIComponent(c):c}else a=(0,y.default)(s)?o(s,t,c):t.encodeComponent===!0?encodeURIComponent(c)+"="+encodeURIComponent(s):c+"="+s;n.push(a)}),n.join("&")}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.default.parse(e,!0),i=(0,b.default)(t)?c.default.parse(t):t,u=(0,l.default)({},n.query,i);r=(0,l.default)({encodeComponents:!0,removeNull:!0},r),n.query=null;var s=o(u,r);return n.search=(0,w.isDefined)(s)&&(0,g.default)(s)===!1?"?"+s:null,a.default.format(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.appendQuery=i;var u=r(67),a=n(u),s=r(74),c=n(s),f=r(79),l=n(f),h=r(119),p=n(h),d=r(129),y=n(d),v=r(131),b=n(v),m=r(132),g=n(m),w=r(43)},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return c.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function u(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var s=r(68),c=r(70);t.parse=o,t.resolve=u,t.resolveObject=a,t.format=i,t.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),y=["'"].concat(d),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=r(71);n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",i=e.split(o);i[0]=i[0].replace(/\\/g,"/"),e=i.join(o);var u=e;if(u=u.trim(),!r&&1===e.split("#").length){var a=h.exec(u);if(a)return this.path=u,this.href=u,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=f.exec(u);if(l){l=l[0];var p=l.toLowerCase();this.protocol=p,u=u.substr(l.length)}if(r||l||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var d="//"===u.substr(0,2);!d||l&&g[l]||(u=u.substr(2),this.slashes=!0)}if(!g[l]&&(d||l&&!w[l])){for(var E=-1,O=0;O<b.length;O++){var j=u.indexOf(b[O]);j!==-1&&(E===-1||j<E)&&(E=j)}var k,P;P=E===-1?u.lastIndexOf("@"):u.lastIndexOf("@",E),P!==-1&&(k=u.slice(0,P),u=u.slice(P+1),this.auth=decodeURIComponent(k)),E=-1;for(var O=0;O<v.length;O++){var j=u.indexOf(v[O]);j!==-1&&(E===-1||j<E)&&(E=j)}E===-1&&(E=u.length),this.host=u.slice(0,E),u=u.slice(E),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var S=this.hostname.split(/\./),O=0,T=S.length;O<T;O++){var A=S[O];if(A&&!A.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var R="",M=0,I=A.length;M<I;M++)R+=A.charCodeAt(M)>127?"x":A[M];if(!R.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var C=S.slice(0,O),q=S.slice(O+1),D=A.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);D&&(C.push(D[1]),q.unshift(D[2])),q.length&&(u="/"+q.join(".")+u),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=s.toASCII(this.hostname));var U=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+U,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!m[p])for(var O=0,T=y.length;O<T;O++){var B=y[O];if(u.indexOf(B)!==-1){var L=encodeURIComponent(B);L===B&&(L=escape(B)),u=u.split(B).join(L)}}var N=u.indexOf("#");N!==-1&&(this.hash=u.substr(N),u=u.slice(0,N));var F=u.indexOf("?");if(F!==-1?(this.search=u.substr(F),this.query=u.substr(F+1),t&&(this.query=_.parse(this.query)),u=u.slice(0,F)):t&&(this.search="",this.query={}),u&&(this.pathname=u),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",H=this.search||"";this.path=U+H}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var u=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),u&&"?"!==u.charAt(0)&&(u="?"+u),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),u=u.replace("#","%23"),t+o+r+u+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var u=o[i];r[u]=this[u]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var f=a[s];"protocol"!==f&&(r[f]=e[f])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!w[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var p=l[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=m||b||r.host&&e.pathname,E=_,O=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],j=r.protocol&&!w[r.protocol];if(j&&(r.hostname="",r.port=null,r.host&&(""===O[0]?O[0]=r.host:O.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===O[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(j){r.hostname=r.host=O.shift();var k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");k&&(r.auth=k.shift(),r.host=r.hostname=k.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!O.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var P=O.slice(-1)[0],x=(r.host||e.host||O.length>1)&&("."===P||".."===P)||""===P,S=0,T=O.length;T>=0;T--)P=O[T],"."===P?O.splice(T,1):".."===P?(O.splice(T,1),S++):S&&(O.splice(T,1),S--);if(!_&&!E)for(;S--;S)O.unshift("..");!_||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),x&&"/"!==O.join("/").substr(-1)&&O.push("");var A=""===O[0]||O[0]&&"/"===O[0].charAt(0);if(j){r.hostname=r.host=A?"":O.length?O.shift():"";var k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");k&&(r.auth=k.shift(),r.host=r.hostname=k.shift())}return _=_||r.host&&O.length,_&&!A&&O.unshift(""),O.length?r.pathname=O.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){var n;(function(e,o){!function(i){function u(e){throw RangeError(M[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,"."),n+a(e.split("."),t).join(".")}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function f(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=q(e>>>10&1023|55296),e=56320|1023&e),t+=q(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?C(e/k):e>>1,e+=C(e/t);e>I*O>>1;n+=_)e=C(e/I);return C(n+(I+1)*e/(e+j))}function d(e){var t,r,n,o,i,a,s,c,h,d,y=[],v=e.length,b=0,m=x,g=P;for(r=e.lastIndexOf(S),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&u("not-basic"),y.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<v;){for(i=b,a=1,s=_;o>=v&&u("invalid-input"),c=l(e.charCodeAt(o++)),(c>=_||c>C((w-b)/a))&&u("overflow"),b+=c*a,h=s<=g?E:s>=g+O?O:s-g,!(c<h);s+=_)d=_-h,a>C(w/d)&&u("overflow"),a*=d;t=y.length+1,g=p(b-i,t,0==i),C(b/t)>w-m&&u("overflow"),m+=C(b/t),b%=t,y.splice(b++,0,m)}return f(y)}function y(e){var t,r,n,o,i,a,s,f,l,d,y,v,b,m,g,j=[];for(e=c(e),v=e.length,t=x,r=0,i=P,a=0;a<v;++a)(y=e[a])<128&&j.push(q(y));for(n=o=j.length,o&&j.push(S);n<v;){for(s=w,a=0;a<v;++a)(y=e[a])>=t&&y<s&&(s=y);for(b=n+1,s-t>C((w-r)/b)&&u("overflow"),r+=(s-t)*b,t=s,a=0;a<v;++a)if(y=e[a],y<t&&++r>w&&u("overflow"),y==t){for(f=r,l=_;d=l<=i?E:l>=i+O?O:l-i,!(f<d);l+=_)g=f-d,m=_-d,j.push(q(h(d+g%m,0))),f=C(g/m);j.push(q(h(f,0))),i=p(r,b,n==o),r=0,++n}++r,++t}return j.join("")}function v(e){return s(e,function(e){return T.test(e)?d(e.slice(4).toLowerCase()):e})}function b(e){return s(e,function(e){return A.test(e)?"xn--"+y(e):e})}var m=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof o&&o);m.global!==m&&m.window!==m&&m.self;var g,w=2147483647,_=36,E=1,O=26,j=38,k=700,P=72,x=128,S="-",T=/^xn--/,A=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=_-E,C=Math.floor,q=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:c,encode:f},decode:d,encode:y,toASCII:b,toUnicode:v},void 0!==(n=function(){return g}.call(t,r,t,e))&&(e.exports=n)}()}).call(t,r(69)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(72),t.encode=t.stringify=r(73)},function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var a=e.length;u>0&&a>u&&(a=u);for(var s=0;s<a;++s){var c,f,l,h,p=e[s].replace(/\+/g,"%20"),d=p.indexOf(n);d>=0?(c=p.substr(0,d),f=p.substr(d+1)):(c=p,f=""),l=decodeURIComponent(c),h=decodeURIComponent(f),r(i,l)?Array.isArray(i[l])?i[l].push(h):i[l]=[i[l],h]:i[l]=h}return i}},function(e,t){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var i=encodeURIComponent(r(o))+n;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(r(e))}).join(t):i+encodeURIComponent(r(e[o]))}).join(t):o?encodeURIComponent(r(o))+n+encodeURIComponent(r(e)):""}},function(e,t,r){"use strict";var n=r(75),o=r(78),i=r(77);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";var n=r(76),o=r(77),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,o,i,u,a,s,c,f,l,h,p){var d=t;if("function"==typeof s)d=s(r,d);else if(d instanceof Date)d=l(d);else if(null===d){if(i)return a&&!p?a(r):r;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||n.isBuffer(d)){if(a){return[h(p?r:a(r))+"="+h(a(d))]}return[h(r)+"="+h(String(d))]}var y=[];if(void 0===d)return y;var v;if(Array.isArray(s))v=s;else{var b=Object.keys(d);v=c?b.sort(c):b}for(var m=0;m<v.length;++m){var g=v[m];u&&null===d[g]||(y=Array.isArray(d)?y.concat(e(d[g],o(r,g),o,i,u,a,s,c,f,l,h,p)):y.concat(e(d[g],r+(f?"."+g:"["+g+"]"),o,i,u,a,s,c,f,l,h,p)))}return y}
;e.exports=function(e,t){var r=e,n=t||{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===n.delimiter?a.delimiter:n.delimiter,c="boolean"==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling,f="boolean"==typeof n.skipNulls?n.skipNulls:a.skipNulls,l="boolean"==typeof n.encode?n.encode:a.encode,h="function"==typeof n.encoder?n.encoder:a.encoder,p="function"==typeof n.sort?n.sort:null,d=void 0!==n.allowDots&&n.allowDots,y="function"==typeof n.serializeDate?n.serializeDate:a.serializeDate,v="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:a.encodeValuesOnly;if(void 0===n.format)n.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,n.format))throw new TypeError("Unknown format option provided.");var b,m,g=o.formatters[n.format];"function"==typeof n.filter?(m=n.filter,r=m("",r)):Array.isArray(n.filter)&&(m=n.filter,b=m);var w=[];if("object"!=typeof r||null===r)return"";var _;_=n.arrayFormat in i?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var E=i[_];b||(b=Object.keys(r)),p&&b.sort(p);for(var O=0;O<b.length;++O){var j=b[O];f&&null===r[j]||(w=w.concat(s(r[j],j,E,c,f,l?h:null,m,p,d,y,g,v)))}return w.join(u)}},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],n,o):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,r){var i=n[r];return Object.prototype.hasOwnProperty.call(e,r)?e[r]=t.merge(e[r],i,o):e[r]=i,e},i)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(o):i<128?r+=n[i]:i<2048?r+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},t.compact=function(e,r){if("object"!=typeof e||null===e)return e;var n=r||[],o=n.indexOf(e);if(o!==-1)return n[o];if(n.push(e),Array.isArray(e)){for(var i=[],u=0;u<e.length;++u)e[u]&&"object"==typeof e[u]?i.push(t.compact(e[u],n)):void 0!==e[u]&&i.push(e[u]);return i}return Object.keys(e).forEach(function(r){e[r]=t.compact(e[r],n)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){"use strict";var r=String.prototype.replace;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,/%20/g,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=r(76),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},u=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0;i<n.length;++i){var u,a,s=n[i],c=s.indexOf("]=")===-1?s.indexOf("="):s.indexOf("]=")+1;c===-1?(u=t.decoder(s),a=t.strictNullHandling?null:""):(u=t.decoder(s.slice(0,c)),a=t.decoder(s.slice(c+1))),o.call(r,u)?r[u]=[].concat(r[u]).concat(a):r[u]=a}return r},a=function(e,t,r){if(!e.length)return t;var n,o=e.shift();if("[]"===o)n=[],n=n.concat(a(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(i,10);!isNaN(u)&&o!==i&&String(u)===i&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(n=[],n[u]=a(e,t,r)):n[i]=a(e,t,r)}return n},s=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,s=i.exec(n),c=s?n.slice(0,s.index):n,f=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;f.push(c)}for(var l=0;null!==(s=u.exec(n))&&l<r.depth;){if(l+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+n.slice(s.index)+"]"),a(f,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?u(e,r):e,a=r.plainObjects?Object.create(null):{},c=Object.keys(o),f=0;f<c.length;++f){var l=c[f],h=s(l,o[l],r);a=n.merge(a,h,r)}return n.compact(a)}},function(e,t,r){var n=r(80),o=r(98),i=r(99),u=r(109),a=r(112),s=r(113),c=Object.prototype,f=c.hasOwnProperty,l=i(function(e,t){if(a(t)||u(t))return void o(t,s(t),e);for(var r in t)f.call(t,r)&&n(e,r,t[r])});e.exports=l},function(e,t,r){function n(e,t,r){var n=e[t];a.call(e,t)&&i(n,r)&&(void 0!==r||t in e)||o(e,t,r)}var o=r(81),i=r(97),u=Object.prototype,a=u.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=r(82);e.exports=n},function(e,t,r){var n=r(83),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){function n(e,t){var r=i(e,t);return o(r)?r:void 0}var o=r(84),i=r(96);e.exports=n},function(e,t,r){function n(e){return!(!u(e)||i(e))&&(o(e)?p:s).test(a(e))}var o=r(85),i=r(93),u=r(92),a=r(95),s=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,l=c.toString,h=f.hasOwnProperty,p=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t,r){function n(e){if(!i(e))return!1;var t=o(e);return t==a||t==s||t==u||t==c}var o=r(86),i=r(92),u="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=n},function(e,t,r){function n(e){return null==e?void 0===e?s:a:c&&c in Object(e)?i(e):u(e)}var o=r(87),i=r(90),u=r(91),a="[object Null]",s="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=n},function(e,t,r){var n=r(88),o=n.Symbol;e.exports=o},function(e,t,r){var n=r(89),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,function(){return this}())},function(e,t,r){function n(e){var t=u.call(e,s),r=e[s];try{e[s]=void 0}catch(e){}var n=a.call(e);return t?e[s]=r:delete e[s],n}var o=r(87),i=Object.prototype,u=i.hasOwnProperty,a=i.toString,s=o?o.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=r},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){function n(e){return!!i&&i in e}var o=r(94),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t,r){var n=r(88),o=n["__core-js_shared__"];e.exports=o},function(e,t){function r(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,o=n.toString;e.exports=r},function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},function(e,t,r){function n(e,t,r,n){var u=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var c=t[a],f=n?n(r[c],e[c],c,r,e):void 0;void 0===f&&(f=e[c]),u?i(r,c,f):o(r,c,f)}return r}var o=r(80),i=r(81);e.exports=n},function(e,t,r){function n(e){return o(function(t,r){var n=-1,o=r.length,u=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(u=e.length>3&&"function"==typeof u?(o--,u):void 0,a&&i(r[0],r[1],a)&&(u=o<3?void 0:u,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,u)}return t})}var o=r(100),i=r(108);e.exports=n},function(e,t,r){function n(e,t){return u(i(e,t,o),e+"")}var o=r(101),i=r(102),u=r(104);e.exports=n},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){function n(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,u=-1,a=i(n.length-t,0),s=Array(a);++u<a;)s[u]=n[t+u];u=-1;for(var c=Array(t+1);++u<t;)c[u]=n[u];return c[t]=r(s),o(e,this,c)}}var o=r(103),i=Math.max;e.exports=n},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t,r){var n=r(105),o=r(107),i=o(n);e.exports=i},function(e,t,r){var n=r(106),o=r(82),i=r(101),u=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=u},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t){function r(e){var t=0,r=0;return function(){var u=i(),a=o-(u-r);if(r=u,a>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var n=800,o=16,i=Date.now;e.exports=r},function(e,t,r){function n(e,t,r){if(!a(r))return!1;var n=typeof t;return!!("number"==n?i(r)&&u(t,r.length):"string"==n&&t in r)&&o(r[t],e)}var o=r(97),i=r(109),u=r(111),a=r(92);e.exports=n},function(e,t,r){function n(e){return null!=e&&i(e.length)&&!o(e)}var o=r(85),i=r(110);e.exports=n},function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=r},function(e,t){function r(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},function(e,t){function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}var n=Object.prototype;e.exports=r},function(e,t,r){function n(e){return u(e)?o(e):i(e)}var o=r(114),i=r(126),u=r(109);e.exports=n},function(e,t,r){function n(e,t){var r=u(e),n=!r&&i(e),f=!r&&!n&&a(e),h=!r&&!n&&!f&&c(e),p=r||n||f||h,d=p?o(e.length,String):[],y=d.length;for(var v in e)!t&&!l.call(e,v)||p&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||d.push(v);return d}var o=r(115),i=r(116),u=r(119),a=r(120),s=r(111),c=r(122),f=Object.prototype,l=f.hasOwnProperty;e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}e.exports=r},function(e,t,r){var n=r(117),o=r(118),i=Object.prototype,u=i.hasOwnProperty,a=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&u.call(e,"callee")&&!a.call(e,"callee")};e.exports=s},function(e,t,r){function n(e){return i(e)&&o(e)==u}var o=r(86),i=r(118),u="[object Arguments]";e.exports=n},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){(function(e){var n=r(88),o=r(121),i="object"==typeof t&&t&&!t.nodeType&&t,u=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=u&&u.exports===i,s=a?n.Buffer:void 0,c=s?s.isBuffer:void 0,f=c||o;e.exports=f}).call(t,r(69)(e))},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){var n=r(123),o=r(124),i=r(125),u=i&&i.isTypedArray,a=u?o(u):n;e.exports=a},function(e,t,r){function n(e){return u(e)&&i(e.length)&&!!a[o(e)]}var o=r(86),i=r(110),u=r(118),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=n},function(e,t){function r(e){return function(t){return e(t)}}e.exports=r},function(e,t,r){(function(e){var n=r(89),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=i&&i.exports===o,a=u&&n.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(t,r(69)(e))},function(e,t,r){function n(e){if(!o(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=r(112),i=r(127),u=Object.prototype,a=u.hasOwnProperty;e.exports=n},function(e,t,r){var n=r(128),o=n(Object.keys,Object);e.exports=o},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){function n(e){if(!u(e)||o(e)!=a)return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&f.call(r)==h}var o=r(86),i=r(130),u=r(118),a="[object Object]",s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=f.call(Object);e.exports=n},function(e,t,r){var n=r(128),o=n(Object.getPrototypeOf,Object);e.exports=o},function(e,t,r){function n(e){return"string"==typeof e||!i(e)&&u(e)&&o(e)==a}var o=r(86),i=r(119),u=r(118),a="[object String]";e.exports=n},function(e,t,r){function n(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||u(e)))return!e.length;var t=i(e);if(t==h||t==p)return!e.size;if(f(e))return!o(e).length;for(var r in e)if(y.call(e,r))return!1;return!0}var o=r(126),i=r(133),u=r(116),a=r(119),s=r(109),c=r(120),f=r(112),l=r(122),h="[object Map]",p="[object Set]",d=Object.prototype,y=d.hasOwnProperty;e.exports=n},function(e,t,r){var n=r(134),o=r(135),i=r(136),u=r(137),a=r(138),s=r(86),c=r(95),f=c(n),l=c(o),h=c(i),p=c(u),d=c(a),y=s;(n&&"[object DataView]"!=y(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||u&&"[object Set]"!=y(new u)||a&&"[object WeakMap]"!=y(new a))&&(y=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,r){var n=r(83),o=r(88),i=n(o,"DataView");e.exports=i},function(e,t,r){var n=r(83),o=r(88),i=n(o,"Map");e.exports=i},function(e,t,r){var n=r(83),o=r(88),i=n(o,"Promise");e.exports=i},function(e,t,r){var n=r(83),o=r(88),i=n(o,"Set");e.exports=i},function(e,t,r){var n=r(83),o=r(88),i=n(o,"WeakMap");e.exports=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEndpoint=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(131),c=n(s),f=r(67),l=n(f),h=r(2),p=r(140),d=r(143);t.CustomEndpoint=function(){function e(){throw o(this,e),new h.KinveyError("Not allowed to create an instance of the `CustomEndpoint` class.","Please use `CustomEndpoint.execute()` function.")}return i(e,null,[{key:"execute",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.client||p.Client.sharedInstance();return e?(0,c.default)(e)?new d.KinveyRequest({method:d.RequestMethod.POST,authType:d.AuthType.Default,url:l.default.format({protocol:n.apiProtocol,host:n.apiHost,pathname:"/rpc/"+n.appKey+"/custom/"+e}),properties:r.properties,body:t,timeout:r.timeout,client:n}).execute().then(function(e){return e.data}):a.default.reject(new h.KinveyError("The endpoint argument must be a string.")):a.default.reject(new h.KinveyError("An endpoint argument is required."))}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(141),a=n(u),s=r(67),c=n(s),f=r(131),l=n(f),h=r(142),p=n(h),d=r(2),y=r(40),v=6e4,b=null,m=function(){function e(){o(this,e),this.memory=new a.default}return i(e,[{key:"get",value:function(e){try{return JSON.parse(this.memory.get(e))}catch(e){return null}}},{key:"set",value:function(e,t){return(0,y.isDefined)(t)?this.memory.set(e,JSON.stringify(t)):this.memory.delete(e),t}}]),e}();t.Client=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var r=(0,l.default)(t.apiHostname)?t.apiHostname:"https://baas.kinvey.com";/^https?:\/\//i.test(r)===!1&&(r="https://"+r);var n=c.default.parse(r);this.apiProtocol=n.protocol,this.apiHost=n.host;var i=(0,l.default)(t.micHostname)?t.micHostname:"https://auth.kinvey.com";/^https?:\/\//i.test(i)===!1&&(i="https://"+i);var u=c.default.parse(i);this.micProtocol=u.protocol,this.micHost=u.host;var a=(0,l.default)(t.liveServiceHostname)?t.liveServiceHostname:"https://kls.kinvey.com";/^https?:\/\//i.test(a)===!1&&(a="https://"+a);var s=c.default.parse(a);this.liveServiceProtocol=s.protocol,this.liveServiceHost=s.host,this.appKey=t.appKey,this.appSecret=t.appSecret,this.masterSecret=t.masterSecret,this.encryptionKey=t.encryptionKey,this.appVersion=t.appVersion,this.defaultTimeout=(0,p.default)(t.defaultTimeout)&&t.defaultTimeout>=0?t.defaultTimeout:v,this.activeUserStorage=new m}return i(e,[{key:"getActiveUser",value:function(){return this.activeUserStorage.get(this.appKey)}},{key:"setActiveUser",value:function(e){return this.activeUserStorage.set(this.appKey,e)}},{key:"toPlainObject",value:function(){return{apiHostname:this.apiHostname,apiProtocol:this.apiProtocol,apiHost:this.apiHost,micHostname:this.micHostname,micProtocol:this.micProtocol,micHost:this.micHost,liveServiceHostname:this.liveServiceHostname,liveServiceHost:this.liveServiceHost,liveServiceProtocol:this.liveServiceProtocol,appKey:this.appKey,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey,appVersion:this.appVersion}}},{key:"apiHostname",get:function(){return c.default.format({protocol:this.apiProtocol,host:this.apiHost})}},{key:"micHostname",get:function(){return c.default.format({protocol:this.micProtocol,host:this.micHost})}},{key:"liveServiceHostname",get:function(){return c.default.format({protocol:this.liveServiceProtocol,host:this.liveServiceHost})}}],[{key:"initialize",value:function(){throw new d.KinveyError("Please use Client.init().")}},{key:"init",value:function(t){return b=new e(t)}},{key:"sharedInstance",value:function(){if((0,y.isDefined)(b)===!1)throw new d.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return b}}]),e}()},function(e,t){"use strict";function r(){this._cache=n(),this._timeouts=n()}function n(){return Object.create(null)}r.prototype.get=function(e){return this._cache[e]},r.prototype.set=function(e,t,r){this.delete(e),this._cache[e]=t,r&&(this._timeouts[e]=setTimeout(this.delete.bind(this,e),1e3*r))},r.prototype.delete=function(e){delete this._cache[e],e in this._timeouts&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},r.prototype.clear=function(){this._cache=n();for(var e in this._timeouts)clearTimeout(this._timeouts[e]);this._timeouts=n()},e.exports=r},function(e,t,r){function n(e){return"number"==typeof e||i(e)&&o(e)==u}var o=r(86),i=r(118),u="[object Number]";e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(144);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(289);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(263);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(291);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(261);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(262);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=r(264);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var f=r(269);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})})},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheRequest=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n,o){var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var u=Object.getPrototypeOf(t);null!==u&&e(u,r,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},f=r(67),l=n(f),h=r(145),p=n(h),d=r(2),y=r(210),v=r(260),b=r(40),m=r(261),g=r(262),w=r(264);t.CacheRequest=function(t){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,r);var t=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.aggregation=e.aggregation,t.query=e.query,t.rack=w.CacheRack,t}return u(r,t),a(r,[{key:"execute",value:function(){var e=this;return c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"execute",this).call(this).then(function(t){if(t instanceof g.KinveyResponse||(t=new g.KinveyResponse({statusCode:t.statusCode,headers:t.headers,data:t.data})),!t.isSuccess())throw t.error;return(0,b.isDefined)(e.query)&&(0,b.isDefined)(t.data)&&(t.data=e.query.process(t.data)),(0,b.isDefined)(e.aggregation)&&(0,b.isDefined)(t.data)&&(t.data=e.aggregation.process(t.data)),t})}},{key:"toPlainObject",value:function(){var e=c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toPlainObject",this).call(this);return e.appKey=this.appKey,e.collection=this.collection,e.entityId=this.entityId,e.encryptionKey=this.client?this.client.encryptionKey:void 0,e}},{key:"body",get:function(){return this._body},set:function(e){this._body=(0,p.default)(e)}},{key:"query",get:function(){return this._query},set:function(e){if((0,b.isDefined)(e)&&!(e instanceof y.Query))throw new d.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"aggregation",get:function(){return this._aggregation},set:function(e){if((0,b.isDefined)(e)&&!(e instanceof v.Aggregation))throw new d.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");this._aggregation=e}},{key:"url",get:function(){return c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"url",this)},set:function(t){s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"url",t,this);var n=e.decodeURIComponent(l.default.parse(t).pathname),o=n.replace(/^\//,"").split("/");this.appKey=o[1],this.collection=o[2],this.entityId=o[3]}}]),r}(m.Request)}).call(t,function(){return this}())},function(e,t,r){function n(e){return o(e,i|u)}var o=r(146),i=1,u=4;e.exports=n},function(e,t,r){function n(e,t,r,R,M,I){var C,q=t&O,D=t&j,U=t&k;if(r&&(C=M?r(e,R,M,I):r(e)),void 0!==C)return C;if(!_(e))return e;var K=g(e);if(K){if(C=v(e),!q)return f(e,C)}else{var B=y(e),L=B==x||B==S;if(w(e))return c(e,q);if(B==T||B==P||L&&!M){if(C=D||L?{}:m(e),!q)return D?h(e,s(C,e)):l(e,a(C,e))}else{if(!A[B])return M?e:{};C=b(e,B,n,q)}}I||(I=new o);var N=I.get(e);if(N)return N;I.set(e,C);var F=U?D?d:p:D?keysIn:E,H=K?void 0:F(e);return i(H||e,function(o,i){H&&(i=o,o=e[i]),u(C,i,n(o,t,r,i,e,I))}),C}var o=r(147),i=r(175),u=r(80),a=r(176),s=r(177),c=r(181),f=r(182),l=r(183),h=r(187),p=r(190),d=r(192),y=r(133),v=r(193),b=r(194),m=r(208),g=r(119),w=r(120),_=r(92),E=r(113),O=1,j=2,k=4,P="[object Arguments]",x="[object Function]",S="[object GeneratorFunction]",T="[object Object]",A={};A[P]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[T]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[x]=A["[object WeakMap]"]=!1,e.exports=n},function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=r(148),i=r(155),u=r(156),a=r(157),s=r(158),c=r(159);n.prototype.clear=i,n.prototype.delete=u,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(149),i=r(150),u=r(152),a=r(153),s=r(154);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=s,e.exports=n},function(e,t){function r(){this.__data__=[],this.size=0}e.exports=r},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():u.call(t,r,1),--this.size,!0)}var o=r(151),i=Array.prototype,u=i.splice;e.exports=n},function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=r(97);e.exports=n},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=r(151);e.exports=n},function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=r(151);e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=r(151);e.exports=n},function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=r(148);e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<a-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new u(n)}return r.set(e,t),this.size=r.size,this}var o=r(148),i=r(135),u=r(160),a=200;e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(161),i=r(169),u=r(172),a=r(173),s=r(174);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=s,e.exports=n},function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(u||i),string:new o}}var o=r(162),i=r(148),u=r(135);e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(163),i=r(165),u=r(166),a=r(167),s=r(168);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=u,n.prototype.has=a,n.prototype.set=s,e.exports=n},function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=r(164);e.exports=n},function(e,t,r){var n=r(83),o=n(Object,"create");e.exports=o},function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=r},function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===i?void 0:r}return a.call(t,e)?t[e]:void 0}var o=r(164),i="__lodash_hash_undefined__",u=Object.prototype,a=u.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:u.call(t,e)}var o=r(164),i=Object.prototype,u=i.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?i:t,this}var o=r(164),i="__lodash_hash_undefined__";e.exports=n},function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=r(170);e.exports=n},function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=r(171);e.exports=n},function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},function(e,t,r){function n(e){return o(this,e).get(e)}var o=r(170);e.exports=n},function(e,t,r){function n(e){return o(this,e).has(e)}var o=r(170);e.exports=n},function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=r(170);e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}e.exports=r},function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=r(98),i=r(113);e.exports=n},function(e,t,r){function n(e,t){return e&&o(t,i(t),e)}var o=r(98),i=r(178);e.exports=n},function(e,t,r){function n(e){return u(e)?o(e,!0):i(e)}var o=r(114),i=r(179),u=r(109);e.exports=n},function(e,t,r){function n(e){if(!o(e))return u(e);var t=i(e),r=[];for(var n in e)("constructor"!=n||!t&&s.call(e,n))&&r.push(n);return r}var o=r(92),i=r(112),u=r(180),a=Object.prototype,s=a.hasOwnProperty;e.exports=n},function(e,t){function r(e){var t=[]
;if(null!=e)for(var r in Object(e))t.push(r);return t}e.exports=r},function(e,t,r){(function(e){function n(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}var o=r(88),i="object"==typeof t&&t&&!t.nodeType&&t,u=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=u&&u.exports===i,s=a?o.Buffer:void 0,c=s?s.allocUnsafe:void 0;e.exports=n}).call(t,r(69)(e))},function(e,t){function r(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}e.exports=r},function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=r(98),i=r(184);e.exports=n},function(e,t,r){var n=r(185),o=r(186),i=Object.prototype,u=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return u.call(e,t)}))}:o;e.exports=s},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var u=e[r];t(u,r,e)&&(i[o++]=u)}return i}e.exports=r},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){function n(e,t){return o(e,i(e),t)}var o=r(98),i=r(188);e.exports=n},function(e,t,r){var n=r(189),o=r(130),i=r(184),u=r(186),a=Object.getOwnPropertySymbols,s=a?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:u;e.exports=s},function(e,t){function r(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}e.exports=r},function(e,t,r){function n(e){return o(e,u,i)}var o=r(191),i=r(184),u=r(113);e.exports=n},function(e,t,r){function n(e,t,r){var n=t(e);return i(e)?n:o(n,r(e))}var o=r(189),i=r(119);e.exports=n},function(e,t,r){function n(e){return o(e,u,i)}var o=r(191),i=r(188),u=r(178);e.exports=n},function(e,t){function r(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var n=Object.prototype,o=n.hasOwnProperty;e.exports=r},function(e,t,r){function n(e,t,r,n){var A=e.constructor;switch(t){case g:return o(e);case l:case h:return new A(+e);case w:return i(e,n);case _:case E:case O:case j:case k:case P:case x:case S:case T:return f(e,n);case p:return u(e,n,r);case d:case b:return new A(e);case y:return a(e);case v:return s(e,n,r);case m:return c(e)}}var o=r(195),i=r(197),u=r(198),a=r(202),s=r(203),c=r(206),f=r(207),l="[object Boolean]",h="[object Date]",p="[object Map]",d="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",E="[object Float64Array]",O="[object Int8Array]",j="[object Int16Array]",k="[object Int32Array]",P="[object Uint8Array]",x="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]";e.exports=n},function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=r(196);e.exports=n},function(e,t,r){var n=r(88),o=n.Uint8Array;e.exports=o},function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o=r(195);e.exports=n},function(e,t,r){function n(e,t,r){return i(t?r(u(e),a):u(e),o,new e.constructor)}var o=r(199),i=r(200),u=r(201),a=1;e.exports=n},function(e,t){function r(e,t){return e.set(t[0],t[1]),e}e.exports=r},function(e,t){function r(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}e.exports=r},function(e,t){function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}var n=/\w*$/;e.exports=r},function(e,t,r){function n(e,t,r){return i(t?r(u(e),a):u(e),o,new e.constructor)}var o=r(204),i=r(200),u=r(205),a=1;e.exports=n},function(e,t){function r(e,t){return e.add(t),e}e.exports=r},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}e.exports=r},function(e,t,r){function n(e){return u?Object(u.call(e)):{}}var o=r(87),i=o?o.prototype:void 0,u=i?i.valueOf:void 0;e.exports=n},function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var o=r(195);e.exports=n},function(e,t,r){function n(e){return"function"!=typeof e.constructor||u(e)?{}:o(i(e))}var o=r(209),i=r(130),u=r(112);e.exports=n},function(e,t,r){var n=r(92),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Query=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(2),a=r(40),s=r(211),c=n(s),f=r(79),l=n(f),h=r(119),p=n(h),d=r(142),y=n(d),v=r(131),b=n(v),m=r(92),g=n(m),w=r(212),_=n(w),E=r(132),O=n(E),j=r(214),k=n(j),P=r(221),x=n(P),S=r(258),T=n(S),A=["$nearSphere"],R=function(){function e(t){o(this,e),t=(0,l.default)({fields:[],filter:{},sort:null,limit:null,skip:0},t),this.fields=t.fields,this.filter=t.filter,this.sort=t.sort,this.limit=t.limit,this.skip=t.skip,this._parent=null}return i(e,[{key:"isSupportedOffline",value:function(){var e=this,t=!0;return(0,k.default)(A,function(r){return t=!(0,x.default)(e.filter,r)}),t}},{key:"equalTo",value:function(e,t){return this.addFilter(e,t)}},{key:"contains",value:function(e,t){if((0,a.isDefined)(t)===!1)throw new u.QueryError("You must supply a value.");return(0,p.default)(t)===!1&&(t=[t]),this.addFilter(e,"$in",t)}},{key:"containsAll",value:function(e,t){if((0,a.isDefined)(t)===!1)throw new u.QueryError("You must supply a value.");return(0,p.default)(t)===!1&&(t=[t]),this.addFilter(e,"$all",t)}},{key:"greaterThan",value:function(e,t){if((0,y.default)(t)===!1&&(0,b.default)(t)===!1)throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$gt",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){if((0,y.default)(t)===!1&&(0,b.default)(t)===!1)throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$gte",t)}},{key:"lessThan",value:function(e,t){if((0,y.default)(t)===!1&&(0,b.default)(t)===!1)throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$lt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){if((0,y.default)(t)===!1&&(0,b.default)(t)===!1)throw new u.QueryError("You must supply a number or string.");return this.addFilter(e,"$lte",t)}},{key:"notEqualTo",value:function(e,t){return this.addFilter(e,"$ne",t)}},{key:"notContainedIn",value:function(e,t){return(0,p.default)(t)===!1&&(t=[t]),this.addFilter(e,"$nin",t)}},{key:"and",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.join("$and",t)}},{key:"nor",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if((0,a.isDefined)(this._parent)&&(0,T.default)(this._parent.filter,"$and")){var n;return(n=this._parent).nor.apply(n,t)}return this.join("$nor",t)}},{key:"or",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if((0,a.isDefined)(this._parent)){var n;return(n=this._parent).or.apply(n,t)}return this.join("$or",t)}},{key:"exists",value:function(e,t){return t=void 0===t||(t||!1),this.addFilter(e,"$exists",t)}},{key:"mod",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((0,b.default)(t)&&(t=parseFloat(t)),(0,b.default)(r)&&(r=parseFloat(r)),!(0,y.default)(t))throw new u.QueryError("divisor must be a number");if(!(0,y.default)(r))throw new u.QueryError("remainder must be a number");return this.addFilter(e,"$mod",[t,r])}},{key:"matches",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];if((0,_.default)(t)||(t=new RegExp(t)),0!==t.source.indexOf("^"))throw new u.QueryError("regExp must have '^' at the beginning of the expression to make it an anchored expression.");if((t.ignoreCase||r.ignoreCase)&&r.ignoreCase!==!1)throw new u.QueryError("ignoreCase flag is not supported");return(t.multiline||r.multiline)&&r.multiline!==!1&&n.push("m"),r.extended===!0&&n.push("x"),r.dotMatchesAll===!0&&n.push("s"),n.length>0&&this.addFilter(e,"$options",n.join("")),this.addFilter(e,"$regex",t.source)}},{key:"near",value:function(e,t,r){if(!(0,p.default)(t)||!(0,y.default)(t[0])||!(0,y.default)(t[1]))throw new u.QueryError("coord must be a [number, number]");var n=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return(0,y.default)(r)&&this.addFilter(e,"$maxDistance",r),n}},{key:"withinBox",value:function(e,t,r){if(!(0,p.default)(t)||!(0,y.default)(t[0])||!(0,y.default)(t[1]))throw new u.QueryError("bottomLeftCoord must be a [number, number]");if(!(0,p.default)(r)||!(0,y.default)(r[0])||!(0,y.default)(r[1]))throw new u.QueryError("upperRightCoord must be a [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),r[0]=parseFloat(r[0]),r[1]=parseFloat(r[1]);var n=[[t[0],t[1]],[r[0],r[1]]];return this.addFilter(e,"$within",{$box:n})}},{key:"withinPolygon",value:function(e,t){if((0,p.default)(t)===!1||0===t.length||t.length>3)throw new u.QueryError("coords must be a [[number, number]]");return t=t.map(function(e){if((0,y.default)(e[0])===!1||(0,y.default)(e[1])===!1)throw new u.QueryError("coords argument must be a [number, number]");return[parseFloat(e[0]),parseFloat(e[1])]}),this.addFilter(e,"$within",{$polygon:t})}},{key:"size",value:function(e,t){if((0,b.default)(t)&&(t=parseFloat(t)),!(0,y.default)(t))throw new u.QueryError("size must be a number");return this.addFilter(e,"$size",t)}},{key:"ascending",value:function(e){return(0,a.isDefined)(this._parent)?this._parent.ascending(e):this.sort[e]=1,this}},{key:"descending",value:function(e){return(0,a.isDefined)(this._parent)?this._parent.descending(e):this.sort[e]=-1,this}},{key:"addFilter",value:function(e,t,r){return(0,g.default)(this.filter[e])||(this.filter[e]={}),(0,a.isDefined)(t)&&(0,a.isDefined)(r)?this.filter[e][t]=r:this.filter[e]=t,this}},{key:"join",value:function(t,r){var n=this,o=this,i={};r=r.map(function(t){if(!(t instanceof e)){if(!(0,g.default)(t))throw new u.QueryError("query argument must be of type: Kinvey.Query[] or Object[].");t=new e(t)}return t.toPlainObject().filter}),0===r.length&&(o=new e,r=[o.toPlainObject().filter],o._parent=this);var a=Object.keys(this.filter);return(0,k.default)(a,function(e){i[e]=n.filter[e],delete n.filter[e]}),this.filter[t]=[i].concat(r),o}},{key:"process",value:function(e){if(this.isSupportedOffline()===!1){var t="This query is not able to run locally. The following filters are not supported locally:";throw(0,k.default)(A,function(e){t=t+" "+e}),new u.QueryError(t)}if(!(0,p.default)(e))throw new u.QueryError("data argument must be of type: Array.");var r=this.toPlainObject();return e=(0,c.default)(r.filter,e),(0,p.default)(r.fields)&&r.fields.length>0&&(e=e.map(function(e){var t=Object.keys(e);return(0,k.default)(t,function(t){r.fields.indexOf(t)===-1&&delete e[t]}),e})),(0,a.isDefined)(r.sort)&&e.sort(function(e,t){for(var n in r.sort)if(r.sort.hasOwnProperty(n)){var o=(0,a.nested)(e,n),i=(0,a.nested)(t,n);if((0,a.isDefined)(o)&&(0,a.isDefined)(i)===!1)return-1;if((0,a.isDefined)(i)&&(0,a.isDefined)(o)===!1)return 1;if(o!==i){var u=r.sort[n];return(o<i?-1:1)*u}}return 0}),(0,y.default)(r.skip)?(0,y.default)(r.limit)&&r.limit>0?e.slice(r.skip,r.skip+r.limit):e.slice(r.skip):e}},{key:"toPlainObject",value:function(){return(0,a.isDefined)(this._parent)?this._parent.toPlainObject():{fields:this.fields,filter:this.filter,sort:this.sort,skip:this.skip,limit:this.limit}}},{key:"toQueryString",value:function(){var e={};(0,O.default)(this.filter)||(e.query=this.filter),(0,O.default)(this.fields)||(e.fields=this.fields.join(",")),(0,y.default)(this.limit)&&(e.limit=this.limit),(0,y.default)(this.skip)&&this.skip>0&&(e.skip=this.skip),(0,O.default)(this.sort)||(e.sort=this.sort);var t=Object.keys(e);return(0,k.default)(t,function(t){e[t]=(0,b.default)(e[t])?e[t]:JSON.stringify(e[t])}),e}},{key:"toString",value:function(){return JSON.stringify(this.toQueryString())}},{key:"fields",get:function(){return this._fields},set:function(e){if(e=e||[],!(0,p.default)(e))throw new u.QueryError("fields must be an Array");(0,a.isDefined)(this._parent)?this._parent.fields=e:this._fields=e}},{key:"filter",get:function(){return this._filter},set:function(e){this._filter=e}},{key:"sort",get:function(){return this._sort},set:function(e){if(e&&(0,g.default)(e)===!1)throw new u.QueryError("sort must an Object");(0,a.isDefined)(this._parent)?this._parent.sort=e:this._sort=e||{}}},{key:"limit",get:function(){return this._limit},set:function(e){if((0,b.default)(e)&&(e=parseFloat(e)),(0,a.isDefined)(e)&&(0,y.default)(e)===!1)throw new u.QueryError("limit must be a number");this._parent?this._parent.limit=e:this._limit=e}},{key:"skip",get:function(){return this._skip},set:function(e){if((0,b.default)(e)&&(e=parseFloat(e)),(0,y.default)(e)===!1)throw new u.QueryError("skip must be a number");(0,a.isDefined)(this._parent)?this._parent.skip=e:this._skip=e}}]),e}();t.Query=R},function(e,t){!function(){"use strict";function r(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date?e.getTime():e instanceof Array?e.map(o):e}function i(e,t){return e.get?e.get(t):e[t]}function u(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var o=0,u=r.length;o<u;o++)if(e(t,i(r,o)))return!0;return!1}}function a(e,t){return e.v(e.a,t)}function s(e,t){for(var r=0;r<e.length;r++)if(a(t,i(e,r)))return r;return-1}function c(e,t){return{a:e,v:t}}function f(e,t){var r=[];return l(t,e.k,0,r),1===r.length?a(e.nv,r[0]):!!~s(r,e.nv)}function l(e,t,r,o){if(r===t.length||void 0==e)return void o.push(e);var u=i(t,r);if(n(e)&&isNaN(Number(u)))for(var a=0,s=e.length;a<s;a++)l(i(e,a),t,r,o);else l(i(e,u),t,r+1,o)}function h(e,t){return{a:{k:e,nv:t},v:f}}function p(e){return"Object"===String(e.constructor)||"functionObject(){[nativecode]}"===String(e.constructor).replace(/[\r\n\s\t]/g,"")}function d(e){(e=o(e))&&p(e)||(e={$eq:e});var t=[];for(var r in e){var n=e[r];if("$options"!==r)if(b[r])m[r]&&(n=m[r](n,e)),t.push(c(o(n),b[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);t.push(h(r.split("."),d(n)))}}return 1===t.length?t[0]:c(t,b.$and)}function y(e,t){var r=d(e);return t&&(r={a:r,v:function(e,r){return a(e,t(r))}}),r}function v(e,t,n){function o(e){return a(i,e)}r(t)&&(n=t,t=void 0);var i=y(e,n);return t?t.filter(o):o}var b={$eq:u(function(e,t){return e(t)}),$ne:function(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var o=0,u=r.length;o<u;o++)if(!e(t,i(r,o)))return!1;return!0}}(function(e,t){return!e(t)}),$or:function(e,t){for(var r=0,n=e.length;r<n;r++)if(a(i(e,r),t))return!0;return!1},$gt:u(function(e,t){return v.compare(o(t),e)>0}),$gte:u(function(e,t){return v.compare(o(t),e)>=0}),$lt:u(function(e,t){return v.compare(o(t),e)<0}),$lte:u(function(e,t){return v.compare(o(t),e)<=0}),$mod:u(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array)){var r=o(t);if(r===t&&"object"==typeof t)for(var n=e.length;n--;)if(String(e[n])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===r)for(var n=e.length;n--;)if(null==e[n])return!0;for(var n=e.length;n--;){var u=y(i(e,n),void 0),s=a(u,t);if(s&&"[object Object]"!==String(s)&&"[object Object]"!==String(t))return!0}return Boolean(!!~e.indexOf(o(t)))}for(var n=t.length;n--;)if(~e.indexOf(o(i(t,n))))return!0;return!1},$nin:function(e,t){return!b.$in(e,t)},$not:function(e,t){return!a(e,t)},$type:function(e,t){return void 0!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t){return b.$and(e,t)},$size:function(e,t){return!!t&&e===t.length},$nor:function(e,t){for(var r=0,n=e.length;r<n;r++)if(a(i(e,r),t))return!1;return!0},$and:function(e,t){t||(t=[]);for(var r=0,n=e.length;r<n;r++)if(!a(i(e,r),t))return!1;return!0},$regex:u(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t){return e.call(t,t)},$elemMatch:function(e,t){return n(t)?!!~s(t,e):a(e,t)},$exists:function(e,t){return void 0!=t===e}},m={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:n(e)&&!e.length?function(e){return n(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===v.compare(o(t),e)}},$ne:function(e){return m.$eq(e)},$and:function(e){return e.map(d)},$all:function(e){return m.$and(e)},$or:function(e){return e.map(d)},$nor:function(e){return e.map(d)},$not:function(e){return d(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return d(e)},$exists:function(e){return!!e}};v.use=function(e){if(r(e))return e(v);for(var t in e)36===t.charCodeAt(0)&&(b[t]=e[t])},v.indexOf=function(e,t,r){return s(t,y(e,r))},v.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}},void 0!==e&&void 0!==e.exports&&(Object.defineProperty(t,"__esModule",{value:!0}),e.exports=v,t.default=e.exports.default=v),"undefined"!=typeof window&&(window.sift=v)}()},function(e,t,r){var n=r(213),o=r(124),i=r(125),u=i&&i.isRegExp,a=u?o(u):n;e.exports=a},function(e,t,r){function n(e){return i(e)&&o(e)==u}var o=r(86),i=r(118),u="[object RegExp]";e.exports=n},function(e,t,r){function n(e,t){return(a(e)?o:i)(e,u(t))}var o=r(175),i=r(215),u=r(220),a=r(119);e.exports=n},function(e,t,r){var n=r(216),o=r(219),i=o(n);e.exports=i},function(e,t,r){function n(e,t){return e&&o(e,t,i)}var o=r(217),i=r(113);e.exports=n},function(e,t,r){var n=r(218),o=n();e.exports=o},function(e,t){function r(e){return function(t,r,n){for(var o=-1,i=Object(t),u=n(t),a=u.length;a--;){var s=u[e?a:++o];if(r(i[s],s,i)===!1)break}return t}}e.exports=r},function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!o(r))return e(r,n);for(var i=r.length,u=t?i:-1,a=Object(r);(t?u--:++u<i)&&n(a[u],u,a)!==!1;);return r}}var o=r(109);e.exports=n},function(e,t,r){function n(e){return"function"==typeof e?e:o}var o=r(101);e.exports=n},function(e,t,r){function n(e,t){return o(e,u(t,3),i)}var o=r(222),i=r(216),u=r(223);e.exports=n},function(e,t){function r(e,t,r){var n;return r(e,function(e,r,o){if(t(e,r,o))return n=r,!1}),n}e.exports=r},function(e,t,r){function n(e){return"function"==typeof e?e:null==e?u:"object"==typeof e?a(e)?i(e[0],e[1]):o(e):s(e)}var o=r(224),i=r(239),u=r(101),a=r(119),s=r(255);e.exports=n},function(e,t,r){function n(e){var t=i(e);return 1==t.length&&t[0][2]?u(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=r(225),i=r(236),u=r(238);e.exports=n},function(e,t,r){function n(e,t,r,n){var s=r.length,c=s,f=!n;if(null==e)return!c;for(e=Object(e);s--;){var l=r[s];if(f&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<c;){l=r[s];var h=l[0],p=e[h],d=l[1];if(f&&l[2]){if(void 0===p&&!(h in e))return!1}else{var y=new o;if(n)var v=n(p,d,h,e,t,y);if(!(void 0===v?i(d,p,u|a,n,y):v))return!1}}return!0}var o=r(147),i=r(226),u=1,a=2;e.exports=n},function(e,t,r){function n(e,t,r,u,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,r,u,n,a))}var o=r(227),i=r(118);e.exports=n},function(e,t,r){function n(e,t,r,n,v,m){var g=c(e),w=c(t),_=g?d:s(e),E=w?d:s(t);_=_==p?y:_,E=E==p?y:E;var O=_==y,j=E==y,k=_==E;if(k&&f(e)){if(!f(t))return!1;g=!0,O=!1}if(k&&!O)return m||(m=new o),g||l(e)?i(e,t,r,n,v,m):u(e,t,_,r,n,v,m);if(!(r&h)){var P=O&&b.call(e,"__wrapped__"),x=j&&b.call(t,"__wrapped__");if(P||x){var S=P?e.value():e,T=x?t.value():t;return m||(m=new o),v(S,T,r,n,m)}}return!!k&&(m||(m=new o),a(e,t,r,n,v,m))}var o=r(147),i=r(228),u=r(234),a=r(235),s=r(133),c=r(119),f=r(120),l=r(122),h=1,p="[object Arguments]",d="[object Array]",y="[object Object]",v=Object.prototype,b=v.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t,r,n,c,f){var l=r&a,h=e.length,p=t.length;if(h!=p&&!(l&&p>h))return!1;var d=f.get(e);if(d&&f.get(t))return d==t;var y=-1,v=!0,b=r&s?new o:void 0;for(f.set(e,t),f.set(t,e);++y<h;){var m=e[y],g=t[y];if(n)var w=l?n(g,m,y,t,e,f):n(m,g,y,e,t,f);if(void 0!==w){if(w)continue;v=!1;break}if(b){if(!i(t,function(e,t){if(!u(b,t)&&(m===e||c(m,e,r,n,f)))return b.push(t)})){v=!1;break}}else if(m!==g&&!c(m,g,r,n,f)){v=!1;break}}return f.delete(e),f.delete(t),v}var o=r(229),i=r(232),u=r(233),a=1,s=2;e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=r(160),i=r(230),u=r(231);n.prototype.add=n.prototype.push=i,n.prototype.has=u,e.exports=n},function(e,t){function r(e){return this.__data__.set(e,n),this}var n="__lodash_hash_undefined__";e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}e.exports=r},function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t,r){function n(e,t,r,n,o,O,k){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!O(new i(e),new i(t)));case h:case p:case v:return u(+e,+t);case d:return e.name==t.name&&e.message==t.message;case b:case g:return e==t+"";case y:var P=s;case m:var x=n&f;if(P||(P=c),e.size!=t.size&&!x)return!1;var S=k.get(e);if(S)return S==t;n|=l,k.set(e,t);var T=a(P(e),P(t),n,o,O,k);return k.delete(e),T;case w:if(j)return j.call(e)==j.call(t)}return!1}var o=r(87),i=r(196),u=r(97),a=r(228),s=r(201),c=r(205),f=1,l=2,h="[object Boolean]",p="[object Date]",d="[object Error]",y="[object Map]",v="[object Number]",b="[object RegExp]",m="[object Set]",g="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",E="[object DataView]",O=o?o.prototype:void 0,j=O?O.valueOf:void 0;e.exports=n},function(e,t,r){function n(e,t,r,n,u,s){var c=r&i,f=o(e),l=f.length;if(l!=o(t).length&&!c)return!1;for(var h=l;h--;){var p=f[h];if(!(c?p in t:a.call(t,p)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var y=!0;s.set(e,t),s.set(t,e);for(var v=c;++h<l;){p=f[h];var b=e[p],m=t[p];if(n)var g=c?n(m,b,p,t,e,s):n(b,m,p,e,t,s);if(!(void 0===g?b===m||u(b,m,r,n,s):g)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(y=!1)}return s.delete(e),s.delete(t),y}var o=r(190),i=1,u=Object.prototype,a=u.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){for(var t=i(e),r=t.length;r--;){var n=t[r],u=e[n];t[r]=[n,u,o(u)]}return t}var o=r(237),i=r(113);e.exports=n},function(e,t,r){function n(e){return e===e&&!o(e)}var o=r(92);e.exports=n},function(e,t){function r(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}e.exports=r},function(e,t,r){function n(e,t){return a(e)&&s(t)?c(f(e),t):function(r){var n=i(r,e);return void 0===n&&n===t?u(r,e):o(t,n,l|h)}}var o=r(226),i=r(240),u=r(252),a=r(243),s=r(237),c=r(238),f=r(251),l=1,h=2;e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=r(241);e.exports=n},function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[i(t[r++])];return r&&r==n?e:void 0}var o=r(242),i=r(251);e.exports=n},function(e,t,r){function n(e,t){return o(e)?e:i(e,t)?[e]:u(a(e))}var o=r(119),i=r(243),u=r(245),a=r(248);e.exports=n},function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(a.test(e)||!u.test(e)||null!=t&&e in Object(t))}var o=r(119),i=r(244),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=n},function(e,t,r){function n(e){return"symbol"==typeof e||i(e)&&o(e)==u}var o=r(86),i=r(118),u="[object Symbol]";e.exports=n},function(e,t,r){var n=r(246),o=/^\./,i=n(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,function(e,r,n,o){t.push(n?o.replace(/\\(\\)?/g,"$1"):r||e)}),t});e.exports=i},function(e,t,r){function n(e){var t=o(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}var o=r(247),i=500;e.exports=n},function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=e.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(n.Cache||o),r}var o=r(160),i="Expected a function";n.Cache=o,e.exports=n},function(e,t,r){function n(e){return null==e?"":o(e)}var o=r(249);e.exports=n},function(e,t,r){function n(e){if("string"==typeof e)return e;if(u(e))return i(e,n)+"";if(a(e))return f?f.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=r(87),i=r(250),u=r(119),a=r(244),s=1/0,c=o?o.prototype:void 0,f=c?c.toString:void 0;e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}e.exports=r},function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=r(244),i=1/0;e.exports=n},function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=r(253),i=r(254);e.exports=n},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){function n(e,t,r){t=o(t,e);for(var n=-1,f=t.length,l=!1;++n<f;){var h=c(t[n]);if(!(l=null!=e&&r(e,h)))break;e=e[h]}return l||++n!=f?l:!!(f=null==e?0:e.length)&&s(f)&&a(h,f)&&(u(e)||i(e))}var o=r(242),i=r(116),u=r(119),a=r(111),s=r(110),c=r(251);e.exports=n},function(e,t,r){function n(e){return u(e)?o(a(e)):i(e)}var o=r(256),i=r(257),u=r(243),a=r(251);e.exports=n},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=r(241);e.exports=n},function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=r(259),i=r(254);e.exports=n},function(e,t){function r(e,t){return null!=e&&o.call(e,t)}var n=Object.prototype,o=n.hasOwnProperty;e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Group=t.Aggregation=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(79),a=n(u),s=r(214),c=n(s),f=r(131),l=n(f),h=r(92),p=n(h),d=r(85),y=n(d),v=r(145),b=n(v),m=r(2),g=r(40),w=r(210),_=t.Aggregation=function(){function e(t){o(this,e),t=(0,a.default)({query:null,initial:{},key:{},reduceFn:function(){}.toString()},t),this.query=t.query,this.initial=t.initial,this.key=t.key,this.reduceFn=t.reduceFn}return i(e,[{key:"by",value:function(e){return this.key[e]=!0,this}},{key:"process",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.toPlainObject(),r=Object.keys(t.key),n=t.reduceFn.replace(/function[\s\S]*?\([\s\S]*?\)/,"");if(t.reduce=new Function(["doc","out"],n),this.query&&(e=this.query.process(e)),r.length>0){var o=[];return r.forEach(function(r){var n={};e.forEach(function(e){var o=e[r],i=(0,g.isDefined)(n[o])?n[o]:(0,b.default)(t.initial),u=t.reduce(e,i);(0,g.isDefined)(u)&&(i=u),n[o]=i}),Object.keys(n).forEach(function(e){var t={};t[r]=e,t=(0,a.default)({},t,n[e]),o.push(t)})}),o}var i=(0,b.default)(t.initial);return(0,c.default)(e,function(e){var r=t.reduce(e,i);(0,g.isDefined)(r)&&(i=r)}),[i]}},{key:"toPlainObject",value:function(){return{key:this.key,initial:this.initial,reduce:this.reduceFn,reduceFn:this.reduceFn,condition:this.query?this.query.toPlainObject().filter:{},query:this.query?this.query.toPlainObject():null}}},{key:"initial",get:function(){return(0,b.default)(this._initial)},set:function(e){if(!(0,p.default)(e))throw new m.KinveyError("initial must be an Object.");this._initial=e}},{key:"query",get:function(){return this._query},set:function(e){if((0,g.isDefined)(e)&&!(e instanceof w.Query))throw new m.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"reduceFn",get:function(){return this._reduceFn},set:function(e){if((0,y.default)(e)&&(e=e.toString()),!(0,l.default)(e))throw new m.KinveyError("fn argument must be of type function or string.");this._reduceFn=e}}],[{key:"count",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var r=new e;return r.by(t),r.initial={count:0},r.reduceFn="function(doc, out) {  out.count += 1;  return out;}",r}},{key:"sum",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var r=new e;return r.initial={sum:0},r.reduceFn='function(doc, out) {  out.sum += doc["'+t+'"];  return out;}',r}},{key:"min",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var r=new e;return r.initial={min:1/0},r.reduceFn='function(doc, out) {  out.min = Math.min(out.min, doc["'+t+'"]);  return out;}',r}},{key:"max",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var r=new e;return r.initial={max:-(1/0)},r.reduceFn='function(doc, out) {  out.max = Math.max(out.max, doc["'+t+'"]);  return out;}',r}},{key:"average",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=t.replace("'","\\'");var r=new e;return r.initial={count:0,average:0},r.reduceFn='function(doc, out) {  out.average = (out.average * out.count + doc["'+t+'"]) / (out.count + 1);  out.count += 1;  return out;}',r}}]),e}();t.Group=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.RequestMethod=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(74),c=n(s),f=r(79),l=n(f),h=r(131),p=n(h),d=r(142),y=n(d),v=r(140),b=r(2),m=r(40),g=r(262),w=r(263),_={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};Object.freeze(_),t.RequestMethod=_;t.Request=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),t=(0,l.default)({followRedirect:!0},t),this.client=t.client,this.method=t.method||_.GET,this.headers=t.headers||new w.Headers,this.url=t.url||"",this.body=t.body||t.data,this.timeout=(0,m.isDefined)(t.timeout)?t.timeout:this.client.defaultTimeout,this.followRedirect=t.followRedirect===!0,this.cache=t.cache===!0}return i(e,[{key:"execute",value:function(){return(0,m.isDefined)(this.rack)===!1?a.default.reject(new b.KinveyError("Unable to execute the request. Please provide a rack to execute the request.")):this.rack.execute(this).then(function(e){if((0,m.isDefined)(e)===!1)throw new b.NoResponseError;return e instanceof g.Response==!1&&(e=new g.Response({statusCode:e.statusCode,headers:e.headers,data:e.data})),e})}},{key:"cancel",value:function(){return this.rack.cancel()}},{key:"toPlainObject",value:function(){return{method:this.method,headers:this.headers.toPlainObject(),url:this.url,body:this.body,timeout:this.timeout,followRedirect:this.followRedirect}}},{key:"client",get:function(){
return this._client||v.Client.sharedInstance()},set:function(e){if(e&&e instanceof v.Client==!1)throw new b.KinveyError("client must be an instance of the Client class.");this._client=e}},{key:"method",get:function(){return this._method},set:function(e){switch((0,p.default)(e)||(e=String(e)),e=e.toUpperCase()){case _.GET:case _.POST:case _.PATCH:case _.PUT:case _.DELETE:this._method=e;break;default:throw new b.KinveyError("Invalid request method. Only GET, POST, PATCH, PUT, and DELETE are allowed.")}}},{key:"headers",get:function(){return this._headers},set:function(e){e instanceof w.Headers||(e=new w.Headers(e)),this._headers=e}},{key:"url",get:function(){return this.cache===!0?(0,m.appendQuery)(this._url,c.default.stringify({_:Math.random().toString(36).substr(2)})):this._url},set:function(e){this._url=e}},{key:"data",get:function(){return this.body},set:function(e){this.body=e}},{key:"timeout",get:function(){return this._timeout},set:function(e){if(e=parseInt(e,10),(0,y.default)(e)===!1||isNaN(e))throw new b.KinveyError("Invalid timeout. Timeout must be a number.");this._timeout=e}},{key:"followRedirect",get:function(){return this._followRedirect},set:function(e){this._followRedirect=!!e}},{key:"cache",get:function(){return this._cache},set:function(e){this._cache=!!e}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyResponse=t.Response=t.StatusCode=void 0;var u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(79),c=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(2),l=r(263),h={Ok:200,Created:201,Empty:204,MovedPermanently:301,Found:302,NotModified:304,TemporaryRedirect:307,PermanentRedirect:308,Unauthorized:401,NotFound:404,ServerError:500};Object.freeze(h),t.StatusCode=h;var p=t.Response=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),t=(0,c.default)({statusCode:h.Empty,headers:new l.Headers,data:null},t),this.statusCode=t.statusCode,this.headers=t.headers,this.data=t.data}return a(e,[{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300||this.statusCode===h.MovedPermanently||this.statusCode===h.Found||this.statusCode===h.NotModified||this.statusCode===h.TemporaryRedirect||this.statusCode===h.PermanentRedirect}},{key:"isServerError",value:function(){return this.statusCode>=500&&this.statusCode<600}},{key:"isClientError",value:function(){return this.statusCode>=400&&this.statusCode<500}},{key:"headers",get:function(){return this._headers},set:function(e){e instanceof l.Headers||(e=new l.Headers(e)),this._headers=e}},{key:"error",get:function(){if(this.isSuccess())return null;var e=this.data||{},t=e.message||e.description,r=e.debug,n=this.statusCode,o=this.headers.get("X-Kinvey-Request-ID");return n===h.Unauthorized?new f.InsufficientCredentialsError(t,r,n,o):n===h.NotFound?new f.NotFoundError(t,r,n,o):n===h.ServerError?new f.ServerError(t,r,n,o):new f.KinveyError(t,r,n,o)}}]),e}();t.KinveyResponse=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"error",get:function(){if(this.isSuccess())return null;var e=this.data||{},r=e.name||e.error,n=e.message||e.description,o=e.debug,i=this.statusCode,a=this.headers.get("X-Kinvey-Request-ID"),s=void 0;if("APIVersionNotAvailable"===r)s=new f.APIVersionNotAvailableError(n,o,i,a);else if("APIVersionNotImplemented"===r)s=new f.APIVersionNotImplementedError(n,o,i,a);else if("AppProblem"===r)s=new f.AppProblemError(n,o,i,a);else if("AppProblem"===r)s=new f.AppProblemError(n,o,i,a);else if("BadRequest"===r)s=new f.BadRequestError(n,o,i,a);else if("BLInternalError"===r||"BLRuntimeError"===r||"BLSyntaxError"===r||"BLTimeoutError"===r||"BLViolationError"===r)s=new f.BLError(n,o,i,a);else if("CORSDisabled"===r)s=new f.CORSDisabledError(n,o,i,a);else if("DuplicateEndUsers"===r)s=new f.DuplicateEndUsersError(n,o,i,a);else if("FeatureUnavailable"===r)s=new f.FeatureUnavailableError(n,o,i,a);else if("IncompleteRequestBody"===r)s=new f.IncompleteRequestBodyError(n,o,i,a);else if("IndirectCollectionAccessDisallowed"===r)s=new f.IndirectCollectionAccessDisallowedError(n,o,i,a);else if("InsufficientCredentials"===r)s=new f.InsufficientCredentialsError(n,o,i,a);else if("InvalidCredentials"===r)s=new f.InvalidCredentialsError(n,o,i,a);else if("InvalidIdentifier"===r)s=new f.InvalidIdentifierError(n,o,i,a);else if("InvalidQuerySyntax"===r)s=new f.InvalidQuerySyntaxError(n,o,i,a);else if("JSONParseError"===r)s=new f.JSONParseError(n,o,i,a);else if("KinveyInternalErrorRetry"===r)s=new f.KinveyInternalErrorRetry(n,o,i,a);else if("KinveyInternalErrorStop"===r)s=new f.KinveyInternalErrorStop(n,o,i,a);else if("MissingQuery"===r)s=new f.MissingQueryError(n,o,i,a);else if("MissingRequestHeader"===r)s=new f.MissingRequestHeaderError(n,o,i,a);else if("MissingRequestParameter"===r)s=new f.MissingRequestParameterError(n,o,i,a);else if("EntityNotFound"===r||"CollectionNotFound"===r||"AppNotFound"===r||"UserNotFound"===r||"BlobNotFound"===r||"DocumentNotFound"===r)s=new f.NotFoundError(n,o,i,a);else if("ParameterValueOutOfRange"===r)s=new f.ParameterValueOutOfRangeError(n,o,i,a);else if("ServerError"===r)s=new f.ServerError(n,o,i,a);else if("StaleRequest"===r)s=new f.StaleRequestError(n,o,i,a);else if("UserAlreadyExists"===r)s=new f.UserAlreadyExistsError(n,o,i,a);else{if("WritesToCollectionDisallowed"!==r)return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"error",this);s=new f.WritesToCollectionDisallowedError(n,o,i,a)}return s}}]),t}(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Headers=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(214),a=n(u),s=r(131),c=n(s),f=r(129),l=n(f),h=r(40);t.Headers=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.headers={},this.addAll(t)}return i(e,[{key:"get",value:function(e){if(e){(0,c.default)(e)===!1&&(e=String(e));return this.headers[e.toLowerCase()]}}},{key:"set",value:function(e,t){if((0,h.isDefined)(e)===!1||(0,h.isDefined)(t)===!1)throw new Error("A name and value must be provided to set a header.");(0,c.default)(e)===!1&&(e=String(e));var r=this.headers;return e=e.toLowerCase(),(0,c.default)(t)===!1?r[e]=JSON.stringify(t):r[e]=t,this.headers=r,this}},{key:"has",value:function(e){return!!this.get(e)}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.set(e.name,e.value)}},{key:"addAll",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r instanceof e&&(r=r.toPlainObject()),(0,l.default)(r)===!1)throw new Error("Headers argument must be an object.");var n=Object.keys(r);return(0,a.default)(n,function(e){try{t.set(e,r[e])}catch(e){}}),this}},{key:"remove",value:function(e){if(e){(0,c.default)(e)===!1&&(e=String(e));var t=this.headers;delete t[e.toLowerCase()],this.headers=t}return this}},{key:"clear",value:function(){return this.headers={},this}},{key:"toPlainObject",value:function(){return this.headers}},{key:"toString",value:function(){return JSON.stringify(this.toPlainObject())}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRack=t.CacheRack=t.Rack=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(47),f=n(c),l=r(265),h=n(l),p=r(85),d=n(p),y=r(40),v=r(267),b=n(v),m=r(269),g=t.Rack=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Rack";o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.middlewares=[],r.canceled=!1,r.activeMiddleware=void 0,r}return u(t,e),a(t,[{key:"use",value:function(e){if((0,y.isDefined)(e)){if(e instanceof m.Middleware)return void this.middlewares.push(e);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"reset",value:function(){this.middlewares=[]}},{key:"execute",value:function(e){var t=this;return(0,y.isDefined)(e)===!1?f.default.reject(new Error("Request is undefined. Please provide a valid request.")):(0,h.default)((0,b.default)(this.middlewares),function(r,n){return r.then(function(r){var o=r.request,i=r.response;return t.canceled?f.default.reject(new Error("Cancelled")):(t.activeMiddleware=n,n.handle(o||e,i))})},f.default.resolve({request:e})).then(function(e){var r=e.response;return t.canceled===!0?f.default.reject(new Error("Cancelled")):(t.canceled=!1,t.activeMiddleware=void 0,r)}).catch(function(e){throw t.canceled=!1,t.activeMiddleware=void 0,e})}},{key:"cancel",value:function(){return this.canceled=!0,(0,y.isDefined)(this.activeMiddleware)&&(0,d.default)(this.activeMiddleware.cancel)?this.activeMiddleware.cancel():f.default.resolve()}},{key:"handle",value:function(e){return this.execute(e)}},{key:"generateTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"generateTree",this).call(this,e);return(0,b.default)(this.middlewares).forEach(function(t){r.nodes.push(t.generateTree(e+1))}),r}}]),t}(m.Middleware),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cache Rack";o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.use(new m.CacheMiddleware),r}return u(t,e),a(t,[{key:"useCacheMiddleware",value:function(e){this.reset(),this.use(e)}}]),t}(g),_=new w;t.CacheRack=_;var E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Network Rack";o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.use(new m.SerializeMiddleware),r.use(new m.HttpMiddleware),r.use(new m.ParseMiddleware),r}return u(t,e),a(t,[{key:"useHttpMiddleware",value:function(e){this.reset(),this.use(new m.SerializeMiddleware),this.use(e),this.use(new m.ParseMiddleware)}}]),t}(g),O=new E;t.NetworkRack=O},function(e,t,r){function n(e,t,r){var n=s(e)?o:a,c=arguments.length<3;return n(e,u(t,4),r,c,i)}var o=r(200),i=r(215),u=r(223),a=r(266),s=r(119);e.exports=n},function(e,t){function r(e,t,r,n,o){return o(e,function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)}),r}e.exports=r},function(e,t,r){function n(e){return null==e?[]:o(e,i(e))}var o=r(268),i=r(113);e.exports=n},function(e,t,r){function n(e,t){return o(t,function(t){return e[t]})}var o=r(250);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(270);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(286);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(271);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(287);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(288);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(273);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheMiddleware=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(132),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(40),f=r(271),l=r(273);t.CacheMiddleware=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Cache Middleware";return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"loadStorage",value:function(e){return new l.Storage(e)}},{key:"handle",value:function(e){var t=e.method,r=e.body,n=e.appKey,o=e.collection,i=e.entityId,u=this.loadStorage(n),a=void 0;return"GET"===t?a=(0,c.isDefined)(i)?u.findById(o,i):u.find(o):"POST"===t||"PUT"===t?a="_group"===i?u.find(o):u.save(o,r):"DELETE"===t&&(a=(0,c.isDefined)(o)===!1?u.clear():u.removeById(o,i)),a.then(function(e){var r={statusCode:"POST"===t?201:200,data:e};return"POST"===t&&"_group"===i&&(r.statusCode=200),((0,c.isDefined)(e)===!1||(0,s.default)(e))&&(r.statusCode=204),r}).catch(function(e){return{statusCode:e.code}}).then(function(e){return{response:e}})}}]),t}(f.Middleware)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Middleware=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(47),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(272);t.Middleware=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Middleware";n(this,e),this.name=t}return o(e,[{key:"handle",value:function(){return u.default.reject(new Error("A subclass middleware must override the handle function."))}},{key:"cancel",value:function(){return u.default.resolve()}},{key:"generateTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{value:this.name,level:e,nodes:[]}}},{key:"toString",value:function(){var e=this.generateTree();return a.AsciiTree.generate(e)}}]),e}()},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(0===e.level)return e.value;for(var r="\r\n",n=t?s:u,o=1;o<e.level;o+=1)r=""+r+(i[o]?" ":c),r+="  ";return""+r+n+a+" "+e.value}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=[],u=String.fromCharCode(9500),a=String.fromCharCode(9472),s=String.fromCharCode(9492),c=String.fromCharCode(9474);t.AsciiTree=function(){function e(){r(this,e)}return o(e,null,[{key:"generate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],o=n(t,r);if(t.nodes.length>0){var u=t.nodes.length-1;t.nodes.forEach(function(t,r){i[t.level]=r===u,o+=e.generate(t,r===u)})}return o}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.MemoryAdapter=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(131),c=n(s),f=r(119),l=n(f),h=r(40),p=r(2),d=r(274),y=new h.Queue(1,1/0);t.MemoryAdapter=d.MemoryAdapter;t.Storage=function(){function e(t){if(o(this,e),!t)throw new p.KinveyError("Unable to create a Storage instance without a name.");if(!(0,c.default)(t))throw new p.KinveyError("The name is not a string. A name must be a string to create a Storage instance.");this.name=t}return i(e,[{key:"loadAdapter",value:function(){var e=this;return a.default.resolve().then(function(){return d.MemoryAdapter.load(e.name)}).then(function(e){return(0,h.isDefined)(e)?e:a.default.reject(new p.KinveyError("Unable to load a storage adapter."))})}},{key:"generateObjectId",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t="abcdef0123456789",r="",n=0,o=t.length;n<e;n+=1){var i=Math.floor(Math.random()*o);r+=t.substring(i,i+1)}return r}},{key:"find",value:function(e){return this.loadAdapter().then(function(t){return t.find(e)}).catch(function(e){return e instanceof p.NotFoundError||404===e.code?[]:a.default.reject(e)}).then(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]})}},{key:"findById",value:function(e,t){return(0,c.default)(t)?this.loadAdapter().then(function(r){return r.findById(e,t)}):a.default.reject(new p.KinveyError("id must be a string",t))}},{key:"save",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return y.add(function(){var n=!1;return r?((0,l.default)(r)||(n=!0,r=[r]),r=r.map(function(e){if(!(0,h.isDefined)(e._id)){var r=e._kmd||{};r.local=!0,e._kmd=r,e._id=t.generateObjectId()}return e}),t.loadAdapter().then(function(t){return t.save(e,r)}).then(function(e){return n&&e.length>0?e[0]:e})):a.default.resolve(null)})}},{key:"remove",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.default.all(r.map(function(r){return(0,h.isDefined)(r._id)?t.removeById(e,r._id):a.default.reject(new p.KinveyError("Unable to remove this entity because it does not have _id."))})).then(function(e){return e.reduce(function(e,t){return e.count+=t.count,e},{count:0})})}},{key:"removeById",value:function(e,t){var r=this;return y.add(function(){return(0,c.default)(t)?r.loadAdapter().then(function(r){return r.removeById(e,t)}):a.default.reject(new p.KinveyError("id must be a string",t))})}},{key:"clear",value:function(){var e=this;return y.add(function(){return e.loadAdapter().then(function(e){return e.clear()})})}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryAdapter=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(141),c=n(s),f=r(275),l=n(f),h=r(214),p=n(h),d=r(267),y=n(d),v=r(279),b=n(v),m=r(131),g=n(m),w=r(119),_=n(w),E=r(40),O=r(2),j={},k=function(){function e(t){if(o(this,e),!(0,E.isDefined)(t))throw new Error("A name for the collection is required to use the memory persistence adapter.",t);if(!(0,g.default)(t))throw new Error("The name of the collection must be a string to use the memory persistence adapter",t);this.name=t,this.cache=j[t],(0,E.isDefined)(this.cache)||(this.cache=new c.default,j[t]=this.cache)}return i(e,[{key:"find",value:function(e){try{var t=this.cache.get(e);return t?a.default.resolve(JSON.parse(t)):a.default.resolve([])}catch(e){return a.default.reject(e)}}},{key:"findById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,b.default)(n,function(e){return e._id===t});return o?o:a.default.reject(new O.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" memory database."))})}},{key:"save",value:function(e,t){var r=this,n=!1;return(0,_.default)(t)||(t=[t],n=!0),0===t.length?a.default.resolve(t):this.find(e).then(function(o){o=(0,l.default)(o,"_id"),t=(0,l.default)(t,"_id");var i=Object.keys(t);return(0,p.default)(i,function(e){o[e]=t[e]}),r.cache.set(e,JSON.stringify((0,y.default)(o))),t=(0,y.default)(t),n?t[0]:t})}},{key:"removeById",value:function(e,t){var r=this;return this.find(e).then(function(n){n=(0,l.default)(n,"_id");var o=n[t];return(0,E.isDefined)(o)?(delete n[t],r.cache.set(e,JSON.stringify((0,y.default)(n))),{count:1}):a.default.reject(new O.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" memory database."))})}},{key:"clear",value:function(){return this.cache.clear(),a.default.resolve(null)}}]),e}(),P={load:function(e){return new k(e)}};t.MemoryAdapter=P},function(e,t,r){var n=r(81),o=r(276),i=o(function(e,t,r){n(e,r,t)});e.exports=i},function(e,t,r){function n(e,t){return function(r,n){var s=a(r)?o:i,c=t?t():{};return s(r,e,u(n,2),c)}}var o=r(277),i=r(278),u=r(223),a=r(119);e.exports=n},function(e,t){function r(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var u=e[o];t(n,u,r(u),e)}return n}e.exports=r},function(e,t,r){function n(e,t,r,n){return o(e,function(e,o,i){t(n,e,r(e),i)}),n}var o=r(215);e.exports=n},function(e,t,r){var n=r(280),o=r(281),i=n(o);e.exports=i},function(e,t,r){function n(e){return function(t,r,n){var a=Object(t);if(!i(t)){var s=o(r,3);t=u(t),r=function(e){return s(a[e],e,a)}}var c=e(t,r,n);return c>-1?a[s?t[c]:c]:void 0}}var o=r(223),i=r(109),u=r(113);e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:u(r);return s<0&&(s=a(n+s,0)),o(e,i(t,3),s)}var o=r(282),i=r(223),u=r(283),a=Math.max;e.exports=n},function(e,t){function r(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=r},function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=r(284);e.exports=n},function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=o(e))===i||e===-i){return(e<0?-1:1)*u}return e===e?e:0}var o=r(285),i=1/0,u=1.7976931348623157e308;e.exports=n},function(e,t,r){function n(e){if("number"==typeof e)return e;if(i(e))return u;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=c.test(e);return r||f.test(e)?l(e.slice(2),r?2:8):s.test(e)?u:+e}var o=r(92),i=r(244),u=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt;e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMiddleware=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(2),f=r(271);t.HttpMiddleware=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Middleware";return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"handle",value:function(){return s.default.reject(new c.KinveyError("Unable to send network request.","Please override the core HttpMiddleware."))}},{key:"cancel",value:function(){return s.default.resolve()}}]),t}(f.Middleware)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseMiddleware=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(40),f=r(271);t.ParseMiddleware=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Parse Middleware";return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"handle",value:function(e,t){if((0,c.isDefined)(t)&&(0,c.isDefined)(t.data)){var r=t.headers.get("Content-Type");if(r&&0===r.indexOf("application/json"))try{t.data=JSON.parse(t.data)}catch(e){}}return s.default.resolve({response:t})}}]),t}(f.Middleware)},function(e,t,r){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SerializeMiddleware=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(40),f=r(271);t.SerializeMiddleware=function(t){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Serialize Middleware";return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return i(r,t),u(r,[{key:"handle",value:function(t){if((0,c.isDefined)(t)&&(0,c.isDefined)(t.body)){var r=t.headers.get("content-type");if((0,c.isDefined)(r))if(0===r.indexOf("application/json"))t.body=JSON.stringify(t.body);else if(0===r.indexOf("application/x-www-form-urlencoded")){var n=t.body,o=[];Object.keys(n).forEach(function(t){o.push(e.encodeURIComponent(t)+"="+e.encodeURIComponent(n[t]))}),t.body=o.join("&")}}return s.default.resolve({request:t})}}]),r}(f.Middleware)}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DeltaFetchRequest=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n,o){var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var u=Object.getPrototypeOf(t);null!==u&&e(u,r,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},f=r(47),l=n(f),h=r(275),p=n(h),d=r(265),y=n(d),v=r(290),b=n(v),m=r(267),g=n(m),w=r(214),_=n(w),E=r(119),O=n(E),j=r(131),k=n(j),P=r(2),x=r(40),S=r(210),T=r(261),A=r(291),R=r(144),M=r(262);t.DeltaFetchRequest=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"execute",value:function(){var e=this;return new R.CacheRequest({method:T.RequestMethod.GET,url:this.url,headers:this.headers,query:this.query,timeout:this.timeout,client:this.client}).execute().then(function(e){return e.data}).catch(function(e){if(!(e instanceof P.NotFoundError))throw e;return[]}).then(function(t){if((0,O.default)(t)&&t.length>0){var r=(0,p.default)(t,"_id"),n=new S.Query((0,b.default)(e.query,"toJSON",e.query));return n.fields=["_id","_kmd.lmt"],new A.KinveyRequest({method:T.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:n,
timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}).execute().then(function(e){return e.data}).then(function(t){var n=(0,p.default)(t,"_id"),o=n,i=Object.keys(r);(0,_.default)(i,function(e){var t=r[e],i=n[e];i&&(0,x.isDefined)(i._kmd)&&(0,x.isDefined)(t._kmd)&&i._kmd.lmt===t._kmd.lmt?delete o[e]:delete r[e]});for(var u=Object.keys(o),a=[],s=0;s<u.length;){var c=new S.Query((0,b.default)(e.query,"toJSON",e.query)),f=u.slice(s,u.length>200+s?200:u.length);c.contains("_id",f);var h=new A.KinveyRequest({method:T.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:c,timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}),d=h.execute();a.push(d),s+=200}return l.default.all(a)}).then(function(t){var n=(0,y.default)(t,function(e,t){if(t.isSuccess()){var r=e.headers;r.addAll(t.headers),e.headers=r,e.data=e.data.concat(t.data)}return e},new M.Response({statusCode:M.StatusCode.Ok,data:[]}));if(n.data=n.data.concat((0,g.default)(r)),e.query){var o=new S.Query((0,b.default)(e.query,"toJSON",e.query));o.skip=0,o.limit=0,n.data=o.process(n.data)}return n})}return new A.KinveyRequest({method:T.RequestMethod.GET,url:e.url,headers:e.headers,authType:e.authType,query:e.query,timeout:e.timeout,client:e.client,properties:e.properties,skipBL:e.skipBL,trace:e.trace,followRedirect:e.followRedirect,cache:e.cache}).execute()})}},{key:"method",get:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"method",this)},set:function(e){switch((0,k.default)(e)||(e=String(e)),e=e.toUpperCase()){case T.RequestMethod.GET:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"method",e,this);break;case T.RequestMethod.POST:case T.RequestMethod.PATCH:case T.RequestMethod.PUT:case T.RequestMethod.DELETE:default:throw new P.KinveyError("Invalid request Method. Only RequestMethod.GET is allowed.")}}}]),t}(A.KinveyRequest)},function(e,t,r){function n(e,t,r){t=o(t,e);var n=-1,a=t.length;for(a||(a=1,e=void 0);++n<a;){var s=null==e?void 0:e[u(t[n])];void 0===s&&(n=a,s=r),e=i(s)?s.call(e):s}return e}var o=r(242),i=r(85),u=r(251);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(e){var t=0,r=e.length;e=String(e||"");for(var n=0;n<r;n+=1){var o=encodeURI(e[n]).split("%").length;t+=1===o?1:o-1}return t}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.KinveyRequest=t.Properties=t.AuthType=t.NetworkRequest=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n,o){var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var u=Object.getPrototypeOf(t);null!==u&&e(u,r,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},f=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},l=r(47),h=n(l),p=r(292),d=r(74),y=n(d),v=r(297),b=n(v),m=r(79),g=n(m),w=r(132),_=n(w),E=r(67),O=n(E),j=r(210),k=r(260),P=r(40),x=r(2),S=r(261),T=r(263),A=r(262),R=r(264),M=t.NetworkRequest=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.rack=R.NetworkRack,r}return u(t,e),t}(S.Request),I={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",None:"None",Session:"Session"};Object.freeze(I),t.AuthType=I;var C={all:function(e){return C.session(e).catch(function(){return C.basic(e)})},app:function(e){return e.appKey&&e.appSecret?h.default.resolve({scheme:"Basic",username:e.appKey,password:e.appSecret}):h.default.reject(new Error("Missing client appKey and/or appSecret. Use Kinvey.initialize() to set the appKey and appSecret for the client."))},basic:function(e){return C.master(e).catch(function(){return C.app(e)})},master:function(e){return e.appKey&&e.masterSecret?h.default.resolve({scheme:"Basic",username:e.appKey,password:e.masterSecret}):h.default.reject(new Error("Missing client appKey and/or masterSecret. Use Kinvey.initialize() to set the appKey and masterSecret for the client."))},none:function(){return h.default.resolve(null)},session:function(e){var t=e.getActiveUser();return(0,P.isDefined)(t)?h.default.resolve({scheme:"Kinvey",credentials:t._kmd.authtoken}):h.default.reject(new x.NoActiveUserError("There is not an active user. Please login a user and retry the request."))}},q=t.Properties=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),t}(T.Headers);t.KinveyRequest=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e=(0,g.default)({skipBL:!1,trace:!1},e),r.authType=e.authType||I.None,r.query=e.query,r.aggregation=e.aggregation,r.properties=e.properties||new q,r.skipBL=e.skipBL===!0,r.trace=e.trace===!0,r}return u(t,e),s(t,[{key:"getAuthorizationHeader",value:function(){var e=this,t=h.default.resolve(void 0);if(this.authType)switch(this.authType){case I.All:t=C.all(this.client);break;case I.App:t=C.app(this.client);break;case I.Basic:t=C.basic(this.client);break;case I.Master:t=C.master(this.client);break;case I.None:t=C.none(this.client);break;case I.Session:t=C.session(this.client);break;default:t=C.session(this.client).catch(function(t){return C.master(e.client).catch(function(){throw t})})}return t.then(function(e){if((0,P.isDefined)(e)){var t=e.credentials;return e.username&&(t=new p.Buffer(e.username+":"+e.password).toString("base64")),e.scheme+" "+t}})}},{key:"execute",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getAuthorizationHeader().then(function(t){(0,P.isDefined)(t)?e.headers.set("Authorization",t):e.headers.remove("Authorization")}).then(function(){return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"execute",e).call(e)}).then(function(e){if(e instanceof A.KinveyResponse||(e=new A.KinveyResponse({statusCode:e.statusCode,headers:e.headers,data:e.data})),r===!1&&e.isSuccess()===!1)throw e.error;return e}).catch(function(o){if(n&&o instanceof x.InvalidCredentialsError){var i=e.client.getActiveUser();if((0,P.isDefined)(i)){var u=(0,P.isDefined)(i._socialIdentity)?i._socialIdentity:{},a=Object.keys(u).find(function(e){return"kinveyAuth"===u[e].identity}),s=u[a];if((0,P.isDefined)(s)){return new t({method:S.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:I.App,url:O.default.format({protocol:e.client.micProtocol,host:e.client.micHost,pathname:"/oauth/token"}),body:{grant_type:"refresh_token",client_id:s.client_id,redirect_uri:s.redirect_uri,refresh_token:s.refresh_token},properties:e.properties,timeout:e.timeout}).execute().then(function(e){return e.data}).then(function(t){return t.identity=s.identity,t.client_id=s.client_id,t.redirect_uri=s.redirect_uri,t.protocol=e.client.micProtocol,t.host=e.client.micHost,t}).then(function(r){var n={};return u[r.identity]=r,n._socialIdentity=u,new t({method:S.RequestMethod.POST,authType:I.App,url:O.default.format({protocol:e.client.apiProtocol,host:e.client.apiHost,pathname:"/user/"+e.client.appKey+"/login"}),properties:e.properties,body:n,timeout:e.timeout,client:e.client}).execute().then(function(e){return e.data}).then(function(t){return t._socialIdentity[r.identity]=(0,b.default)(t._socialIdentity[r.identity],r),e.client.setActiveUser(t)})}).then(function(){return e.execute(r,!1)}).catch(function(){return h.default.reject(o)})}}}return h.default.reject(o)})}},{key:"appVersion",get:function(){return this.client.appVersion}},{key:"query",get:function(){return this._query},set:function(e){if((0,P.isDefined)(e)&&!(e instanceof j.Query))throw new x.KinveyError("Invalid query. It must be an instance of the Query class.");this._query=e}},{key:"aggregation",get:function(){return this._aggregation},set:function(e){if((0,P.isDefined)(e)&&!(e instanceof k.Aggregation))throw new x.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class.");(0,P.isDefined)(e)&&(this.body=e.toPlainObject()),this._aggregation=e}},{key:"headers",get:function(){var e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"headers",this);if(e.has("Accept")||e.set("Accept","application/json; charset=utf-8"),e.has("Content-Type")||e.set("Content-Type","application/json; charset=utf-8"),e.has("X-Kinvey-Api-Version")||e.set("X-Kinvey-Api-Version",4),this.skipBL===!0?e.set("X-Kinvey-Skip-Business-Logic",!0):e.remove("X-Kinvey-Skip-Business-Logic"),this.trace===!0?(e.set("X-Kinvey-Include-Headers-In-Response","X-Kinvey-Request-Id"),e.set("X-Kinvey-ResponseWrapper",!0)):(e.remove("X-Kinvey-Include-Headers-In-Response"),e.remove("X-Kinvey-ResponseWrapper")),this.appVersion?e.set("X-Kinvey-Client-App-Version",this.appVersion):e.remove("X-Kinvey-Client-App-Version"),this.properties){var r=this.properties.toString();if((0,_.default)(r))e.remove("X-Kinvey-Custom-Request-Properties");else{var n=a(r);if(n>=2e3)throw new Error("The custom properties are "+n+" bytes.It must be less then 2000 bytes.","Please remove some custom properties.");e.set("X-Kinvey-Custom-Request-Properties",r)}}else e.remove("X-Kinvey-Custom-Request-Properties");return e},set:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"headers",e,this)}},{key:"url",get:function(){var e=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",this),r=this.query?this.query.toQueryString():{};return(0,_.default)(r)?e:(0,P.appendQuery)(e,y.default.stringify(r))},set:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"url",e,this)}},{key:"properties",get:function(){return this._properties},set:function(e){e&&e instanceof q==!1&&(e=new q(e)),this._properties=e}}]),t}(M)},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(t){if(t>V)throw new RangeError("Invalid typed array length");var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(e)}return o(e,t,r)}function o(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return e instanceof ArrayBuffer?f(e,t,r):"string"==typeof e?s(e,t):l(e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r){return i(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function a(e){return i(e),n(e<0?0:0|h(e))}function s(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=0|d(t,r),i=n(o),u=i.write(t,r);return u!==o&&(i=i.slice(0,u)),i}function c(e){for(var t=e.length<0?0:0|h(e.length),r=n(t),o=0;o<t;o+=1)r[o]=255&e[o];return r}function f(t,r,n){if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var o;return o=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.__proto__=e.prototype,o}function l(t){if(e.isBuffer(t)){var r=0|h(t.length),o=n(r);return 0===o.length?o:(t.copy(o,0,0,r),o)}if(t){if(Q(t)||"length"in t)return"number"!=typeof t.length||z(t.length)?n(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=V)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+V.toString(16)+" bytes");return 0|e}function p(t){return+t!=t&&(t=0),e.alloc(+t)}function d(t,r){if(e.isBuffer(t))return t.length;if(Q(t)||t instanceof ArrayBuffer)return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(o)return B(t).length;r=(""+r).toLowerCase(),o=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(t,r,n,o,i){if(0===t.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,z(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=e.from(r,o)),e.isBuffer(r))return 0===r.length?-1:m(t,r,n,o,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):m(t,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){function i(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}var u=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;u=2,a/=2,s/=2,r/=2}var c;if(o){var f=-1;for(c=r;c<a;c++)if(i(e,c)===i(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===s)return f*u}else f!==-1&&(c-=c-f),f=-1}else for(r+s>a&&(r=a-s),c=r;c>=0;c--){for(var l=!0,h=0;h<s;h++)if(i(e,c+h)!==i(t,h)){l=!1;break}if(l)return c}return-1}function g(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;u<n;++u){var a=parseInt(t.substr(2*u,2),16);if(z(a))return u;e[r+u]=a}return u}function w(e,t,r,n){return H(B(t,e.length-r),e,r,n)}function _(e,t,r,n){return H(L(t),e,r,n)}function E(e,t,r,n){return _(e,t,r,n)}function O(e,t,r,n){return H(F(t),e,r,n)}function j(e,t,r,n){return H(N(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],u=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=r){var s,c,f,l;switch(a){case 1:i<128&&(u=i);break;case 2:s=e[o+1],128==(192&s)&&(l=(31&i)<<6|63&s)>127&&(u=l);break;case 3:s=e[o+1],c=e[o+2],128==(192&s)&&128==(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[o+1],c=e[o+2],f=e[o+3],128==(192&s)&&128==(192&c)&&128==(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(u=l)}}null===u?(u=65533,a=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=a}return x(n)}function x(e){var t=e.length;if(t<=W)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=W));return r}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=K(e[i]);return o}function R(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,r,n,o,i,u){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<u)throw new RangeError('"value" argument is out of bounds');if(n+o>t.length)throw new RangeError("Index out of range")}function C(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||C(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(e,t,r,n,52,8),r+8}function U(e){if(e=e.trim().replace(G,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function K(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function L(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function N(e,t){for(var r,n,o,i=[],u=0;u<e.length&&!((t-=2)<0);++u)r=e.charCodeAt(u),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function F(e){return $.toByteArray(U(e))}function H(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Q(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function z(e){return e!==e}var $=r(294),Y=r(295);t.Buffer=e,t.SlowBuffer=p,t.INSPECT_MAX_BYTES=50;var V=2147483647;t.kMaxLength=V,e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,r){return o(e,t,r)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,r){return u(e,t,r)},e.allocUnsafe=function(e){return a(e)},e.allocUnsafeSlow=function(e){return a(e)},e.isBuffer=function(e){return null!=e&&e._isBuffer===!0},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,o=r.length,i=0,u=Math.min(n,o);i<u;++i)if(t[i]!==r[i]){n=t[i],o=r[i];break}return n<o?-1:o<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var o=e.allocUnsafe(r),i=0;for(n=0;n<t.length;++n){var u=t[n];if(!e.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,i),i+=u.length}return o},e.byteLength=d,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,o,i){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),r<0||n>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===t)return 0;for(var u=i-o,a=n-r,s=Math.min(u,a),c=this.slice(o,i),f=t.slice(r,n),l=0;l<s;++l)if(c[l]!==f[l]){u=c[l],a=f[l];break}return u<a?-1:a<u?1:0},e.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},e.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return _(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t);var o=this.subarray(t,r);return o.__proto__=e.prototype,o},e.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},e.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},e.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),Y.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),Y.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),Y.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),Y.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){I(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){I(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},e.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=0,u=1,a=0;for(this[t]=255&e;++i<r&&(u*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=r-1,u=1,a=0;for(this[t+i]=255&e;--i>=0&&(u*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+r},e.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},e.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},e.prototype.fill=function(t,r,n,o){if("string"==typeof t){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!e.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var u;if("number"==typeof t)for(u=r;u<n;++u)this[u]=t;else{var a=e.isBuffer(t)?t:new e(t,o),s=a.length;for(u=0;u<n-r;++u)this[u+r]=a[u%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g}).call(t,r(293).Buffer)},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?f(e,t,r):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,r,n){return a(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function c(e,t){if(a(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);e=o(e,n);var u=e.write(t,r);return u!==n&&(e=e.slice(0,u)),e}function l(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=l(e,t),e}function p(e,t){if(i.isBuffer(t)){var r=0|d(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||W(t.length)?o(e,0):l(e,t);if("Buffer"===t.type&&X(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),i.alloc(+e)}function v(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(n)return Q(e).length;t=(""+t).toLowerCase(),n=!0}}function b(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,o){function i(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}var u=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;u=2,a/=2,s/=2,r/=2}var c;if(o){var f=-1;for(c=r;c<a;c++)if(i(e,c)===i(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===s)return f*u}else f!==-1&&(c-=c-f),f=-1}else for(r+s>a&&(r=a-s),c=r;c>=0;c--){for(var l=!0,h=0;h<s;h++)if(i(e,c+h)!==i(t,h)){l=!1;break}if(l)return c}return-1}function _(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var u=0;u<n;++u){var a=parseInt(t.substr(2*u,2),16);if(isNaN(a))return u;e[r+u]=a}return u}function E(e,t,r,n){return V(Q(t,e.length-r),e,r,n)}function O(e,t,r,n){return V(z(t),e,r,n)}function j(e,t,r,n){return O(e,t,r,n)}function k(e,t,r,n){return V(Y(t),e,r,n)}function P(e,t,r,n){return V($(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],u=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=r){var s,c,f,l;switch(a){case 1:i<128&&(u=i);break;case 2:s=e[o+1],128==(192&s)&&(l=(31&i)<<6|63&s)>127&&(u=l);break;case 3:s=e[o+1],c=e[o+2],128==(192&s)&&128==(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[o+1],c=e[o+2],f=e[o+3],128==(192&s)&&128==(192&c)&&128==(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(u=l)}}null===u?(u=65533,a=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),o+=a}return T(n)}function T(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=H(e[i]);return o}function I(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,r,n,o,u){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<u)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function U(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function K(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return o||K(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,o){return o||K(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function N(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],u=0;u<n;++u){if((r=e.charCodeAt(u))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(u+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function z(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function $(e,t){for(var r,n,o,i=[],u=0;u<e.length&&!((t-=2)<0);++u)r=e.charCodeAt(u),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function Y(e){return G.toByteArray(N(e))}function V(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function W(e){return e!==e}var G=r(294),J=r(295),X=r(296);t.Buffer=i,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return u(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return s(null,e,t,r)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,u=Math.min(r,n);o<u;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var u=e[r];if(!i.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(n,o),o+=u.length}return n},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):b.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var u=o-n,a=r-t,s=Math.min(u,a),c=this.slice(n,o),f=e.slice(t,r),l=0;l<s;++l)if(c[l]!==f[l]){u=c[l],a=f[l];break}return u<a?-1:a<u?1:0},i.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},i.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return O(this,e,t,r);case"latin1":case"binary":return j(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var u=0;u<o;++u)n[u]=this[u+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),J.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),J.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),J.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),J.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){q(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){q(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=0,u=1,a=0;for(this[t]=255&e;++i<r&&(u*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);q(this,e,t,r,o-1,-o)}var i=r-1,u=1,a=0;for(this[t+i]=255&e;--i>=0&&(u*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/u>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,u=n-r;if(this===e&&r<t&&t<n)for(o=u-1;o>=0;--o)e[o+t]=this[o+r];else if(u<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<u;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+u),t);return u},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var u;if("number"==typeof e)for(u=t;u<r;++u)this[u]=e;else{var a=i.isBuffer(e)?e:Q(new i(e,n).toString()),s=a.length;for(u=0;u<r-t;++u)this[u+t]=a[u%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function o(e){var t,n,o,i,u,a=e.length;i=r(e),u=new f(3*a/4-i),n=i>0?a-4:a;var s=0;for(t=0;t<n;t+=4)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],u[s++]=o>>16&255,u[s++]=o>>8&255,u[s++]=255&o;return 2===i?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,u[s++]=255&o):1===i&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,u[s++]=o>>8&255,u[s++]=255&o),u}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function u(e,t,r){for(var n,o=[],u=t;u<r;u+=3)n=(e[u]<<16)+(e[u+1]<<8)+e[u+2],o.push(i(n));return o.join("")}function a(e){for(var t,r=e.length,n=r%3,o="",i=[],a=0,c=r-n;a<c;a+=16383)i.push(u(e,a,a+16383>c?c:a+16383));return 1===n?(t=e[r-1],o+=s[t>>2],o+=s[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=s[t>>10],o+=s[t>>4&63],o+=s[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=n,t.toByteArray=o,t.fromByteArray=a;for(var s=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=l.length;h<p;++h)s[h]=l[h],c[l.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,u,a=8*o-n-1,s=(1<<a)-1,c=s>>1,f=-7,l=r?o-1:0,h=r?-1:1,p=e[t+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=a;f>0;i=256*i+e[t+l],l+=h,f-=8);for(u=i&(1<<-f)-1,i>>=-f,f+=n;f>0;u=256*u+e[t+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===s)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),i-=c}return(p?-1:1)*u*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var u,a,s,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=f):(u=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-u))<1&&(u--,s*=2),t+=u+l>=1?h/s:h*Math.pow(2,1-l),t*s>=2&&(u++,s/=2),u+l>=f?(a=0,u=f):u+l>=1?(a=(t*s-1)*Math.pow(2,o),u+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;e[r+p]=255&a,p+=d,a/=256,o-=8);for(u=u<<o|a,c+=o;c>0;e[r+p]=255&u,p+=d,u/=256,c-=8);e[r+p-d]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(103),o=r(298),i=r(100),u=r(299),a=i(function(e){return e.push(void 0,u),n(o,void 0,e)});e.exports=a},function(e,t,r){var n=r(98),o=r(99),i=r(178),u=o(function(e,t,r,o){n(t,i(t),e,o)});e.exports=u},function(e,t,r){function n(e,t,r,n){return void 0===e||o(e,i[r])&&!u.call(n,r)?t:e}var o=r(97),i=Object.prototype,u=i.hasOwnProperty;e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(301);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(333);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(335);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(331);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(334);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(336);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=r(332);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheStore=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(47),f=n(c),l=r(302),h=n(l),p=r(79),d=n(p),y=r(275),v=n(y),b=r(313),m=n(b),g=r(119),w=n(g),_=r(265),E=n(_),O=r(318),j=n(O),k=r(67),P=n(k),x=r(143),S=r(2),T=r(210),A=r(260),R=r(320),M=r(40),I=r(331),C=r(332);t.CacheStore=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.ttl=r.ttl||void 0,n.syncManager=new C.SyncManager(n.collection,r),n}return u(t,e),a(t,[{key:"find",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,d.default)({syncAutomatically:this.syncAutomatically},n);var o=n.syncAutomatically===!0;return M.KinveyObservable.create(function(i){return!e||e instanceof T.Query?new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.next(u),o===!0?r.pendingSyncCount(e,n).then(function(t){return t>0?r.push(e,n).then(function(){return r.pendingSyncCount(e,n)}):t}).then(function(o){if(o>0)throw new S.KinveyError("Unable to fetch the entities on the backend. There are "+o+" entities that need to be synced.");return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"find",r).call(r,e,n).toPromise()}).then(function(e){var t=(0,h.default)(u,e,"_id"),o=Object.keys((0,v.default)(t,"_id")),i=(new T.Query).contains("_id",o);return r.clear(i,n).then(function(){return e})}).then(function(e){return new x.CacheRequest({method:x.RequestMethod.PUT,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname}),properties:n.properties,body:e,timeout:n.timeout}).execute().then(function(e){return e.data})}):u}).then(function(e){i.next(e)}).then(function(){i.complete()}).catch(function(e){return i.error(e)}):i.error(new S.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"findById",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,d.default)({syncAutomatically:this.syncAutomatically},n);var o=n.syncAutomatically===!0;return M.KinveyObservable.create(function(i){return(0,M.isDefined)(e)===!1?(i.next(void 0),i.complete()):new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname+"/"+e}),properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data}).catch(function(){}).then(function(u){if(i.next(u),o===!0){var a=new T.Query;return a.equalTo("_id",e),r.pendingSyncCount(a,n).then(function(e){return e>0?r.push(a,n).then(function(){return r.pendingSyncCount(a,n)}):e}).then(function(e){if(e>0)throw new S.KinveyError("Unable to find the entity on the backend. There are "+e+" entities that need to be synced.")}).then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"findById",r).call(r,e,n).toPromise()}).then(function(e){return new x.CacheRequest({method:x.RequestMethod.PUT,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname}),properties:n.properties,body:e,timeout:n.timeout}).execute().then(function(e){return e.data})})}return u}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)})})}},{key:"group",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,d.default)({syncAutomatically:this.syncAutomatically},n);var o=n.syncAutomatically===!0;return M.KinveyObservable.create(function(i){return e instanceof A.Aggregation?new x.CacheRequest({method:x.RequestMethod.POST,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname+"/_group"}),properties:n.properties,aggregation:e,timeout:n.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.next(u),o===!0?r.pendingSyncCount(null,n).then(function(e){return e>0?r.push(null,n).then(function(){return r.pendingSyncCount(null,n)}):e}).then(function(o){if(o>0)throw new S.KinveyError("Unable to group entities on the backend. There are "+o+" entities that need to be synced.");return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"group",r).call(r,e,n).toPromise()}):u}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)}):i.error(new S.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,d.default)({syncAutomatically:this.syncAutomatically},n);var o=n.syncAutomatically===!0;return M.KinveyObservable.create(function(i){return!e||e instanceof T.Query?new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:r.client.apiProtocol,host:r.client.apiHost,pathname:r.pathname}),properties:n.properties,query:e,timeout:n.timeout}).execute().then(function(e){return e.data}).catch(function(){return[]}).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).length}).then(function(u){return i.next(u),o===!0?r.pendingSyncCount(e,n).then(function(t){return t>0?r.push(e,n).then(function(){return r.pendingSyncCount(e,n)}):t}).then(function(e){if(e>0)throw new S.KinveyError("Unable to count entities on the backend. There are "+e+" entities that need to be synced.")}).then(function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"count",r).call(r,e,n).toPromise()}):u}).then(function(e){return i.next(e)}).then(function(){return i.complete()}).catch(function(e){return i.error(e)}):i.error(new S.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"create",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.KinveyObservable.create(function(n){return(0,M.isDefined)(e)===!1?(n.next(null),n.complete()):(0,w.default)(e)?n.error(new S.KinveyError("Unable to create an array of entities.","Please create entities one by one.")):new x.CacheRequest({method:x.RequestMethod.POST,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,body:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return t.syncManager.addCreateOperation(e,r).then(function(){return e})}).then(function(e){if(t.syncAutomatically===!0){var n=(new T.Query).equalTo("_id",e._id);return t.push(n,r).then(function(e){var t=e[0];if((0,M.isDefined)(t.error))throw t.error;return t.entity})}return e}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"update",
value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.KinveyObservable.create(function(n){return(0,M.isDefined)(e)===!1?(n.next(null),n.complete()):(0,w.default)(e)?n.error(new S.KinveyError("Unable to update an array of entities.","Please update entities one by one.")):(0,M.isDefined)(e._id)===!1?n.error(new S.KinveyError("The entity provided does not contain an _id. An _id is required to update the entity.",e)):new x.CacheRequest({method:x.RequestMethod.PUT,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,body:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return t.syncManager.addUpdateOperation(e,r).then(function(){return e})}).then(function(e){if(t.syncAutomatically===!0){var n=(new T.Query).equalTo("_id",e._id);return t.push(n,r).then(function(e){var t=e[0];if((0,M.isDefined)(t.error))throw t.error;return t.entity})}return e}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"remove",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.KinveyObservable.create(function(n){return!e||e instanceof T.Query?new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length>0?f.default.all((0,j.default)(e,function(e){if(new R.Metadata(e).isLocal()){var n=new T.Query;return n.equalTo("_id",e._id),t.clearSync(n,r).then(function(){return e})}return t.syncManager.addDeleteOperation(e,r).then(function(){return e})})).then(function(){return e}):e}).then(function(e){if(e.length>0&&t.syncAutomatically===!0){var n=(0,m.default)(e,function(e){return new R.Metadata(e).isLocal()}),o=Object.keys((0,v.default)(e,"_id")),i=(new T.Query).contains("_id",o);return t.push(i,r).then(function(e){return e.concat(n)})}return e}).then(function(e){return f.default.all((0,j.default)(e,function(e){return(0,M.isDefined)(e.error)===!1?new x.CacheRequest({method:x.RequestMethod.DELETE,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,authType:x.AuthType.Default,timeout:r.timeout}).execute().then(function(e){return e.data}):{count:0}}))}).then(function(e){return(0,E.default)(e,function(e,t){return e.count+=t.count,e},{count:0})}).then().then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new S.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise()}},{key:"removeById",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.KinveyObservable.create(function(n){return(0,M.isDefined)(e)===!1?(n.next({count:0}),n.complete()):new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:r.properties,authType:x.AuthType.Default,timeout:r.timeout}).execute().then(function(e){return e.data}).catch(function(e){if(e instanceof S.NotFoundError)return null;throw e}).then(function(e){if((0,M.isDefined)(e)){if(new R.Metadata(e).isLocal()){var n=new T.Query;return n.equalTo("_id",e._id),t.clearSync(n,r).then(function(){return e})}return t.syncManager.addDeleteOperation(e,r).then(function(){return e})}return e}).then(function(e){if(t.syncAutomatically===!0){var n=(new T.Query).equalTo("_id",e._id);return t.push(n,r).then(function(){return e})}return e}).then(function(e){return new x.CacheRequest({method:x.RequestMethod.DELETE,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,authType:x.AuthType.Default,timeout:r.timeout}).execute().then(function(e){return e.data})}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"clear",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M.KinveyObservable.create(function(n){return!e||e instanceof T.Query?new x.CacheRequest({method:x.RequestMethod.GET,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f.default.all((0,j.default)(e,function(e){return f.default.resolve(e).then(function(e){if(new R.Metadata(e).isLocal()){var n=new T.Query;return n.equalTo("_id",e._id),t.clearSync(n,r).then(function(){return e})}return e}).then(function(e){return new x.CacheRequest({method:x.RequestMethod.DELETE,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,authType:x.AuthType.Default,timeout:r.timeout}).execute().then(function(e){return e.data})})}))}).then(function(e){return(0,E.default)(e,function(e,t){return e.count+=t.count,e},{count:0})}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new S.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise()}},{key:"pendingSyncCount",value:function(e,t){return this.syncManager.count(e,t)}},{key:"pendingSyncEntities",value:function(e,t){return this.syncManager.find(e,t)}},{key:"push",value:function(e,t){return this.syncManager.push(e,t)}},{key:"pull",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=(0,d.default)({useDeltaFetch:this.useDeltaFetch},r),this.syncManager.pull(e,r).then(function(n){return t.clear(e,r).then(function(){return new x.CacheRequest({method:x.RequestMethod.PUT,url:P.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,body:n,timeout:r.timeout}).execute()}).then(function(){return n})})}},{key:"sync",value:function(e,t){var r=this;return t=(0,d.default)({useDeltaFetch:this.useDeltaFetch},t),this.push(e,t).then(function(n){return r.pull(e,t).then(function(e){return{push:n,pull:e}})})}},{key:"clearSync",value:function(e,t){return this.syncManager.clear(e,t)}},{key:"syncAutomatically",get:function(){return!0}}]),t}(I.NetworkStore)},function(e,t,r){var n=r(303),o=r(309),i=r(223),u=r(100),a=r(311),s=r(312),c=u(function(e,t){var r=s(t);return a(r)&&(r=void 0),a(e)?n(e,o(t,1,a,!0),i(r,2)):[]});e.exports=c},function(e,t,r){function n(e,t,r,n){var l=-1,h=i,p=!0,d=e.length,y=[],v=t.length;if(!d)return y;r&&(t=a(t,s(r))),n?(h=u,p=!1):t.length>=f&&(h=c,p=!1,t=new o(t));e:for(;++l<d;){var b=e[l],m=null==r?b:r(b);if(b=n||0!==b?b:0,p&&m===m){for(var g=v;g--;)if(t[g]===m)continue e;y.push(b)}else h(t,m,n)||y.push(b)}return y}var o=r(229),i=r(304),u=r(308),a=r(250),s=r(124),c=r(233),f=200;e.exports=n},function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=r(305);e.exports=n},function(e,t,r){function n(e,t,r){return t===t?u(e,t,r):o(e,i,r)}var o=r(282),i=r(306),u=r(307);e.exports=n},function(e,t){function r(e){return e!==e}e.exports=r},function(e,t){function r(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}e.exports=r},function(e,t){function r(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}e.exports=r},function(e,t,r){function n(e,t,r,u,a){var s=-1,c=e.length;for(r||(r=i),a||(a=[]);++s<c;){var f=e[s];t>0&&r(f)?t>1?n(f,t-1,r,u,a):o(a,f):u||(a[a.length]=f)}return a}var o=r(189),i=r(310);e.exports=n},function(e,t,r){function n(e){return u(e)||i(e)||!!(a&&e&&e[a])}var o=r(87),i=r(116),u=r(119),a=o?o.isConcatSpreadable:void 0;e.exports=n},function(e,t,r){function n(e){return i(e)&&o(e)}var o=r(109),i=r(118);e.exports=n},function(e,t){function r(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=r},function(e,t,r){function n(e,t){var r=[];if(!e||!e.length)return r;var n=-1,u=[],a=e.length;for(t=o(t,3);++n<a;){var s=e[n];t(s,n,e)&&(r.push(s),u.push(n))}return i(e,u),r}var o=r(223),i=r(314);e.exports=n},function(e,t,r){function n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var u=t[r];if(r==n||u!==s){var s=u;i(u)?a.call(e,u,1):o(e,u)}}return e}var o=r(315),i=r(111),u=Array.prototype,a=u.splice;e.exports=n},function(e,t,r){function n(e,t){return t=o(t,e),null==(e=u(e,t))||delete e[a(i(t))]}var o=r(242),i=r(312),u=r(316),a=r(251);e.exports=n},function(e,t,r){function n(e,t){return t.length<2?e:o(e,i(t,0,-1))}var o=r(241),i=r(317);e.exports=n},function(e,t){function r(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}e.exports=r},function(e,t,r){function n(e,t){return(a(e)?o:u)(e,i(t,3))}var o=r(250),i=r(223),u=r(319),a=r(119);e.exports=n},function(e,t,r){function n(e,t){var r=-1,n=i(e)?Array(e.length):[];return o(e,function(e,o,i){n[++r]=t(e,o,i)}),n}var o=r(215),i=r(109);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(321);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(322);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(323);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Acl=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(129),a=n(u),s=r(119),c=n(s),f=r(79),l=n(f),h=r(2),p=r(40);t.Acl=function(){function e(t){if(o(this,e),(0,a.default)(t)===!1)throw new h.KinveyError("entity argument must be an object");t._acl=t._acl||{},this.entity=t}return i(e,[{key:"addReader",value:function(e){var t=this.readers;return t.indexOf(e)===-1&&t.push(e),this.entity._acl.r=t,this}},{key:"addReaderGroup",value:function(e){var t=this.readerGroups;return t.indexOf(e)===-1&&t.push(e),this.entity._acl.groups=(0,l.default)({},this.entity._acl.groups,{r:t}),this}},{key:"addWriter",value:function(e){var t=this.writers;return t.indexOf(e)===-1&&t.push(e),this.entity._acl.w=t,this}},{key:"addWriterGroup",value:function(e){var t=this.writerGroups;return t.indexOf(e)===-1&&t.push(e),this.entity._acl.groups=(0,l.default)({},this.entity._acl.groups,{w:t}),this}},{key:"isGloballyReadable",value:function(){return this.entity._acl.gr===!0&&this.entity._acl.gr}},{key:"isGloballyWritable",value:function(){return this.entity._acl.gw===!0&&this.entity._acl.gw}},{key:"removeReader",value:function(e){var t=this.readers,r=t.indexOf(e);return r!==-1&&t.splice(r,1),this.entity._acl.r=t,this}},{key:"removeReaderGroup",value:function(e){var t=this.readerGroups,r=t.indexOf(e);return r!==-1&&t.splice(r,1),this.entity._acl.groups=(0,l.default)({},this.entity._acl.groups,{r:t}),this}},{key:"removeWriter",value:function(e){var t=this.writers,r=t.indexOf(e);return r!==-1&&t.splice(r,1),this.entity._acl.w=t,this}},{key:"removeWriterGroup",value:function(e){var t=this.writerGroups,r=t.indexOf(e);return r!==-1&&t.splice(r,1),this.entity._acl.groups=(0,l.default)({},this.entity._acl.groups,{w:t}),this}},{key:"toPlainObject",value:function(){return this.entity._acl}},{key:"creator",get:function(){return this.entity._acl.creator}},{key:"readers",get:function(){return(0,c.default)(this.entity._acl.r)?this.entity._acl.r:[]}},{key:"writers",get:function(){return(0,c.default)(this.entity._acl.w)?this.entity._acl.w:[]}},{key:"readerGroups",get:function(){return(0,p.isDefined)(this.entity._acl.groups)&&(0,c.default)(this.entity._acl.groups.r)?this.entity._acl.groups.r:[]}},{key:"writerGroups",get:function(){return(0,p.isDefined)(this.entity._acl.groups)&&(0,c.default)(this.entity._acl.groups.w)?this.entity._acl.groups.w:[]}},{key:"globallyReadable",set:function(e){this.entity._acl.gr=e===!0&&e}},{key:"globallyWritable",set:function(e){this.entity._acl.gw=e===!0&&e}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(129),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(2),s=r(40);t.Metadata=function(){function e(t){if(n(this,e),(0,u.default)(t)===!1)throw new a.KinveyError("entity argument must be an object");t._kmd=t._kmd||{},this.entity=t}return o(e,[{key:"isLocal",value:function(){return this.entity._kmd.local===!0}},{key:"toPlainObject",value:function(){return this.entity._kmd}},{key:"createdAt",get:function(){if((0,s.isDefined)(this.entity._kmd.ect))return new Date(this.entity._kmd.ect)}},{key:"ect",get:function(){return this.createdAt}},{key:"emailVerification",get:function(){if((0,s.isDefined)(this.entity._kmd.emailVerification))return this.entity._kmd.emailVerification.status}},{key:"lastModified",get:function(){if((0,s.isDefined)(this.entity._kmd.lmt))return new Date(this.entity._kmd.lmt)}},{key:"lmt",get:function(){return this.lastModified}},{key:"authtoken",get:function(){return this.entity._kmd.authtoken}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(79),c=n(s),f=r(131),l=n(f),h=r(92),p=n(h),d=r(132),y=n(d),v=r(67),b=n(v),m=r(140),g=r(143),w=r(2),_=r(300),E=r(324),O=r(40),j=r(321),k=r(322);t.User=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.data=t,this.client=r.client||m.Client.sharedInstance()}return i(e,[{key:"isActive",value:function(){var t=e.getActiveUser(this.client);return!(!(0,O.isDefined)(t)||t._id!==this._id)}},{key:"isEmailVerified",value:function(){return"confirmed"===this.metadata.emailVerification}},{key:"login",value:function(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t,u=this.isActive(),s=e.getActiveUser(this.client);return u===!0?a.default.reject(new w.ActiveUserError("This user is already the active user.")):(0,O.isDefined)(s)?a.default.reject(new w.ActiveUserError("An active user already exists. Please logout the active user before you login.")):((0,p.default)(i)?o=r||{}:i={username:t,password:r},(0,O.isDefined)(i.username)&&(i.username=String(i.username).trim()),(0,O.isDefined)(i.password)&&(i.password=String(i.password).trim()),(0,O.isDefined)(i.username)&&""!==i.username&&(0,O.isDefined)(i.password)&&""!==i.password||(0,O.isDefined)(i._socialIdentity)?new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.App,url:b.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/login"}),body:i,properties:o.properties,timeout:o.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(e){return(0,O.isDefined)(i._socialIdentity)&&(0,O.isDefined)(e._socialIdentity)&&(Object.keys(e._socialIdentity).forEach(function(t){e._socialIdentity[t]=(0,c.default)({},i._socialIdentity[t],e._socialIdentity[t])}),e._socialIdentity=(0,c.default)({},i._socialIdentity,e._socialIdentity)),delete e.password,n.client.setActiveUser(e)}).then(function(e){return n.data=e,n}):a.default.reject(new w.KinveyError("Username and/or password missing. Please provide both a username and password to login.")))}},{key:"loginWithMIC",value:function(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.isActive(),u=e.getActiveUser(this.client);return i?a.default.reject(new w.ActiveUserError("This user is already the active user.")):(0,O.isDefined)(u)?a.default.reject(new w.ActiveUserError("An active user already exists. Please logout the active user before you login.")):new E.MobileIdentityConnect({client:this.client}).login(t,r,o).then(function(e){return n.connectIdentity(E.MobileIdentityConnect.identity,e,o)})}},{key:"connectIdentity",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.isActive(),i={},u=i._socialIdentity||{};return u[e]=t,i._socialIdentity=u,o?this.update(i,n):this.login(i,n).catch(function(o){if(o instanceof w.NotFoundError)return r.signup(i,n).then(function(){return r.connectIdentity(e,t,n)});throw o})}},{key:"disconnectIdentity",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.default.resolve();return e===E.MobileIdentityConnect.identity&&(n=E.MobileIdentityConnect.logout(this,r)),n.catch(function(e){O.Log.error(e)}).then(function(){var n=t.data,o=n._socialIdentity||{};return delete o[e],n._socialIdentity=o,t.data=n,t._id?t.update(n,r):t}).then(function(){return t})}},{key:"logout",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.Session,url:b.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/_logout"}),properties:t.properties,timeout:t.timeout,client:this.client}).execute().catch(function(e){return O.Log.error(e),null}).then(function(){return e.client.setActiveUser(null)}).catch(function(e){return O.Log.error(e),null}).then(function(){return _.DataStore.clearCache({client:e.client})}).catch(function(e){return O.Log.error(e),null}).then(function(){return e})}},{key:"signup",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.getActiveUser(this.client);if(n=(0,c.default)({state:!0},n),n.state===!0&&(0,O.isDefined)(o))throw new w.ActiveUserError("An active user already exists. Please logout the active user before you login.");return t instanceof e&&(t=t.data),t=(0,c.default)(this.data,t),new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.App,url:b.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),body:(0,y.default)(t)?null:t,properties:n.properties,timeout:n.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(e){return n.state===!0?r.client.setActiveUser(e):e}).then(function(e){return r.data=e,r})}},{key:"signupWithIdentity",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return n._socialIdentity={},n._socialIdentity[e]=t,this.signup(n,r)}},{key:"update",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(0,c.default)(this.data,e),(new _.UserStore).update(e,r).then(function(e){return t.isActive()?t.client.setActiveUser(e):e}).then(function(e){return t.data=e,t})}},{key:"me",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new g.KinveyRequest({method:g.RequestMethod.GET,authType:g.AuthType.Session,url:b.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/_me"}),properties:t.properties,timeout:t.timeout}).execute().then(function(e){return e.data}).then(function(t){return t=(0,c.default)(e.data,t),delete t.password,e.isActive()?e.client.setActiveUser(t):t}).then(function(t){return e.data=t,e})}},{key:"_id",get:function(){return this.data._id}},{key:"_acl",get:function(){return new j.Acl(this.data)}},{key:"metadata",get:function(){return new k.Metadata(this.data)}},{key:"_kmd",get:function(){return this.metadata}},{key:"_socialIdentity",get:function(){return this.data._socialIdentity}},{key:"authtoken",get:function(){return this.metadata.authtoken}},{key:"username",get:function(){return this.data.username}},{key:"email",get:function(){return this.data.email}},{key:"pathname",get:function(){return"/user/"+this.client.appKey}}],[{key:"login",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},r).login(e,t,r)}},{key:"loginWithMIC",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},r).loginWithMIC(e,t,r)}},{key:"connectIdentity",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},r).connectIdentity(e,t,r)}},{key:"logout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getActiveUser(t.client);return(0,O.isDefined)(r)?r.logout(t):a.default.resolve(null)}},{key:"signup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this({},t).signup(e,t)}},{key:"signupWithIdentity",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new this({},r).signupWithIdentity(e,t,r)}},{key:"update",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getActiveUser(r.client);return(0,O.isDefined)(n)?n.update(t,r):a.default.resolve(null)}},{key:"me",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getActiveUser(t.client);return r?r.me(t):a.default.resolve(null)}},{key:"getActiveUser",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.Client.sharedInstance(),t=e.getActiveUser();return(0,O.isDefined)(t)?new this(t,{client:e}):null}},{key:"verifyEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return a.default.reject(new w.KinveyError("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!(0,l.default)(e))return a.default.reject(new w.KinveyError("The provided username is not a string."));var r=t.client||m.Client.sharedInstance();return new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.App,url:b.default.format({protocol:r.apiProtocol,host:r.apiHost,pathname:"/rpc/"+r.appKey+"/"+e+"/user-email-verification-initiate"}),properties:t.properties,timeout:t.timeout,client:r}).execute().then(function(e){return e.data})}},{key:"forgotUsername",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return a.default.reject(new w.KinveyError("An email was not provided.","Please provide an email for the user that you would like to retrieve their username."));if(!(0,l.default)(e))return a.default.reject(new w.KinveyError("The provided email is not a string."));var r=t.client||m.Client.sharedInstance();return new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.App,url:b.default.format({protocol:r.apiProtocol,host:r.apiHost,pathname:"/rpc/"+r.appKey+"/user-forgot-username"}),properties:t.properties,data:{email:e},timeout:t.timeout,client:r}).execute().then(function(e){return e.data})}},{key:"resetPassword",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return a.default.reject(new w.KinveyError("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!(0,l.default)(e))return a.default.reject(new w.KinveyError("The provided username is not a string."));var r=t.client||m.Client.sharedInstance();return new g.KinveyRequest({method:g.RequestMethod.POST,authType:g.AuthType.App,url:b.default.format({protocol:r.apiProtocol,host:r.apiHost,pathname:"/rpc/"+r.appKey+"/"+e+"/user-password-reset-initiate"}),properties:t.properties,timeout:t.timeout,client:r}).execute().then(function(e){return e.data})}},{key:"lookup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new _.UserStore).lookup(e,t)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new _.UserStore).exists(e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new _.UserStore).removeById(e,t)}},{key:"restore",value:function(){return a.default.reject(new w.KinveyError("This function requires a master secret to be provided for your application. We strongly advise not to do this."))}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(325);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(326);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Kinvey:"kinvey",MobileIdentityConnect:"kinveyAuth"};Object.freeze(r),t.SocialIdentity=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileIdentityConnect=t.AuthorizationGrant=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(47),c=n(s),f=r(131),l=n(f),h=r(67),p=n(h),d=r(327),y=n(d),v=r(143),b=r(2),m=r(40),g=r(328),w=r(330),_=r(325),E=g.CorePopup,O={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};Object.freeze(O),t.AuthorizationGrant=O;t.MobileIdentityConnect=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"isSupported",value:function(){return!0}},{key:"login",value:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.AuthorizationCodeLoginPage,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.client.appKey;return(0,l.default)(o.micId)&&(i=i+":"+o.micId),c.default.resolve().then(function(){if(n===O.AuthorizationCodeLoginPage)return r.requestCodeWithPopup(i,e,o);if(n===O.AuthorizationCodeAPI)return r.requestTempLoginUrl(i,e,o).then(function(t){return r.requestCodeWithUrl(t,i,e,o)});throw new b.KinveyError("The authorization grant "+n+" is unsupported. Please use a supported authorization grant.")}).then(function(t){return r.requestToken(t,i,e,o)}).then(function(n){return n.identity=t.identity,n.client_id=i,n.redirect_uri=e,n.protocol=r.client.micProtocol,n.host=r.client.micHost,n})}},{key:"refresh",value:function(e,r,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c.default.resolve().then(function(){return o.refreshToken(e,r,n,i)}).then(function(e){return e.identity=t.identity,e.client_id=r,e.redirect_uri=n,e.protocol=o.client.micProtocol,e.host=o.client.micHost,e})}},{key:"requestTempLoginUrl",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="/oauth/auth";if(r.version){var o=r.version;(0,l.default)(o)===!1&&(o=String(o)),n=(0,y.default)(0===o.indexOf("v")?o:"v"+o,n)}return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:p.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:n}),properties:r.properties,body:{client_id:e,redirect_uri:t,response_type:"code"}}).execute().then(function(e){return e.data.temp_login_uri})}},{key:"requestCodeWithPopup",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c.default.resolve().then(function(){var o="/oauth/auth",i=new E;if(n.version){var u=n.version;(0,l.default)(u)||(u=String(u)),o=(0,y.default)(0===u.indexOf("v")?u:"v"+u,o)}return i.open(p.default.format({protocol:r.client.micProtocol,host:r.client.micHost,pathname:o,query:{client_id:e,redirect_uri:t,response_type:"code"}}))}).then(function(e){return new c.default(function(r,n){function o(n){try{n.url&&0===n.url.indexOf(t)&&a===!1&&(a=!0,e.removeAllListeners(),e.close(),r(p.default.parse(n.url,!0).query.code))}catch(e){}}function i(o){try{o.url&&0===o.url.indexOf(t)&&a===!1?(a=!0,e.removeAllListeners(),e.close(),r(p.default.parse(o.url,!0).query.code)):a===!1&&(e.removeAllListeners(),e.close(),n(new b.KinveyError(o.message,"",o.code)))}catch(e){}}function u(){a===!1&&(e.removeAllListeners(),n(new b.KinveyError("Login has been cancelled.")))}var a=!1;e.on("loadstart",o),e.on("loadstop",o),e.on("error",i),e.on("exit",u)})})}},{key:"requestCodeWithUrl",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c.default.resolve().then(function(){return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:e,properties:n.properties,body:{client_id:t,redirect_uri:r,response_type:"code",username:n.username,password:n.password},followRedirect:!1}).execute()}).then(function(e){var t=e.headers.get("location");if(t)return p.default.parse(t,!0).query.code;throw new b.MobileIdentityConnectError("Unable to authorize user with username "+n.username+".","A location header was not provided with a code to exchange for an auth token.")})}},{key:"requestToken",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:v.AuthType.App,url:p.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/token"}),properties:n.properties,body:{grant_type:"authorization_code",client_id:t,redirect_uri:r,code:e}}).execute().then(function(e){return e.data})}},{key:"refreshToken",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new v.KinveyRequest({method:v.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:v.AuthType.App,url:p.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/token"}),body:{grant_type:"refresh_token",client_id:t,redirect_uri:r,refresh_token:e},properties:n.properties,timeout:n.timeout}).execute().then(function(e){return e.data})}},{key:"logout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new v.KinveyRequest({method:v.RequestMethod.GET,headers:{
"Content-Type":"application/x-www-form-urlencoded"},authType:v.AuthType.App,url:p.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/invalidate",query:{user:e._id}}),properties:t.properties}).execute().then(function(e){return e.data})}},{key:"identity",get:function(){return _.SocialIdentity.MobileIdentityConnect}}],[{key:"isSupported",value:function(){return!0}},{key:"usePopupClass",value:function(e){(0,m.isDefined)(e)&&(E=e)}},{key:"identity",get:function(){return _.SocialIdentity.MobileIdentityConnect}}]),t}(w.Identity)},function(e,t,r){var n,o;!function(i,u,a){void 0!==e&&e.exports?e.exports=a():(n=a,void 0!==(o="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o))}(0,0,function(){function e(e,t){return e.substr(0,t.length)===t}function t(t,r){return e(t,"file://")?t=t.replace(/(\/{0,3})\/*/g,"$1"):(t=t.replace(/:\//g,"://"),t=t.replace(/([^:\s\%\3\A])\/+/g,"$1/")),t=t.replace(/\/(\?|&|#[^!])/g,"$1"),t=t.replace(/(\?.+)\?/g,"$1&")}return function(){var e=arguments,r={};return"object"==typeof arguments[0]&&(e=arguments[0],r=arguments[1]||{}),t([].slice.call(e,0).join("/"),r)}})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(329),s=r(2);t.Popup=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"open",value:function(){throw new s.PopupError("Unable to open a popup on this platform.")}},{key:"close",value:function(){return this}}],[{key:"isSupported",value:function(){return!1}}]),t}(a.EventEmitter)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,s,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],u(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),c=r.slice(),o=c.length,s=0;s<o;s++)c[s].apply(this,a);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,u,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],u=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=u;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Identity=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(140),u=r(2);t.Identity=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.client=t.client||i.Client.sharedInstance()}return o(e,[{key:"isSupported",value:function(){return!1}},{key:"isOnline",value:function(e){var t=(new Date).getTime()/1e3;return e&&e.access_token&&e.expires>t}},{key:"identity",get:function(){throw new u.KinveyError("A subclass must override this property.")}}],[{key:"isSupported",value:function(){return!1}},{key:"identity",get:function(){throw new u.KinveyError("A subclass must override this property.")}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkStore=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(131),a=n(u),s=r(119),c=n(s),f=r(67),l=n(f),h=r(143),p=r(2),d=r(210),y=r(140),v=r(40),b=r(260);t.NetworkStore=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),t&&!(0,a.default)(t))throw new p.KinveyError("Collection must be a string.");this.collection=t,this.client=r.client,this.useDeltaFetch=r.useDeltaFetch===!0}return i(e,[{key:"find",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useDeltaFetch===!0||this.useDeltaFetch;return v.KinveyObservable.create(function(o){if((0,v.isDefined)(e)&&!(e instanceof d.Query))return o.error(new p.KinveyError("Invalid query. It must be an instance of the Query class."));var i={method:h.RequestMethod.GET,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout,client:t.client},u=new h.KinveyRequest(i);return n===!0&&(u=new h.DeltaFetchRequest(i)),u.execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})})}},{key:"findById",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useDeltaFetch||this.useDeltaFetch;return v.KinveyObservable.create(function(o){if(!e)return o.next(void 0),o.complete();var i={method:h.RequestMethod.GET,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:r.properties,timeout:r.timeout,client:t.client},u=new h.KinveyRequest(i);return n===!0&&(u=new h.DeltaFetchRequest(i)),u.execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})})}},{key:"group",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){return e instanceof b.Aggregation?new h.KinveyRequest({method:h.RequestMethod.POST,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_group"}),properties:r.properties,aggregation:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new p.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){try{if(e&&!(e instanceof d.Query))throw new p.KinveyError("Invalid query. It must be an instance of the Query class.");return new h.KinveyRequest({method:h.RequestMethod.GET,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_count"}),properties:r.properties,query:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e?e.count:0)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}catch(e){return n.error(e)}})}},{key:"create",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){return(0,v.isDefined)(e)===!1?(n.next(null),n.complete()):(0,c.default)(e)?n.error(new p.KinveyError("Unable to create an array of entities.","Please create entities one by one.")):new h.KinveyRequest({method:h.RequestMethod.POST,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,data:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"update",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){return(0,v.isDefined)(e)===!1?(n.next(null),n.complete()):(0,c.default)(e)?n.error(new p.KinveyError("Unable to update an array of entities.","Please update entities one by one.")):(0,v.isDefined)(e._id)===!1?n.error(new p.KinveyError("Unable to update entity.","Entity must contain an _id to be updated.")):new h.KinveyRequest({method:h.RequestMethod.PUT,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,data:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"save",value:function(e,t){return e._id?this.update(e,t):this.create(e,t)}},{key:"remove",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){try{if(e&&!(e instanceof d.Query))throw new p.KinveyError("Invalid query. It must be an instance of the Query class.");return new h.KinveyRequest({method:h.RequestMethod.DELETE,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}catch(e){return n.error(e)}}).toPromise()}},{key:"removeById",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.KinveyObservable.create(function(n){try{if((0,v.isDefined)(e)===!1)return n.next(void 0),n.complete();return new h.KinveyRequest({method:h.RequestMethod.DELETE,authType:h.AuthType.Default,url:l.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}catch(e){return n.error(e)}}).toPromise()}},{key:"subscribe",value:function(e,t,r){return this.liveStream.subscribe(e,t,r)}},{key:"client",get:function(){return(0,v.isDefined)(this._client)?this._client:y.Client.sharedInstance()},set:function(e){e instanceof y.Client?this._client=e:this._client=null}},{key:"pathname",get:function(){var e="/appdata/"+this.client.appKey;return this.collection&&(e=e+"/"+this.collection),e}},{key:"liveStream",get:function(){var e=this;if("undefined"==typeof EventSource)throw new p.KinveyError("Your environment does not support server-sent events.");if(!this._liveStream){var t=new EventSource(""+this.client.liveServiceHostname+this.pathname);this._liveStream=v.KinveyObservable.create(function(e){return t.onopen=function(e){v.Log.info("Subscription to Kinvey Live Service is now open at "+t.url+"."),v.Log.info(e)},t.onmessage=function(t){try{e.next(JSON.parse(t.data))}catch(t){e.error(t)}},t.onerror=function(t){e.error(t)},function(){e.complete()}}).finally(function(){t.close(),delete e._liveStream})}return this._liveStream}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncManager=t.SyncOperation=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(318),c=n(s),f=r(290),l=n(f),h=r(119),p=n(h),d=r(131),y=n(d),v=r(67),b=n(v),m=r(143),g=r(2),w=r(40),_=r(140),E=r(210),O=new Map,j={Create:m.RequestMethod.POST,Update:m.RequestMethod.PUT,Delete:m.RequestMethod.DELETE};Object.freeze(j),t.SyncOperation=j;t.SyncManager=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),!t)throw new g.SyncError("A collection is required.");if(!(0,y.default)(t))throw new g.SyncError("Collection must be a string.");this.collection=t,this.client=r.client||_.Client.sharedInstance()}return i(e,[{key:"find",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,w.isDefined)(e)&&e instanceof E.Query==!1&&(e=new E.Query((0,l.default)(e,"toJSON",e))),new m.CacheRequest({method:m.RequestMethod.GET,url:b.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.backendPathname}),query:e,properties:r.properties,timeout:r.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(n){var o=new E.Query;return o.equalTo("collection",t.collection),(0,w.isDefined)(e)&&o.contains("entityId",(0,c.default)(n,function(e){return e._id})),new m.CacheRequest({method:m.RequestMethod.GET,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:o,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data})})}},{key:"count",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.find(e,t).then(function(e){return e.length})}},{key:"addCreateOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(j.Create,e,t)}},{key:"addUpdateOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(j.Update,e,t)}},{key:"addDeleteOperation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addOperation(j.Delete,e,t)}},{key:"addOperation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.Create,t=this,r=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!1;return(0,p.default)(r)||(o=!0,r=[r]),a.default.all((0,c.default)(r,function(r){if(!r)return a.default.resolve(null);var o=r._id;if(!o)return a.default.reject(new g.SyncError("An entity is missing an _id. All entities must have an _id in order to be added to the sync table.",r));var i=(new E.Query).equalTo("entityId",o);return new m.CacheRequest({method:m.RequestMethod.GET,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,query:i,timeout:n.timeout}).execute().then(function(e){return e.data}).then(function(r){var i=1===r.length?r[0]:{collection:t.collection,state:{},entityId:o};return i.state=i.state||{},i.state.operation=e,new m.CacheRequest({method:m.RequestMethod.PUT,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:n.properties,body:i,timeout:n.timeout}).execute()})})).then(function(){return o===!0?r[0]:r})}},{key:"pull",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e||e instanceof E.Query?this.count(e).then(function(r){return r>0?t.push(e).then(function(){return t.count(e)}):r}).then(function(n){if(n>0)throw new g.SyncError("Unable to pull data from the network. There are "+n+" entities that need to be synced before data is loaded from the network.");var o={method:m.RequestMethod.GET,authType:m.AuthType.Default,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname}),properties:r.properties,query:e,timeout:r.timeout,client:t.client},i=new m.KinveyRequest(o);return r.useDeltaFetch===!0&&(i=new m.DeltaFetchRequest(o)),i.execute()}).then(function(e){return e.data}):a.default.reject(new g.SyncError("Invalid query. It must be an instance of the Query class."))}},{key:"push",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;return O.get(this.collection)===!0?a.default.reject(new g.SyncError("Data is already being pushed to the backend. Please wait for it to complete before pushing new data to the backend.")):(O.set(this.collection,!0),this.find(e).then(function(e){if(e.length>0){return function o(i){return new a.default(function(u){var s=e.slice(n,n+100);return n+=100,a.default.all((0,c.default)(s,function(e){var n=e.entityId,o=e.state,i=void 0===o?{}:o,u=i.operation||i.method;if(u===j.Delete){return new m.KinveyRequest({method:m.RequestMethod.DELETE,authType:m.AuthType.Default,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+n}),properties:r.properties,timeout:r.timeout,client:t.client}).execute().then(function(){return new m.CacheRequest({method:m.RequestMethod.DELETE,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,timeout:r.timeout}).execute()}).then(function(){return{_id:n,operation:u}}).catch(function(e){return{_id:n,operation:u,error:e}})}if(u===j.Create||u===j.Update){var a=!1;return new m.CacheRequest({method:m.RequestMethod.GET,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+n}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(o){var i=new m.KinveyRequest({method:m.RequestMethod.PUT,authType:m.AuthType.Default,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+n}),properties:r.properties,timeout:r.timeout,body:o,client:t.client});return u===j.Create&&((0,w.isDefined)(o._kmd)&&o._kmd.local===!0&&(a=!0,delete o._id),i.method=m.RequestMethod.POST,i.url=b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname})),i.execute().then(function(e){return e.data}).then(function(o){return new m.CacheRequest({method:m.RequestMethod.DELETE,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,timeout:r.timeout}).execute().then(function(){return new m.CacheRequest({method:m.RequestMethod.PUT,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+o._id}),properties:r.properties,timeout:r.timeout,body:o}).execute().then(function(e){return e.data})}).then(function(e){return a?new m.CacheRequest({method:m.RequestMethod.DELETE,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.backendPathname+"/"+n}),properties:r.properties,timeout:r.timeout}).execute().then(function(){return e}):e}).then(function(e){return{_id:n,operation:u,entity:e}})}).catch(function(e){return o._id=n,{_id:n,operation:u,entity:o,error:e}})}).catch(function(e){return{_id:n,operation:u,entity:void 0,error:e}})}return{_id:n,operation:u,entity:void 0,error:new g.SyncError("Unable to sync the entity since the operation was not recognized.",e)}})).then(function(t){return i=i.concat(t),u(n<e.length?o(i):i)})})}([])}return[]}).then(function(e){return O.set(t.collection,!1),e}).catch(function(e){throw O.set(t.collection,!1),e}))}},{key:"clear",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.find(e,r).then(function(e){return a.default.all((0,c.default)(e,function(e){return new m.CacheRequest({method:m.RequestMethod.DELETE,url:b.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e._id}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data})}))})}},{key:"pathname",get:function(){return"/appdata/"+this.client.appKey+"/kinvey_sync"}},{key:"backendPathname",get:function(){return"/appdata/"+this.client.appKey+"/"+this.collection}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.DataStore=t.DataStoreType=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(131),a=n(u),s=r(67),c=n(s),f=r(143),l=r(2),h=r(40),p=r(140),d=r(331),y=r(301),v=r(334),b={Cache:"Cache",Network:"Network",Sync:"Sync"};Object.freeze(b),t.DataStoreType=b;var m=function(){function e(){throw o(this,e),new l.KinveyError("Not allowed to construct a DataStore instance. Please use the collection() function to get an instance of a DataStore instance.")}return i(e,null,[{key:"collection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Cache,r=arguments[2],n=void 0;if((0,h.isDefined)(e)===!1||(0,a.default)(e)===!1)throw new l.KinveyError("A collection is required and must be a string.");switch(t){case b.Network:n=new d.NetworkStore(e,r);break;case b.Sync:n=new v.SyncStore(e,r);break;case b.Cache:default:n=new y.CacheStore(e,r)}return n}},{key:"getInstance",value:function(e,t,r){return this.collection(e,t,r)}},{key:"clearCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client||p.Client.sharedInstance(),r="/appdata/"+t.appKey;return new f.CacheRequest({method:f.RequestMethod.DELETE,url:c.default.format({protocol:t.apiProtocol,host:t.apiHost,pathname:r}),properties:e.properties,timeout:e.timeout}).execute().then(function(e){return e.data})}}]),e}();t.DataStore=m},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStore=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(67),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(143),f=r(2),l=r(210),h=r(260),p=r(40),d=r(301);t.SyncStore=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"find",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.KinveyObservable.create(function(n){return!e||e instanceof l.Query?new c.CacheRequest({method:c.RequestMethod.GET,url:s.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new f.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"findById",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.KinveyObservable.create(function(n){try{if((0,p.isDefined)(e)===!1)return n.next(void 0),n.complete();return new c.CacheRequest({method:c.RequestMethod.GET,url:s.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}catch(e){return n.error(e)}})}},{key:"group",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.KinveyObservable.create(function(n){return e instanceof h.Aggregation?new c.CacheRequest({method:c.RequestMethod.POST,url:s.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_group"}),properties:r.properties,aggregation:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new f.KinveyError("Invalid aggregation. It must be an instance of the Aggregation class."))})}},{key:"count",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.KinveyObservable.create(function(n){try{if(e&&!(e instanceof l.Query))throw new f.KinveyError("Invalid query. It must be an instance of the Query class.");return new c.CacheRequest({method:c.RequestMethod.GET,url:s.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname}),properties:r.properties,query:e,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e?e.length:0)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}catch(e){return n.error(e)}})}},{key:"syncAutomatically",get:function(){return!1}}]),t}(d.CacheStore)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return Math.floor(Math.random()*(t-e))+e}function s(e,t){var r=e?parseInt(e.split("-")[1],10)+1:0;return r>=t?t-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.FileStore=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(47),l=n(f),h=r(318),p=n(h),d=r(79),y=n(d),v=r(85),b=n(v),m=r(142),g=n(m),w=r(67),_=n(w),E=r(143),O=r(2),j=r(40),k=r(210),P=r(331);t.FileStore=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"find",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,y.default)({tls:!0},r);var n={tls:r.tls===!0};return(0,g.default)(r.ttl)&&(n.ttl_in_seconds=parseInt(r.ttl,10)),j.KinveyObservable.create(function(o){return!(0,j.isDefined)(e)||e instanceof k.Query?new E.KinveyRequest({method:E.RequestMethod.GET,authType:E.AuthType.Default,url:_.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname,query:n}),properties:r.properties,query:e,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)}):o.error(new O.KinveyError("Invalid query. It must be an instance of the Query class."))}).toPromise().then(function(e){return r.download===!0?l.default.all((0,p.default)(e,function(e){return t.downloadByUrl(e._downloadURL,r)})):e})}},{key:"findById",value:function(e,t){return this.download(e,t)}},{key:"download",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=(0,y.default)({tls:!0},r);var n={tls:r.tls===!0};return(0,g.default)(r.ttl)&&(n.ttl_in_seconds=parseInt(r.ttl,10)),j.KinveyObservable.create(function(o){return(0,j.isDefined)(e)===!1?(o.next(void 0),o.complete()):new E.KinveyRequest({method:E.RequestMethod.GET,authType:E.AuthType.Default,url:_.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e,query:n}),properties:r.properties,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){
return o.next(e)}).then(function(){return o.complete()}).catch(function(e){return o.error(e)})}).toPromise().then(function(e){return r.stream===!0?e:(r.mimeType=e.mimeType,t.downloadByUrl(e._downloadURL,r))})}},{key:"downloadByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new E.NetworkRequest({method:E.RequestMethod.GET,url:e,timeout:t.timeout}).execute().then(function(e){return e.data})}},{key:"stream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.stream=!0,this.download(e,t)}},{key:"upload",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=this.transformMetadata(e,r);var o=null;return this.saveFileMetadata(n,r).then(function(e){return o=e.data,t.makeStatusCheckRequest(e.data._uploadURL,e.data._requiredHeaders,r,n.timeout)}).then(function(i){if(j.Log.debug("File upload status check response",i),!i.isSuccess())return l.default.reject(i.error);if(200===i.statusCode||201===i.statusCode)return i;if(308!==i.statusCode){var u=new O.KinveyError("Unexpected response for upload file status check request.",!1,i.statusCode,i.headers.get("X-Kinvey-Request-ID"));return l.default.reject(u)}var a={start:s(i.headers.get("range"),r.size),timeout:n.timeout,maxBackoff:n.maxBackoff,headers:o._requiredHeaders};return t.retriableUpload(o._uploadURL,e,r,a)}).then(function(){return delete o._expiresAt,delete o._requiredHeaders,delete o._uploadURL,o._data=e,o})}},{key:"transformMetadata",value:function(e,t){var r=(0,y.default)({filename:e._filename||e.name,public:!1,size:e.size||e.length,mimeType:e.mimeType||e.type||"application/octet-stream"},t);return r._filename=t.filename,delete r.filename,r._public=t.public,delete r.public,r}},{key:"saveFileMetadata",value:function(e,t){var r=(0,j.isDefined)(t._id);return new E.KinveyRequest({method:r?E.RequestMethod.PUT:E.RequestMethod.POST,authType:E.AuthType.Default,headers:{"X-Kinvey-Content-Type":t.mimeType},url:_.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:r?this.pathname+"/"+t._id:this.pathname}),properties:e.properties,timeout:e.timeout,body:t,client:this.client}).execute()}},{key:"makeStatusCheckRequest",value:function(e,t,r,n){var o=new E.Headers(t);return o.set("content-type",r.mimeType),o.set("content-range","bytes */"+r.size),new E.NetworkRequest({method:E.RequestMethod.PUT,url:e,timeout:n,headers:o}).execute()}},{key:"retriableUpload",value:function(e,t,r,n){var o=this;return n=(0,y.default)({count:0,start:0,maxBackoff:32e3},n),j.Log.debug("Start file upload"),j.Log.debug("File upload headers",n.headers),j.Log.debug("File upload upload url",_.default),j.Log.debug("File upload file",t),j.Log.debug("File upload metadata",r),j.Log.debug("File upload options",n),this.makeUploadRequest(e,t,r,n).then(function(e){if(j.Log.debug("File upload response",e),e.isClientError())return l.default.reject(e.error);if(!e.isSuccess()&&!e.isServerError()&&308!==e.statusCode){var t=new O.KinveyError("Unexpected response for upload file request.",!1,e.statusCode,e.headers.get("X-Kinvey-Request-ID"));return l.default.reject(t)}return e}).then(function(e){var t=0;return e.isServerError()?(j.Log.debug("File upload server error. Probably network congestion.",e.statusCode,e.data),(t=Math.pow(2,n.count)+a(1,1001))>=n.maxBackoff?l.default.reject(e.error):(j.Log.debug("File upload will try again in "+t+" seconds."),new l.default(function(e){setTimeout(function(){n.count+=1,e(!0)},t)}))):308===e.statusCode?(j.Log.debug("File upload was incomplete (statusCode 308). Trying to upload the remainder of file."),n.start=s(e.headers.get("range"),r.size),new l.default(function(e){setTimeout(function(){n.count=0,e(!0)},t)})):new l.default(function(e){setTimeout(function(){e(!1)},t)})}).then(function(i){return i?o.retriableUpload(e,t,r,n):null})}},{key:"makeUploadRequest",value:function(e,t,r,n){var o=new E.Headers(n.headers);return o.set("content-type",r.mimeType),o.set("content-range","bytes "+n.start+"-"+(r.size-1)+"/"+r.size),new E.NetworkRequest({method:E.RequestMethod.PUT,url:e,headers:o,body:(0,b.default)(t.slice)?t.slice(n.start):t,timeout:n.timeout}).execute()}},{key:"create",value:function(e,t,r){return this.upload(e,t,r)}},{key:"update",value:function(e,t,r){return this.upload(e,t,r)}},{key:"remove",value:function(){throw new O.KinveyError("Please use removeById() to remove files one by one.")}},{key:"pathname",get:function(){return"/blob/"+this.client.appKey}}]),t}(P.NetworkStore)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(47),f=n(c),l=r(119),h=n(l),p=r(131),d=n(p),y=r(67),v=n(y),b=r(143),m=r(2),g=r(40),w=r(210),_=r(331);t.UserStore=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e))}return u(t,e),a(t,[{key:"lookup",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.KinveyObservable.create(function(n){return!(0,g.isDefined)(e)||e instanceof w.Query?new b.KinveyRequest({method:b.RequestMethod.POST,authType:b.AuthType.Default,url:v.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/_lookup"}),properties:r.properties,body:(0,g.isDefined)(e)?e.toPlainObject().filter:null,timeout:r.timeout,client:t.client}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)}):n.error(new m.KinveyError("Invalid query. It must be an instance of the Query class."))})}},{key:"create",value:function(){return f.default.reject(new m.KinveyError("Please use `User.signup()` to create a user."))}},{key:"update",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(0,h.default)(e)?f.default.reject(new m.KinveyError("Only one user can be updated at one time.",e)):e._id?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,r):f.default.reject(new m.KinveyError("User must have an _id.")):f.default.reject(new m.KinveyError("No user was provided to be updated."))}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new b.KinveyRequest({method:b.RequestMethod.POST,authType:b.AuthType.App,url:v.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:"/rpc/"+this.client.appKey+"/check-username-exists"}),properties:t.properties,data:{username:e},timeout:t.timeout,client:this.client}).execute().then(function(e){return e.data}).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).usernameExists===!0})}},{key:"removeById",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.KinveyObservable.create(function(n){return(0,g.isDefined)(e)===!1?n.error(new m.KinveyError("An id was not provided.","Please provide a valid id for a user that you would like to remove.")):(0,d.default)(e)===!1?n.error(new m.KinveyError("The id provided is not a string.","Please provide a valid id for a user that you would like to remove.")):new b.KinveyRequest({method:b.RequestMethod.DELETE,authType:b.AuthType.Default,url:v.default.format({protocol:t.client.apiProtocol,host:t.client.apiHost,pathname:t.pathname+"/"+e,query:r.hard===!0?{hard:!0}:void 0}),properties:r.properties,timeout:r.timeout}).execute().then(function(e){return e.data}).then(function(e){return n.next(e)}).then(function(){return n.complete()}).catch(function(e){return n.error(e)})}).toPromise()}},{key:"pathname",get:function(){return"/user/"+this.client.appKey}}]),t}(_.NetworkStore)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Kinvey=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2),u=r(40),a=r(143),s=r(140);t.Kinvey=function(){function e(){n(this,e)}return o(e,null,[{key:"initialize",value:function(){throw new i.KinveyError("Please use Kinvey.init().")}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,u.isDefined)(e.appKey)===!1)throw new i.KinveyError("No App Key was provided. Unable to create a new Client without an App Key.");if((0,u.isDefined)(e.appSecret)===!1&&(0,u.isDefined)(e.masterSecret)===!1)throw new i.KinveyError("No App Secret or Master Secret was provided. Unable to create a new Client without an App Key.");return s.Client.init(e)}},{key:"ping",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.Client.sharedInstance();return new a.KinveyRequest({method:a.RequestMethod.GET,authType:a.AuthType.All,url:this.client.apiHostname+"/appdata/"+e.appKey}).execute().then(function(e){return e.data})}},{key:"client",get:function(){return s.Client.sharedInstance()}},{key:"appVersion",get:function(){return this.client.appVersion},set:function(e){this.client.appVersion=e}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},s=r(47),c=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(339),l=r(340);t.User=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"loginWithMIC",value:function(e,t,r){var n=this;if(this.isActive())throw new f.ActiveUserError("This user is already the active user.");if((0,f.isDefined)(this.client.activeUser))throw new f.ActiveUserError("An active user already exists. Please logout the active user before you login.");return new l.MobileIdentityConnect({client:this.client}).login(e,t,r).then(function(e){return n.connectIdentity(l.MobileIdentityConnect.identity,e,r)})}},{key:"disconnectIdentity",value:function(e,r){var n=this,o=c.default.resolve();return e===l.MobileIdentityConnect.identity&&(o=l.MobileIdentityConnect.logout(this,r)),o.then(function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disconnectIdentity",n).call(n,e,r)})}}],[{key:"loginWithMIC",value:function(e,r,n){return new t({},n).loginWithMIC(e,r,n)}}]),t}(f.User)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(300);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(320);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(2);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(324);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(143);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var s=r(40);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=r(260);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var f=r(140);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var l=r(139);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var h=r(337);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})});var p=r(210);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MobileIdentityConnect=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(47),c=r(339),f=r(131),l=n(f),h=r(67),p=n(h),d=r(327),y=n(d),v=r(341);t.MobileIdentityConnect=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"requestCodeWithPopup",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.Promise.resolve().then(function(){var o="/oauth/auth",i=new v.Popup;if(n.version){var u=n.version;(0,l.default)(u)||(u=String(u)),o=(0,y.default)(0===u.indexOf("v")?u:"v"+u,o)}return i.open(p.default.format({protocol:r.client.micProtocol,host:r.client.micHost,pathname:o,query:{client_id:e,redirect_uri:t,response_type:"code"}}))}).then(function(e){return new s.Promise(function(r,n){function o(n){try{n.url&&0===n.url.indexOf(t)&&u===!1&&(u=!0,e.close(),r(p.default.parse(n.url,!0).query.code))}catch(e){}}function i(){u===!1&&n(new c.KinveyError("Login has been cancelled."))}var u=!1;e.on("urlchange",o),e.on("exit",i)})})}}]),t}(c.MobileIdentityConnect)},function(e,t,r){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(329),s=r(339);t.Popup=function(t){function r(){return n(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),u(r,[{key:"open",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";if(this.popupWindow=e.open(r,"_blank","toolbar=no,location=no"),!(0,s.isDefined)(this.popupWindow))throw new Error("The popup was blocked.");var n=setInterval(function(){if(t.popupWindow.closed)clearInterval(n),t.close(),t.emit("exit");else try{t.emit("urlchange",{url:t.popupWindow.location.href})}catch(e){}},100);return this}},{key:"close",value:function(){return this.popupWindow&&(this.popupWindow.close(),this.popupWindow=null),this}}]),r}(a.EventEmitter)}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Kinvey=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=r(339),c=r(343);t.Kinvey=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,null,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.isDefined)(e.appKey)===!1)throw new s.KinveyError("No App Key was provided. Unable to initialize the SDK without an App Key.");if((0,s.isDefined)(e.appSecret)===!1)throw new s.KinveyError("No App Secret was provided. Unable to initialize the SDK without an App Secret.");return c.Client.init(e)}},{key:"initialize",value:function(e){var r=t.init(e);return a.Promise.resolve(r.getActiveUser())}}]),t}(s.Kinvey)},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(344),c=function(e){return e&&e.__esModule?e:{default:e}}(s),f=r(339),l=r(349),h=function(){function e(){i(this,e)}return a(e,[{key:"get",value:function(e){try{return JSON.parse(c.default.getItem(e))}catch(e){return null}}},{key:"set",value:function(e,t){return(0,f.isDefined)(t)?c.default.setItem(e,JSON.stringify(t)):c.default.removeItem(e),t}}]),e}();t.Client=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"init",value:function(e){f.CacheRack.useCacheMiddleware(new l.CacheMiddleware),f.NetworkRack.useHttpMiddleware(new l.HttpMiddleware);var r=u(t.__proto__||Object.getPrototypeOf(t),"init",this).call(this,e);return r.activeUserStorage=new h,r}}]),t}(f.Client)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var o=r(345),i=n(o),u=r(346),a=n(u),s=r(348),c=n(s),f=null;(0,i.default)("localStorage")?t.storage=f=window.localStorage:(0,i.default)("sessionStorage")?t.storage=f=window.sessionStorage:(0,i.default)("cookieStorage")?t.storage=f=new a.default:t.storage=f=new c.default,t.default=f,t.storage=f,t.isSupported=i.default,t.CookieStorage=a.default,t.MemoryStorage=c.default},function(e,t,r){"use strict";function n(e){try{var t=window[e];return t.setItem(u,"1"),t.removeItem(u),!0}catch(e){return!1}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(346),u="__test"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=new c;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=o;var u=r(347),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s="lS_",c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.cookieOptions=Object.assign({path:"/"},t),s=t.prefix||s}return i(e,[{key:"getItem",value:function(e){var t=a.default.parse(document.cookie);return t&&t.hasOwnProperty(s+e)?t[s+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=a.default.serialize(s+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=a.default.serialize(s+e,"",t),null}},{key:"clear",value:function(){var e=a.default.parse(document.cookie);for(var t in e)0===t.indexOf(s)&&this.removeItem(t.substr(s.length));return null}}]),e}();t.default=c},function(e,t){"use strict";function r(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},u=e.split(a),s=n.decode||i,c=0;c<u.length;c++){var f=u[c],l=f.indexOf("=");if(!(l<0)){var h=f.substr(0,l).trim(),p=f.substr(++l,f.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==r[h]&&(r[h]=o(p,s))}}return r}function n(e,t,r){var n=r||{},o=n.encode||u;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!s.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(c)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return a}function o(e,t){try{return t(e)}catch(t){return e}}t.parse=r,t.serialize=n;var i=decodeURIComponent,u=encodeURIComponent,a=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){r(this,e),this._data={}}return n(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(350);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(360);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CacheMiddleware=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(339),s=r(351);t.CacheMiddleware=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"loadStorage",value:function(e){return new s.Storage(e)}}]),t}(a.CacheMiddleware)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},s=r(339),c=r(352),f=r(353),l=r(354);t.Storage=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"loadAdapter",value:function(){var e=this;return f.WebSQLAdapter.load(this.name).then(function(t){return(0,s.isDefined)(t)===!1?c.IndexedDBAdapter.load(e.name):t}).then(function(t){return(0,s.isDefined)(t)===!1?l.LocalStorageAdapter.load(e.name):t}).then(function(r){return(0,s.isDefined)(r)===!1?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadAdapter",e).call(e):r})}}]),t}(s.Storage)},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBAdapter=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(47),a=n(u),s=r(339),c=r(214),f=n(c),l=r(131),h=n(l),p=r(119),d=n(p),y=r(85),v=n(y),b={},m=void 0,g={ReadWrite:"readwrite",ReadOnly:"readonly"};Object.freeze(g);t.IndexedDBAdapter=function(){function t(e){if(o(this,t),(0,s.isDefined)(e)===!1)throw new Error("A name is required to use the IndexedDB adapter.",e);if((0,h.default)(e)===!1)throw new Error("The name must be a string to use the IndexedDB adapter",e);this.name=e,this.inTransaction=!1,this.queue=[]}return i(t,[{key:"openTransaction",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],o=this,i=arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,c=b[this.name];if((0,s.isDefined)(c)){if((0,v.default)(c.objectStoreNames.contains)?c.objectStoreNames.contains(t):c.objectStoreNames.indexOf(t)!==-1)try{var l=r?g.ReadWrite:g.ReadOnly,h=c.transaction(t,l);if((0,s.isDefined)(h))return n(h);throw new s.KinveyError("Unable to open a transaction for "+t+" collection on the "+this.name+" IndexedDB database.")}catch(e){return i(e)}else if(r===!1)return i(new s.NotFoundError("The "+t+" collection was not found on the "+this.name+" IndexedDB database."))}if(u===!1&&this.inTransaction)return this.queue.push(function(){o.openTransaction(t,r,n,i)});this.inTransaction=!0;var p=void 0;try{if((0,s.isDefined)(c)){var d=c.version+1;c.close(),p=a.open(this.name,d)}else p=a.open(this.name)}catch(e){i(e)}return p.onupgradeneeded=function(e){c=e.target.result,b[o.name]=c,r===!0&&c.createObjectStore(t,{
keyPath:"_id"})},p.onsuccess=function(e){c=e.target.result,b[o.name]=c,c.onversionchange=function(){(0,s.isDefined)(c)&&(c.close(),c=null,b[o.name]=null)};var u=function(e){return function(t){if(e(t),o.inTransaction=!1,o.queue.length>0){var r=o.queue;o.queue=[],(0,f.default)(r,function(e){e.call(o)})}}};return o.openTransaction(t,r,u(n),u(i),!0)},p.onblocked=function(){},p.onerror=function(e){i(new Error("Unable to open the "+o.name+" IndexedDB database. "+e.target.error.message+"."))},p}},{key:"close",value:function(){var e=b[this.name];(0,s.isDefined)(e)&&e.close()}},{key:"find",value:function(e){var t=this;return new a.default(function(r,n){t.openTransaction(e,!1,function(t){var o=t.objectStore(e),i=o.openCursor(),u=[];i.onsuccess=function(e){var t=e.target.result;return(0,s.isDefined)(t)?(u.push(t.value),t.continue()):r(u)},i.onerror=function(e){n(e)}},n)})}},{key:"findById",value:function(e,t){var r=this;return new a.default(function(n,o){r.openTransaction(e,!1,function(i){var u=i.objectStore(e),a=u.get(t);a.onsuccess=function(i){var u=i.target.result;(0,s.isDefined)(u)?n(u):o(new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" IndexedDB database."))},a.onerror=function(){o(new s.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" IndexedDB database."))}},o)})}},{key:"save",value:function(e,t){var r=this,n=!1;return(0,d.default)(t)||(n=!0,t=[t]),0===t.length?a.default.resolve(null):new a.default(function(o,i){r.openTransaction(e,!0,function(u){var a=u.objectStore(e);(0,f.default)(t,function(e){a.put(e)}),u.oncomplete=function(){o(n?t[0]:t)},u.onerror=function(t){i(new s.KinveyError("An error occurred while saving the entities to the "+e+" collection on the "+r.name+" IndexedDB database. "+t.target.error.message+"."))}},i)})}},{key:"removeById",value:function(e,t){var r=this;return new a.default(function(n,o){r.openTransaction(e,!0,function(i){var u=i.objectStore(e),a=u.get(t);u.delete(t),i.oncomplete=function(){var i=a.result;(0,s.isDefined)(i)?n({count:1}):o(new s.NotFoundError("An entity with id = "+t+" was not found in the "+e+" collection on the "+r.name+" IndexedDB database."))},i.onerror=function(){o(new s.NotFoundError("An entity with id = "+t+" was not found in the "+e+" collection on the "+r.name+" IndexedDB database."))}},o)})}},{key:"clear",value:function(){var t=this;return this.close(),new a.default(function(r,n){var o=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,i=o.deleteDatabase(t.name);i.onsuccess=function(){b={},r()},i.onerror=function(e){n(new s.KinveyError("An error occurred while clearing the "+t.name+" IndexedDB database. "+e.target.error.message+"."))},i.onblocked=function(){n(new s.KinveyError("The "+t.name+" IndexedDB database could not be cleared due to the operation being blocked."))}})}}],[{key:"load",value:function(r){var n=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,o=new t(r);return(0,s.isDefined)(n)===!1?a.default.resolve(void 0):(0,s.isDefined)(m)?m?a.default.resolve(o):a.default.resolve(void 0):o.save("__testSupport",{_id:"1"}).then(function(){return m=!0,o}).catch(function(){m=!1})}}]),t}()}).call(t,function(){return this}())},function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WebSQLAdapter=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(47),s=o(a),c=r(339),f=r(318),l=o(f),h=r(214),p=o(h),d=r(119),y=o(d),v=r(85),b=o(v),m=r(131),g=o(m),w=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",_={},E=void 0;t.WebSQLAdapter=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kinvey";if(i(this,e),(0,c.isDefined)(t)===!1)throw new c.KinveyError("A name is required to use the WebSQL adapter.",t);if((0,g.default)(t)===!1)throw new c.KinveyError("The name must be a string to use the WebSQL adapter",t);this.name=t}return u(e,[{key:"openTransaction",value:function(e,t,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=_[this.name],a='"'+e+'"',f="sqlite_master"===e,l=(0,y.default)(t);return t=l?t:[[t,r]],new s.default(function(r,s){try{(0,c.isDefined)(u)===!1&&(u=n.openDatabase(o.name,1,"Kinvey Cache",5e6),_[o.name]=u);u[i||(0,b.default)(u.readTransaction)===!1?"transaction":"readTransaction"](function(e){i&&f===!1&&e.executeSql("CREATE TABLE IF NOT EXISTS "+a+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");var n=t.length,o=[];0===n?r(l?o:o.shift()):(0,p.default)(t,function(t){var i=t[0].replace("#{collection}",a);e.executeSql(i,t[1],function(e,t){var i={rowCount:t.rowsAffected,result:[]};if(t.rows.length>0)for(var u=0,a=t.rows.length;u<a;u+=1)try{var s=t.rows.item(u).value,c=f?s:JSON.parse(s);i.result.push(c)}catch(e){}o.push(i),0===(n-=1)&&r(l?o:o.shift())})})},function(t){if((t=(0,g.default)(t)?t:t.message)&&t.indexOf("no such table")===-1)return s(new c.NotFoundError("The "+e+" collection was not found on the "+o.name+" WebSQL database."));var r=["table",e];return o.openTransaction("sqlite_master","SELECT name AS value from #{collection} WHERE type = ? AND name = ?",r).then(function(t){return s(0===t.result.length?new c.NotFoundError("The "+e+" collection was not found on the "+o.name+" WebSQL database."):new c.KinveyError("Unable to open a transaction for the "+e+" collection on the "+o.name+" WebSQL database."))}).catch(function(e){s(e)})})}catch(e){s(e)}})}},{key:"find",value:function(e){return this.openTransaction(e,"SELECT value FROM #{collection}",[]).then(function(e){return e.result})}},{key:"findById",value:function(e,t){var r=this;return this.openTransaction(e,"SELECT value FROM #{collection} WHERE key = ?",[t]).then(function(e){return e.result}).then(function(n){if(0===n.length)throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" WebSQL database.");return n[0]})}},{key:"save",value:function(e,t){var r=[],n=!1;return(0,y.default)(t)||(n=!0,t=[t]),0===t.length?s.default.resolve(null):(t=(0,l.default)(t,function(e){return r.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e[w],JSON.stringify(e)]]),e}),this.openTransaction(e,r,null,!0).then(function(){return n?t[0]:t}))}},{key:"removeById",value:function(e,t){var r=this,n=[["SELECT value FROM #{collection} WHERE key = ?",[t]],["DELETE FROM #{collection} WHERE key = ?",[t]]];return this.openTransaction(e,n,null,!0).then(function(n){var o=n[0].result,i=n[1].rowCount;if(0===(i=i||o.length))throw new c.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" WebSQL database.");return{count:i}})}},{key:"clear",value:function(){var e=this;return this.openTransaction("sqlite_master","SELECT name AS value FROM #{collection} WHERE type = ?",["table"],!1).then(function(e){return e.result}).then(function(t){if(0===t.length)return null;var r=t.filter(function(e){return/^[a-zA-Z0-9-]{1,128}/.test(e)}).map(function(e){return["DROP TABLE IF EXISTS '"+e+"'"]});return e.openTransaction("sqlite_master",r,null,!0)}).then(function(){return _={},null})}}],[{key:"load",value:function(t){var r=new e(t);return(0,c.isDefined)(n.openDatabase)===!1?s.default.resolve(void 0):(0,c.isDefined)(E)?E===!0?s.default.resolve(r):s.default.resolve(void 0):r.save("__testSupport",{_id:"1"}).then(function(){return E=!0,r}).catch(function(){E=!1})}}]),e}()}).call(t,r(48),function(){return this}())},function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CookieStorageAdapter=t.SessionStorageAdapter=t.LocalStorageAdapter=t.WebStorageAdapter=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(47),f=o(c),l=r(339),h=r(275),p=o(h),d=r(355),y=o(d),v=r(267),b=o(v),m=r(214),g=o(m),w=r(281),_=o(w),E=r(279),O=o(E),j=e&&e.env&&e.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",k=t.WebStorageAdapter=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kinvey";a(this,e),this.name=t}return s(e,[{key:"masterCollectionName",get:function(){return this.name+"master"}}]),e}();t.LocalStorageAdapter=function(e){function t(e){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.localStorage.getItem(r.masterCollectionName);return(0,l.isDefined)(o)===!1&&n.localStorage.setItem(r.masterCollectionName,JSON.stringify([])),r}return u(t,e),s(t,[{key:"_find",value:function(e){try{var t=n.localStorage.getItem(e);return(0,l.isDefined)(t)?f.default.resolve(JSON.parse(t)):f.default.resolve(t||[])}catch(e){return f.default.reject(e)}}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,O.default)(n,function(e){return e[j]===t});if((0,l.isDefined)(o)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var r=this;return this._find(this.masterCollectionName).then(function(t){return(0,_.default)(t,e)===-1&&(t.push(e),n.localStorage.setItem(r.masterCollectionName,JSON.stringify(t))),r.find(e)}).then(function(o){var i=(0,p.default)(o,j),u=(0,p.default)(t,j),a=Object.keys(i);return(0,g.default)(a,function(e){var t=i[e],r=u[e];(0,l.isDefined)(r)&&(u[e]=(0,y.default)(t,r))}),n.localStorage.setItem(""+r.name+e,JSON.stringify((0,b.default)(u))),t})}},{key:"removeById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,p.default)(n,j),i=o[t];if((0,l.isDefined)(i)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" memory database.");return delete o[t],r.save(e,(0,b.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){return(0,g.default)(t,function(t){n.localStorage.removeItem(""+e.name+t)}),n.localStorage.removeItem(e.masterCollectionName),null})}}],[{key:"load",value:function(e){if((0,l.isDefined)(n.localStorage)){var r="__testSupport";try{return n.localStorage.setItem(r,r),n.localStorage.getItem(r),n.localStorage.removeItem(r),f.default.resolve(new t(e))}catch(e){return f.default.resolve(void 0)}}return f.default.resolve(void 0)}}]),t}(k),t.SessionStorageAdapter=function(e){function t(e){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=n.localStorage.getItem(r.masterCollectionName);return(0,l.isDefined)(o)===!1&&n.localStorage.setItem(r.masterCollectionName,JSON.stringify([])),r}return u(t,e),s(t,[{key:"_find",value:function(e){try{var t=n.localStorage.getItem(e);return(0,l.isDefined)(t)?f.default.resolve(JSON.parse(t)):f.default.resolve(t||[])}catch(e){return f.default.reject(e)}}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,O.default)(n,function(e){return e[j]===t});if((0,l.isDefined)(o)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var r=this;return this._find(this.masterCollectionName).then(function(t){return(0,_.default)(t,e)===-1&&(t.push(e),n.sessionStorage.setItem(r.masterCollectionName,JSON.stringify(t))),r.find(e)}).then(function(o){var i=(0,p.default)(o,j),u=(0,p.default)(t,j),a=Object.keys(i);return(0,g.default)(a,function(e){var t=i[e],r=u[e];(0,l.isDefined)(r)&&(u[e]=(0,y.default)(t,r))}),n.sessionStorage.setItem(""+r.name+e,JSON.stringify((0,b.default)(u))),t})}},{key:"removeById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,p.default)(n,j),i=o[t];if((0,l.isDefined)(i)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" memory database.");return delete o[t],r.save(e,(0,b.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){return(0,g.default)(t,function(t){n.sessionStorage.removeItem(""+e.name+t)}),n.sessionStorage.removeItem(e.masterCollectionName),null})}}],[{key:"load",value:function(e){if(n.sessionStorage){var r="__testSupport";try{return n.sessionStorage.setItem(r,r),n.sessionStorage.getItem(r),n.sessionStorage.removeItem(r),f.default.resolve(new t(e))}catch(e){return f.default.resolve(void 0)}}return f.default.resolve(void 0)}}]),t}(k),t.CookieStorageAdapter=function(e){function t(e){a(this,t);for(var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=document.cookie.split(";"),u=0,s=o.length;u<s;u+=1){for(var c=o[u];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(r.masterCollectionName)){var f=decodeURIComponent(c.substring(r.masterCollectionName.length,c.length));if((0,l.isDefined)(f)===!1){var h=new Date;h.setTime(h.getTime()+31536e8),n.document.cookie=r.masterCollectionName+"="+encodeURIComponent(JSON.stringify([]))+"; expires="+h.toUTCString()+"; path=/"}}}return r}return u(t,e),s(t,[{key:"_find",value:function(e){for(var t=document.cookie.split(";"),r=0,n=t.length;r<n;r+=1){for(var o=t[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return f.default.resolve(JSON.parse(decodeURIComponent(o.substring(e.length,o.length))))}return f.default.resolve([])}},{key:"find",value:function(e){return this._find(""+this.name+e)}},{key:"findById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,O.default)(n,function(e){return e[j]===t});if((0,l.isDefined)(o)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" localstorage database.");return o})}},{key:"save",value:function(e,t){var r=this;return this._find(this.masterCollectionName).then(function(t){if((0,_.default)(t,e)===-1){t.push(e);var o=new Date;o.setTime(o.getTime()+31536e8),n.document.cookie=r.masterCollectionName+"="+encodeURIComponent(JSON.stringify(t))+"; expires="+o.toUTCString()+"; path=/"}return r.find(e)}).then(function(o){var i=(0,p.default)(o,j),u=(0,p.default)(t,j),a=Object.keys(i);(0,g.default)(a,function(e){var t=i[e],r=u[e];(0,l.isDefined)(r)&&(u[e]=(0,y.default)(t,r))});var s=new Date;return s.setTime(s.getTime()+31536e8),n.document.cookie=""+r.name+e+"="+encodeURIComponent(JSON.stringify((0,b.default)(u)))+"; expires="+s.toUTCString()+"; path=/",t})}},{key:"removeById",value:function(e,t){var r=this;return this.find(e).then(function(n){var o=(0,p.default)(n,j),i=o[t];if((0,l.isDefined)(i)===!1)throw new l.NotFoundError("An entity with _id = "+t+" was not found in the "+e+" collection on the "+r.name+" memory database.");return delete o[t],r.save(e,(0,b.default)(o)).then(function(){return{count:1}})})}},{key:"clear",value:function(){var e=this;return this._find(this.masterCollectionName).then(function(t){(0,g.default)(t,function(t){var r=new Date;r.setTime(r.getTime()+31536e8),n.document.cookie=""+e.name+t+"="+encodeURIComponent()+"; expires="+r.toUTCString()+"; path=/"});var r=new Date;return r.setTime(r.getTime()+31536e8),n.document.cookie=e.masterCollectionName+"="+encodeURIComponent()+"; expires="+r.toUTCString()+"; path=/",null})}}],[{key:"load",value:function(e){return void 0===n.document.cookie?f.default.resolve(void 0):f.default.resolve(new t(e))}}]),t}(k)}).call(t,r(48),function(){return this}())},function(e,t,r){var n=r(356),o=r(99),i=o(function(e,t,r){n(e,t,r)});e.exports=i},function(e,t,r){function n(e,t,r,f,l){e!==t&&u(t,function(u,c){if(s(u))l||(l=new o),a(e,t,c,r,n,f,l);else{var h=f?f(e[c],u,c+"",e,t,l):void 0;void 0===h&&(h=u),i(e,c,h)}},c)}var o=r(147),i=r(357),u=r(217),a=r(358),s=r(92),c=r(178);e.exports=n},function(e,t,r){function n(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||o(e,t,r)}var o=r(81),i=r(97);e.exports=n},function(e,t,r){function n(e,t,r,n,m,g,w){var _=e[r],E=t[r],O=w.get(E);if(O)return void o(e,r,O);var j=g?g(_,E,r+"",e,t,w):void 0,k=void 0===j;if(k){var P=f(E),x=!P&&h(E),S=!P&&!x&&v(E);j=E,P||x||S?f(_)?j=_:l(_)?j=a(_):x?(k=!1,j=i(E,!0)):S?(k=!1,j=u(E,!0)):j=[]:y(E)||c(E)?(j=_,c(_)?j=b(_):(!d(_)||n&&p(_))&&(j=s(E))):k=!1}k&&(w.set(E,j),m(j,E,n,g,w),w.delete(E)),o(e,r,j)}var o=r(357),i=r(181),u=r(207),a=r(182),s=r(208),c=r(116),f=r(119),l=r(311),h=r(120),p=r(85),d=r(92),y=r(129),v=r(122),b=r(359);e.exports=n},function(e,t,r){function n(e){return o(e,i(e))}var o=r(98),i=r(178);e.exports=n},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){e=e.toLowerCase();var t=/(chrome)\/([\w]+)/,r=/(firefox)\/([\w.]+)/,n=/(msie) ([\w.]+)/i,o=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(safari)\/([\w.]+)/;return t.exec(e)||r.exec(e)||n.exec(e)||o.exec(e)||i.exec(e)||[]}function s(){var t=[],r=void 0,n=void 0,o=void 0,i=void 0;null!==n&&void 0!==n||!e.navigator||(r=a(e.navigator.userAgent),n=r[1],o=r[2],i=e.navigator.platform),void 0!==e.angular&&t.push("angularjs/"+e.angular.version.full),void 0!==e.Backbone&&t.push("backbonejs/"+e.Backbone.VERSION),void 0!==e.Ember&&t.push("emberjs/"+e.Ember.VERSION),void 0!==e.jQuery&&t.push("jquery/"+e.jQuery.fn.jquery),void 0!==e.ko&&t.push("knockout/"+e.ko.version),void 0!==e.Zepto&&t.push("zeptojs");var u=["js-"+m.default.name+"/"+m.default.version];return 0!==t.length&&u.push("("+t.sort().join(", ")+")"),u.concat([n,o,i]).map(function(e){return e?e.toString().replace(/\s/g,"_").toLowerCase():"unknown"}).join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMiddleware=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(339),l=r(361),h=n(l),p=r(47),d=n(p),y=r(85),v=n(y),b=r(368),m=n(b);t.HttpMiddleware=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Middleware";return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),c(t,[{key:"handle",value:function(e){var t=this,r=e.headers;return r.set("X-Kinvey-Device-Information",this.deviceInformation),new d.default(function(n,o){t.xhrRequest=(0,h.default)({method:e.method,url:e.url,headers:r.toPlainObject(),body:e.body,followRedirect:e.followRedirect,timeout:e.timeout},function(e,t,r){return(0,f.isDefined)(e)?o("ESOCKETTIMEDOUT"===e.code||"ETIMEDOUT"===e.code?new f.TimeoutError("The network request timed out."):new f.NetworkConnectionError("There was an error connecting to the network.",e)):n({response:new f.KinveyResponse({statusCode:t.statusCode,headers:t.headers,data:r})})})})}},{key:"cancel",value:function(){return(0,f.isDefined)(this.xhrRequest)&&(0,v.default)(this.xhrRequest.abort)&&this.xhrRequest.abort(),d.default.resolve()}},{key:"deviceInformation",get:function(){return s()}}]),t}(f.Middleware)}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,r){var n=e;return f(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=h(t,{uri:e}),n.callback=r,n}function i(e,t,r){return t=o(e,t,r),u(t)}function u(e){function t(){4===f.readyState&&u()}function r(){var e=void 0;if(e=f.response?f.response:f.responseText||a(f),w)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,_)}function u(){if(!p){var t;clearTimeout(d),t=e.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var n=_,o=null;return 0!==t?(n={body:r(),statusCode:t,method:v,headers:{},url:y,rawRequest:f},f.getAllResponseHeaders&&(n.headers=l(f.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),c(o,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var s=!1,c=function(t,r,n){s||(s=!0,e.callback(t,r,n))},f=e.xhr||null;f||(f=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var h,p,d,y=f.url=e.uri||e.url,v=f.method=e.method||"GET",b=e.body||e.data,m=f.headers=e.headers||{},g=!!e.sync,w=!1,_={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:f};if("json"in e&&e.json!==!1&&(w=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),b=JSON.stringify(e.json===!0?b:e.json))),f.onreadystatechange=t,f.onload=u,f.onerror=o,f.onprogress=function(){},f.onabort=function(){p=!0},f.ontimeout=o,f.open(v,y,!g,e.username,e.password),g||(f.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(d=setTimeout(function(){if(!p){p=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),f.setRequestHeader)for(h in m)m.hasOwnProperty(h)&&f.setRequestHeader(h,m[h]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(b||null),f}function a(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function s(){}var c=r(362),f=r(363),l=r(364),h=r(367);e.exports=i,i.XMLHttpRequest=c.XMLHttpRequest||s,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,r,n){return r=o(t,r,n),r.method=e.toUpperCase(),u(r)}})},function(e,t){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,function(){return this}())},function(e,t){function r(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=r;var n=Object.prototype.toString},function(e,t,r){var n=r(365),o=r(366),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(n(e).split("\n"),function(e){var r=e.indexOf(":"),o=n(e.slice(0,r)).toLowerCase(),u=n(e.slice(r+1));void 0===t[o]?t[o]=u:i(t[o])?t[o].push(u):t[o]=[t[o],u]}),t}},function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=r,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,r){function n(e,t,r){if(!a(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===s.call(e)?o(e,t,r):"string"==typeof e?i(e,t,r):u(e,t,r)}function o(e,t,r){for(var n=0,o=e.length;n<o;n++)c.call(e,n)&&t.call(r,e[n],n,e)}function i(e,t,r){for(var n=0,o=e.length;n<o;n++)t.call(r,e.charAt(n),n,e)}function u(e,t,r){for(var n in e)c.call(e,n)&&t.call(r,e[n],n,e)}var a=r(363);e.exports=n;var s=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={name:"kinvey-html5-sdk",version:"3.5.2",description:"Kinvey JavaScript SDK for HTML5 applications.",homepage:"http://www.kinvey.com",bugs:{url:"https://github.com/Kinvey/html5-sdk/issues"},license:"Apache-2.0",author:"Kinvey",contributors:["Thomas Conner <thomas@kinvey.com>"],main:"./dist/index.js",repository:{type:"git",url:"git@github.com:Kinvey/html5-sdk"},scripts:{build:"npm run clean && npm run transpile && npm run bundle && npm run minify",bundle:"webpack --config webpack.config.js",clean:"rm -rf dist && rm -rf coverage && rm -rf s3",minify:"uglifyjs --screw-ie8 --compress warnings=false --mangle --comments --output ./dist/kinvey-html5-sdk.min.js -- ./dist/kinvey-html5-sdk.js ",cover:"istanbul cover _mocha -- --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",docs:"esdoc -c esdoc.json","e2e:server":"selenium-standalone install --version=3.0.1 && selenium-standalone start","e2e:app":"npm run build && shjs ./scripts/e2e.js && node ./test/e2e/app","e2e:test":"wdio ./test/e2e/wdio.conf","e2e:test:browserstack":"wdio ./test/e2e/browserstack.conf",lint:"npm run lint:src","lint:src":"eslint src/**","lint:test":"eslint test/unit/**",preversion:"rm -rf node_modules && npm install && npm test",version:"npm run build && git add dist/kinvey-html5-sdk.js && git add dist/kinvey-html5-sdk.min.js && git commit -m 'Update dist bundle.'",postversion:"git push && git push --tags && rm -rf dist && rm -rf coverage && rm -rf s3",s3:"npm run build && shjs ./scripts/s3.js",test:"mocha --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit","test:watch":"mocha -w --compilers js:babel-core/register -r babel-polyfill -s 100 --recursive test/unit/setup test/unit",transpile:"babel src --out-dir dist"},dependencies:{"core-js":"2.4.1","es6-promise":"4.1.0","kinvey-js-sdk":"file:///Users/Thomas/Documents/Kinvey/Development/SDKs/JavaScript/Core/SDK","local-storage-fallback":"4.0.0",lodash:"4.17.4",url:"0.11.0","url-join":"2.0.2",xhr:"2.3.3"},devDependencies:{"babel-cli":"6.24.0","babel-core":"6.24.0","babel-eslint":"7.1.1","babel-plugin-inline-dotenv":"^1.1.1","babel-plugin-module-resolver":"2.5.0","babel-polyfill":"^6.9.0","babel-preset-es2015":"6.24.0","babel-preset-stage-2":"^6.0.15","babel-register":"6.24.0","browserstack-local":"^1.2.0",eslint:"3.17.1","eslint-config-airbnb-base":"11.1.1","eslint-import-resolver-babel-module":"3.0.0","eslint-plugin-import":"2.2.0",expect:"^1.20.2","fs-extra":"2.1.1",istanbul:"1.1.0-alpha.1","json-loader":"^0.5.4",mocha:"3.2.0",nock:"9.0.9","regenerator-runtime":"0.10.3","selenium-standalone":"6.0.1",shelljs:"0.7.7","uglify-js":"2.8.12","wdio-mocha-framework":"0.5.9","wdio-spec-reporter":"0.1.0",webdriverio:"^4.4.0",webpack:"^1.13.0"},engines:{node:">=4.0"},keywords:["Kinvey","JavaScript","HTML5"]}}])});