/**
 * kinvey-html5-sdk - Kinvey JavaScript SDK for HTML5 applications.
 * @version v3.9.2
 * @author Kinvey, Inc.
 * @link http://www.kinvey.com
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Kinvey=t():e.Kinvey=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=357)}([function(e,t){function r(e,t,r,n){this.name="BaseError",this.message=e||"An error occurred.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}(r.prototype=Object.create(Error.prototype)).constructor=r,e.exports=r},function(e,t,r){e.exports={ActiveUserError:r(311),APIVersionNotAvailableError:r(312),APIVersionNotImplementedError:r(313),AppProblemError:r(314),BadRequestError:r(315),BaseError:r(0),BLError:r(316),CORSDisabledError:r(317),DuplicateEndUsersError:r(318),FeatureUnavailableError:r(319),IncompleteRequestBodyError:r(320),IndirectCollectionAccessDisallowedError:r(321),InsufficientCredentialsError:r(322),InvalidCredentialsError:r(323),InvalidIdentifierError:r(324),InvalidQuerySyntaxError:r(325),JSONParseError:r(326),KinveyInternalErrorRetry:r(328),KinveyInternalErrorStop:r(329),KinveyError:r(327),MissingQueryError:r(330),MissingRequestHeaderError:r(331),MissingRequestParameterError:r(332),MobileIdentityConnectError:r(333),NetworkConnectionError:r(334),NoActiveUserError:r(335),NoResponseError:r(336),NotFoundError:r(337),ParameterValueOutOfRangeError:r(338),PopupError:r(339),QueryError:r(340),ServerError:r(341),StaleRequestError:r(342),SyncError:r(343),TimeoutError:r(344),UserAlreadyExistsError:r(345),WritesToCollectionDisallowedError:r(346)}},function(e,t,r){function n(e){return!1===o(e)&&!1===i(e)}const i=r(272),o=r(273);t.isDefined=n,t.isNumber=function(e){return!Number.isNaN(parseFloat(e))&&Number.isFinite(e)},t.nested=function(e,t,r){if(!1===n(t))return e=r||e;const i=t.split(".");let o=i.shift();for(;o&&e;)e=e[o],o=i.shift();return r||e},t.keyBy=function(e,t){return e?e.reduce((e,r)=>(e[t]=r[t],e),{}):{}},t.isEmpty=function(e){return!n(e)||!(e.length>0)&&(0===e.length||("object"!=typeof e||Object.keys(e).reduce((t,r)=>!!t&&!Object.hasOwnProperty.call(e,r),!0)))}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){(function(t,n){!function(t,r){e.exports=r()}(0,function(){"use strict";function e(e){return"function"==typeof e}function i(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<S;e+=2){(0,I[e])(I[e+1]),I[e]=void 0,I[e+1]=void 0}S=0}function s(e,t){var r=arguments,n=this,i=new this.constructor(u);void 0===i[M]&&g(i);var o=n._state;return o?function(){var e=r[o-1];O(function(){return m(o,i,e,n._result)})}():d(n,i,e,t),i}function a(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(u);return l(t,e),t}function u(){}function c(e){try{return e.then}catch(e){return D.error=e,D}}function h(t,r,n){r.constructor===t.constructor&&n===s&&r.constructor.resolve===a?function(e,t){t._state===U?p(e,t._result):t._state===N?f(e,t._result):d(t,void 0,function(t){return l(e,t)},function(t){return f(e,t)})}(t,r):n===D?(f(t,D.error),D.error=null):void 0===n?p(t,r):e(n)?function(e,t,r){O(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?l(e,r):p(e,r))},function(t){n||(n=!0,f(e,t))},e._label);!n&&i&&(n=!0,f(e,i))},e)}(t,r,n):p(t,r)}function l(e,t){e===t?f(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?p(e,t):h(e,t,c(t))}function p(e,t){e._state===q&&(e._result=t,e._state=U,0!==e._subscribers.length&&O(y,e))}function f(e,t){e._state===q&&(e._state=N,e._result=t,O(function(e){e._onerror&&e._onerror(e._result),y(e)},e))}function d(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+U]=r,i[o+N]=n,0===o&&e._state&&O(y,e)}function y(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?m(r,n,i,o):i(o);e._subscribers.length=0}}function v(){this.error=null}function m(t,r,n,i){var o=e(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(e,t){try{return e(t)}catch(e){return L.error=e,L}}(n,i))===L?(c=!0,a=s.error,s.error=null):u=!0,r===s)return void f(r,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;r._state!==q||(o&&u?l(r,s):c?f(r,a):t===U?p(r,s):t===N&&f(r,s))}function g(e){e[M]=$++,e._state=void 0,e._result=void 0,e._subscribers=[]}function b(e,t){this._instanceConstructor=e,this.promise=new e(u),this.promise[M]||g(this.promise),x(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&p(this.promise,this._result))):f(this.promise,new Error("Array Methods must be provided an Array"))}function _(e){this[M]=$++,this._result=this._state=void 0,this._subscribers=[],u!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof _?function(e,t){try{t(function(t){l(e,t)},function(t){f(e,t)})}catch(t){f(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var w=void 0,x=w=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},S=0,E=void 0,k=void 0,O=function(e,t){I[S]=e,I[S+1]=t,2===(S+=2)&&(k?k(o):R())},P="undefined"!=typeof window?window:void 0,A=P||{},T=A.MutationObserver||A.WebKitMutationObserver,C="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),j="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,I=new Array(1e3),R=void 0;R=C?function(){return t.nextTick(o)}:T?function(){var e=0,t=new T(o),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():j?function(){var e=new MessageChannel;return e.port1.onmessage=o,function(){return e.port2.postMessage(0)}}():void 0===P?function(){try{var e=r(384);return void 0!==(E=e.runOnLoop||e.runOnContext)?function(){E(o)}:i()}catch(e){return i()}}():i();var M=Math.random().toString(36).substring(16),q=void 0,U=1,N=2,D=new v,L=new v,$=0;return b.prototype._enumerate=function(e){for(var t=0;this._state===q&&t<e.length;t++)this._eachEntry(e[t],t)},b.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===a){var i=c(e);if(i===s&&e._state!==q)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===_){var o=new r(u);h(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},b.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===q&&(this._remaining--,e===N?f(n,r):this._result[t]=r),0===this._remaining&&p(n,this._result)},b.prototype._willSettleAt=function(e,t){var r=this;d(e,void 0,function(e){return r._settledAt(U,t,e)},function(e){return r._settledAt(N,t,e)})},_.all=function(e){return new b(this,e).promise},_.race=function(e){var t=this;return new t(x(e)?function(r,n){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},_.resolve=a,_.reject=function(e){var t=new this(u);return f(t,e),t},_._setScheduler=function(e){k=e},_._setAsap=function(e){O=e},_._asap=O,_.prototype={constructor:_,then:s,catch:function(e){return this.then(null,e)}},_.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=_},_.Promise=_,_})}).call(t,r(284),r(8))},function(e,t,r){const{CacheRequest:n}=r(130),{DeltaFetchRequest:i}=r(373),{Headers:o}=r(52),{NetworkRequest:s,AuthType:a,KinveyRequest:u,Properties:c}=r(133),{Request:h,RequestMethod:l}=r(53),{Response:p,KinveyResponse:f,StatusCode:d}=r(32),{Rack:y,CacheRack:v,NetworkRack:m}=r(85),{Middleware:g,CacheMiddleware:b,HttpMiddleware:_,MemoryAdapter:w,ParseMiddleware:x,SerializeMiddleware:S,Storage:E}=r(131);e.exports={AuthType:a,CacheMiddleware:b,CacheRack:v,CacheRequest:n,DeltaFetchRequest:i,Headers:o,HttpMiddleware:_,KinveyRequest:u,KinveyResponse:f,MemoryAdapter:w,Middleware:g,NetworkRack:m,NetworkRequest:s,ParseMiddleware:x,Properties:c,Rack:y,Request:h,RequestMethod:l,Response:p,SerializeMiddleware:S,StatusCode:d,Storage:E}},function(e,t,r){var n=r(17),i=r(3),o=r(15),s="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&n(e)==s}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&s.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}var o=r(286),s=r(303);t.parse=i,t.resolve=function(e,t){return i(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},t.format=function(e){return s.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)},t.Url=n;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),p=["%","/","?",";","#"].concat(l),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(291);n.prototype.parse=function(e,t,r){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",u=e.split(i);u[0]=u[0].replace(/\\/g,"/");var h=e=u.join(i);if(h=h.trim(),!r&&1===e.split("#").length){var _=c.exec(h);if(_)return this.path=h,this.href=h,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(h);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,h=h.substr(w.length)}if(r||w||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===h.substr(0,2);!S||w&&m[w]||(h=h.substr(2),this.slashes=!0)}if(!m[w]&&(S||w&&!g[w])){for(var E=-1,k=0;k<f.length;k++){-1!==(A=h.indexOf(f[k]))&&(-1===E||A<E)&&(E=A)}var O,P;-1!==(P=-1===E?h.lastIndexOf("@"):h.lastIndexOf("@",E))&&(O=h.slice(0,P),h=h.slice(P+1),this.auth=decodeURIComponent(O)),E=-1;for(k=0;k<p.length;k++){var A=h.indexOf(p[k]);-1!==A&&(-1===E||A<E)&&(E=A)}-1===E&&(E=h.length),this.host=h.slice(0,E),h=h.slice(E),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var C=this.hostname.split(/\./),k=0,j=C.length;k<j;k++){var I=C[k];if(I&&!I.match(d)){for(var R="",M=0,q=I.length;M<q;M++)I.charCodeAt(M)>127?R+="x":R+=I[M];if(!R.match(d)){var U=C.slice(0,k),N=C.slice(k+1),D=I.match(y);D&&(U.push(D[1]),N.unshift(D[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=U.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=o.toASCII(this.hostname));var L=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+L,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[x])for(var k=0,j=l.length;k<j;k++){var K=l[k];if(-1!==h.indexOf(K)){var B=encodeURIComponent(K);B===K&&(B=escape(K)),h=h.split(K).join(B)}}var F=h.indexOf("#");-1!==F&&(this.hash=h.substr(F),h=h.slice(0,F));var H=h.indexOf("?");if(-1!==H?(this.search=h.substr(H),this.query=h.substr(H+1),t&&(this.query=b.parse(this.query)),h=h.slice(0,H)):t&&(this.search="",this.query={}),h&&(this.pathname=h),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",G=this.search||"";this.path=L+G}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(s.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var h=u[c];"protocol"!==h&&(r[h]=e[h])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var f=l[p];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(S=(e.pathname||"").split("/");S.length&&!(e.host=S.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==S[0]&&S.unshift(""),S.length<2&&S.unshift(""),r.pathname=S.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",y=r.search||"";r.path=d+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=b||v||r.host&&e.pathname,w=_,x=r.pathname&&r.pathname.split("/")||[],S=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!g[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===S[0]?S[0]=e.host:S.unshift(e.host)),e.host=null),_=_&&(""===S[0]||""===x[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=S;else if(S.length)x||(x=[]),x.pop(),x=x.concat(S),r.search=e.search,r.query=e.query;else if(!s.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=x.shift();(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return r.search=e.search,r.query=e.query,s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=x.slice(-1)[0],O=(r.host||e.host||x.length>1)&&("."===k||".."===k)||""===k,P=0,A=x.length;A>=0;A--)"."===(k=x[A])?x.splice(A,1):".."===k?(x.splice(A,1),P++):P&&(x.splice(A,1),P--);if(!_&&!w)for(;P--;P)x.unshift("..");!_||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),O&&"/"!==x.join("/").substr(-1)&&x.push("");var T=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(E){r.hostname=r.host=T?"":x.length?x.shift():"";var C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return(_=_||r.host&&x.length)&&!T&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),s.isNull(r.pathname)&&s.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){e.exports=r(308)},function(e,t,r){e.exports=r(372)},function(e,t,r){var n=r(103),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var n=r(63),i=r(21),o=r(68),s=r(14),a=r(27),u=r(20),c=Object.prototype.hasOwnProperty,h=o(function(e,t){if(a(t)||s(t))i(t,u(t),e);else for(var r in t)c.call(t,r)&&n(e,r,t[r])});e.exports=h},function(e,t,r){var n=r(19),i=r(73);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){e.exports=r(367)},function(e,t,r){var n=r(24),i=r(218),o=r(246),s="[object Null]",a="[object Undefined]",u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:s:u&&u in Object(e)?i(e):o(e)}},function(e,t,r){var n=r(185),i=r(186),o=r(44),s=r(3),a=r(275);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?i(e[0],e[1]):n(e):a(e)}},function(e,t,r){var n=r(17),i=r(12),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=n(e);return t==s||t==a||t==o||t==u}},function(e,t,r){var n=r(94),i=r(98),o=r(14);e.exports=function(e){return o(e)?n(e):i(e)}},function(e,t,r){var n=r(63),i=r(64);e.exports=function(e,t,r,o){var s=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var c=t[a],h=o?o(r[c],e[c],c,r,e):void 0;void 0===h&&(h=e[c]),s?i(r,c,h):n(r,c,h)}return r}},function(e,t,r){var n=r(181),i=r(219);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},function(e,t,r){e.exports=r(307)},function(e,t,r){var n=r(11).Symbol;e.exports=n},function(e,t,r){var n=r(48),i=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,r){var n=r(174),i=r(210)(n);e.exports=i},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(17),i=r(69),o=r(15),s="[object Object]",a=Function.prototype,u=Object.prototype,c=a.toString,h=u.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!o(e)||n(e)!=s)return!1;var t=i(e);if(null===t)return!0;var r=h.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==l}},function(e,t,r){e.exports=r(369)},function(e,t,r){const n=r(4),{AsciiTree:i}=r(374);t.Middleware=class{constructor(e="Middleware"){this.name=e}handle(){return n.reject(new Error("A subclass middleware must override the handle function."))}cancel(){return n.resolve()}generateTree(e=0){return{value:this.name,level:e,nodes:[]}}toString(){const e=this.generateTree();return i.generate(e)}}},function(e,t,r){const n=r(13),{Headers:i}=r(52),{APIVersionNotAvailableError:o,APIVersionNotImplementedError:s,AppProblemError:a,BadRequestError:u,BLError:c,CORSDisabledError:h,DuplicateEndUsersError:l,FeatureUnavailableError:p,IncompleteRequestBodyError:f,IndirectCollectionAccessDisallowedError:d,InsufficientCredentialsError:y,InvalidCredentialsError:v,InvalidIdentifierError:m,InvalidQuerySyntaxError:g,JSONParseError:b,KinveyError:_,KinveyInternalErrorRetry:w,KinveyInternalErrorStop:x,MissingQueryError:S,MissingRequestHeaderError:E,MissingRequestParameterError:k,NotFoundError:O,ParameterValueOutOfRangeError:P,ServerError:A,StaleRequestError:T,UserAlreadyExistsError:C,WritesToCollectionDisallowedError:j}=r(1),I={Ok:200,Created:201,Empty:204,MovedPermanently:301,Found:302,NotModified:304,TemporaryRedirect:307,PermanentRedirect:308,Unauthorized:401,Forbidden:403,NotFound:404,ServerError:500};Object.freeze(I),t.StatusCode=I;class R{constructor(e={}){e=n({statusCode:I.Empty,headers:new i,data:null},e),this.statusCode=e.statusCode,this.headers=e.headers,this.data=e.data}get headers(){return this._headers}set headers(e){e instanceof i||(e=new i(e)),this._headers=e}get error(){if(this.isSuccess())return null;const e=this.data||{},t=e.message||e.description,r=e.debug,n=this.statusCode,i=this.headers.get("X-Kinvey-Request-ID");let o;return o=n===I.Unauthorized?new y(t,r,n,i):n===I.NotFound?new O(t,r,n,i):n===I.ServerError?new A(t,r,n,i):new _(t,r,n,i)}isSuccess(){return this.statusCode>=200&&this.statusCode<300||this.statusCode===I.MovedPermanently||this.statusCode===I.Found||this.statusCode===I.NotModified||this.statusCode===I.TemporaryRedirect||this.statusCode===I.PermanentRedirect}isServerError(){return this.statusCode>=500&&this.statusCode<600}isClientError(){return this.statusCode>=400&&this.statusCode<500}toPlainObject(){return{statusCode:this.statusCode,headers:this.headers.toPlainObject(),data:this.data}}}t.Response=R,t.KinveyResponse=class extends R{get error(){if(this.isSuccess())return null;const e=this.data||{},t=e.name||e.error,r=e.message||e.description,n=e.debug,i=this.statusCode,_=this.headers.get("X-Kinvey-Request-ID");let I;if("APIVersionNotAvailable"===t)I=new o(r,n,i,_);else if("APIVersionNotImplemented"===t)I=new s(r,n,i,_);else if("AppProblem"===t)I=new a(r,n,i,_);else if("AppProblem"===t)I=new a(r,n,i,_);else if("BadRequest"===t)I=new u(r,n,i,_);else if("BLInternalError"===t||"BLRuntimeError"===t||"BLSyntaxError"===t||"BLTimeoutError"===t||"BLViolationError"===t)I=new c(r,n,i,_);else if("CORSDisabled"===t)I=new h(r,n,i,_);else if("DuplicateEndUsers"===t)I=new l(r,n,i,_);else if("FeatureUnavailable"===t)I=new p(r,n,i,_);else if("IncompleteRequestBody"===t)I=new f(r,n,i,_);else if("IndirectCollectionAccessDisallowed"===t)I=new d(r,n,i,_);else if("InsufficientCredentials"===t)I=new y(r,n,i,_);else if("InvalidCredentials"===t)I=new v(r,n,i,_);else if("InvalidIdentifier"===t)I=new m(r,n,i,_);else if("InvalidQuerySyntax"===t)I=new g(r,n,i,_);else if("JSONParseError"===t)I=new b(r,n,i,_);else if("KinveyInternalErrorRetry"===t)I=new w(r,n,i,_);else if("KinveyInternalErrorStop"===t)I=new x(r,n,i,_);else if("MissingQuery"===t)I=new S(r,n,i,_);else if("MissingRequestHeader"===t)I=new E(r,n,i,_);else if("MissingRequestParameter"===t)I=new k(r,n,i,_);else if("EntityNotFound"===t||"CollectionNotFound"===t||"AppNotFound"===t||"UserNotFound"===t||"BlobNotFound"===t||"DocumentNotFound"===t)I=new O(r,n,i,_);else if("ParameterValueOutOfRange"===t)I=new P(r,n,i,_);else if("ServerError"===t)I=new A(r,n,i,_);else if("StaleRequest"===t)I=new T(r,n,i,_);else if("UserAlreadyExists"===t)I=new C(r,n,i,_);else{if("WritesToCollectionDisallowed"!==t)return super.error;I=new j(r,n,i,_)}return I}}},function(e,t){t.randomString=function(e=18,t=""){return`${t}${function(e=10){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n+=1)t+=r.charAt(Math.floor(Math.random()*r.length));return t}(e)}`},t.isNonemptyString=function(e){return"string"==typeof e&&""!==e},t.uuidv4=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}},function(e,t,r){const{CacheStore:n}=r(83),{NetworkStore:i}=r(84),{SyncStore:o}=r(124),{DataStoreType:s,DataStore:a}=r(309),{SyncOperation:u}=r(123);e.exports={SyncOperation:u,CacheStore:n,NetworkStore:i,SyncStore:o,DataStoreType:s,DataStore:a}},function(e,t,r){const{SocialIdentity:n}=r(126),{AuthorizationGrant:i,MobileIdentityConnect:o}=r(361);e.exports={SocialIdentity:n,AuthorizationGrant:i,MobileIdentityConnect:o}},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(232),o=r(233),s=r(234),a=r(235),u=r(236);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,e.exports=n},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},function(e,t,r){var n=r(28);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(3),i=r(72),o=r(259),s=r(281);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:o(s(e))}},function(e,t,r){var n=r(230);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(22)(Object,"create");e.exports=n},function(e,t,r){var n=r(93),i=r(26),o=r(197),s=r(3);e.exports=function(e,t){return(s(e)?n:i)(e,o(t))}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(177),i=r(15),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},function(e,t,r){(function(e){var n=r(11),i=r(277),o="object"==typeof t&&t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u}).call(t,r(50)(e))},function(e,t,r){var n=r(98),i=r(71),o=r(45),s=r(3),a=r(14),u=r(46),c=r(27),h=r(75),l="[object Map]",p="[object Set]",f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||h(e)||o(e)))return!e.length;var t=i(e);if(t==l||t==p)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},function(e,t,r){var n=r(17),i=r(15),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==o}},function(e,t,r){var n=r(94),i=r(183),o=r(14);e.exports=function(e){return o(e)?n(e,!0):i(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){function n(e){if(!e)return!1;const{onMessage:t,onError:r,onStatus:n}=e;return s(t)||s(r)||s(n)}function i(e){return d(e)}const o=r(285),s=r(19),a=r(266),{Client:u}=r(9),{KinveyRequest:c,RequestMethod:h,Response:l}=r(5),{KinveyError:p,ActiveUserError:f}=r(1),{isNonemptyString:d}=r(33),{PubNubListener:y}=r(127);t.isValidReceiver=n,t.isValidChannelName=i;class v{constructor(e){this._client=e||u.sharedInstance(),this._pubnubClient=void 0,this._pubnubListener=void 0,this._userChannelGroup=void 0,this._pubnubConfig=void 0,this._registeredUser=void 0}get _pubnubClient(){return this.__pubnubClient||this._throwNotInitializedError(),this.__pubnubClient}set _pubnubClient(e){this.__pubnubClient=e}set _pubnubListener(e){this.__pubnubListener=e}get _pubnubListener(){return this.__pubnubListener||this._throwNotInitializedError(),this.__pubnubListener}fullInitialization(e){return this.registerUser(e).then(e=>{const t=new o(e),r=new y;this.initialize(t,r)})}fullUninitialization(){return this.unregisterUser().then(e=>(this.uninitialize(),e))}isInitialized(){return!!this.__pubnubClient&&!!this.__pubnubListener&&!!this._registeredUser}registerUser(e){return e&&e.isActive()?this.isInitialized()?Promise.reject(new p("Live service already initialized")):this._makeRegisterRequest(e._id).then(t=>{this._registeredUser=e,this._userChannelGroup=t.userChannelGroup;return a({ssl:!0,authKey:this._registeredUser._kmd.authtoken},t)}):Promise.reject(new f("Missing or invalid active user"))}initialize(e,t){if(this.isInitialized())throw new p("Live service already initialized");this._pubnubListener=t,this._pubnubClient=e,this._pubnubClient.addListener(this._pubnubListener),this._subscribeToUserChannelGroup()}uninitialize(){this._unsubscribeFromAll(),this._pubnubClient=null,this._pubnubListener=null}onConnectionStatusUpdates(e){this._pubnubListener.on(y.unclassifiedEvents,e),this._pubnubListener.on(this._userChannelGroup,e)}offConnectionStatusUpdates(e){e?(this._pubnubListener.removeListener(y.unclassifiedEvents,e),this._pubnubListener.removeListener(this._userChannelGroup,e)):(this._pubnubListener.removeAllListeners(y.unclassifiedEvents),this._pubnubListener.removeAllListeners(this._userChannelGroup))}publishToChannel(e,t){if(!this.isInitialized())return Promise.reject(new p("Live service is not initialized"));const r=this._validatePublishData(e,t);return r?Promise.reject(r):this._pubnubClient.publish({message:t,channel:e}).catch(e=>{e=e.status&&e.status.errorData;const t=new l({data:e,statusCode:e.status,headers:e.response&&e.response.headers});return Promise.reject(t)})}subscribeToChannel(e,t){const r=this._validateSubscribeData(e,t);if(r)throw r;this._subscribeToListener(e,t)}unsubscribeFromChannel(e){this._unsubscribeFromListener(e)}unregisterUser(){if(!this._registeredUser){return Promise.reject(new p("Cannot unregister when no user has been registered for live service"))}const e=this._registeredUser._id;return this._makeUnregisterRequst(e).then(e=>(this._registeredUser=null,e))}_unsubscribeFromAll(){this._pubnubClient.unsubscribeAll(),this._pubnubListener.removeAllListeners()}_validatePublishData(e,t){let r=null;return i(e)||(r=new p("Invalid channel name")),void 0===t&&(r=new p("Missing or invalid message")),r}_validateSubscribeData(e,t){let r=null;return i(e)||(r=new p("Invalid channel name")),t&&n(t)||(r=new p("Missing or invalid receiver")),r}_subscribeToUserChannelGroup(){this._pubnubClient.subscribe({channelGroups:[this._userChannelGroup]})}_subscribeToListener(e,t){s(t.onMessage)&&this._pubnubListener.on(e,t.onMessage),(s(t.onError)||s(t.onStatus))&&this._pubnubListener.on(`${y.statusPrefix}${e}`,e=>{const r=e.error?t.onError:t.onStatus;s(r)&&r.call(t,e)})}_unsubscribeFromListener(e){this._pubnubListener.removeAllListeners(e),this._pubnubListener.removeAllListeners(`${y.statusPrefix}${e}`)}_makeRegisterRequest(e){return this._makeUserManagementRequest(e,"register-realtime")}_makeUnregisterRequst(e){return this._makeUserManagementRequest(e,"unregister-realtime")}_makeUserManagementRequest(e,t){return c.executeShort({method:h.POST,pathname:`/user/${this._client.appKey}/${e}/${t}`,body:{deviceId:this._client.deviceId}},this._client)}_throwNotInitializedError(){throw new p("Live service has not been initialized")}}let m;t.getLiveService=function(e){return m||(m=new v(e)),m}},function(e,t,r){const n=r(43),i=r(6),o=r(29),{isDefined:s}=r(2);t.Headers=class e{constructor(e={}){this.headers={},this.addAll(e)}get(e){if(e){!1===i(e)&&(e=String(e));return this.headers[e.toLowerCase()]}}set(e,t){if(!1===s(e)||!1===s(t))throw new Error("A name and value must be provided to set a header.");!1===i(e)&&(e=String(e));const r=this.headers;return e=e.toLowerCase(),!1===i(t)?r[e]=JSON.stringify(t):r[e]=t,this.headers=r,this}has(e){return!!this.get(e)}add(e={}){return this.set(e.name,e.value)}addAll(t={}){if(t instanceof e&&(t=t.toPlainObject()),!1===o(t))throw new Error("Headers argument must be an object.");const r=Object.keys(t);return n(r,e=>{try{this.set(e,t[e])}catch(e){}}),this}remove(e){if(e){!1===i(e)&&(e=String(e));const t=this.headers;delete t[e.toLowerCase()],this.headers=t}return this}clear(){return this.headers={},this}toPlainObject(){return this.headers}toString(){return JSON.stringify(this.toPlainObject())}}},function(e,t,r){const n=r(4),i=r(80),o=r(13),s=r(6),a=r(74),{Client:u}=r(9),{KinveyError:c,NoResponseError:h}=r(1),{isDefined:l}=r(2),{appendQuery:p}=r(134),{randomString:f}=r(33),{Response:d}=r(32),{Headers:y}=r(52),v={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};Object.freeze(v),t.RequestMethod=v,t.Request=class{constructor(e={}){e=o({followRedirect:!0},e),this.id=f(),this.client=e.client,this.method=e.method||v.GET,this.headers=e.headers||new y,this.url=e.url||"",this.body=e.body||e.data,this.timeout=l(e.timeout)?e.timeout:this.client.defaultTimeout,this.followRedirect=!0===e.followRedirect,this.cache=!0===e.cache}get client(){return this._client||u.sharedInstance()}set client(e){if(e&&e instanceof u==!1)throw new c("client must be an instance of the Client class.");this._client=e}get method(){return this._method}set method(e){switch(s(e)||(e=String(e)),e=e.toUpperCase()){case v.GET:case v.POST:case v.PATCH:case v.PUT:case v.DELETE:this._method=e;break;default:throw new c("Invalid request method. Only GET, POST, PATCH, PUT, and DELETE are allowed.")}}get headers(){return this._headers}set headers(e){e instanceof y||(e=new y(e)),this._headers=e}get url(){return!0===this.cache?p(this._url,i.stringify({_:Math.random().toString(36).substr(2)})):this._url}set url(e){this._url=e}get data(){return this.body}set data(e){this.body=e}get timeout(){return this._timeout}set timeout(e){if(e=parseInt(e,10),!1===a(e)||isNaN(e))throw new c("Invalid timeout. Timeout must be a number.");this._timeout=e}get followRedirect(){return this._followRedirect}set followRedirect(e){this._followRedirect=!!e}get cache(){return this._cache}set cache(e){this._cache=!!e}execute(){return!1===l(this.rack)?(Log.error("Unable to execute the request. Please provide a rack to execute the request."),n.reject(new c("Unable to execute the request. Please provide a rack to execute the request."))):this.rack.execute(this.toPlainObject()).then(e=>{if(!1===l(e))throw new h;return e instanceof d==!1&&(e=new d({statusCode:e.statusCode,headers:e.headers,data:e.data})),e})}cancel(){return this.rack.cancel()}toPlainObject(){return{id:this.id,method:this.method,headers:this.headers.toPlainObject(),url:this.url,body:this.body,timeout:this.timeout,followRedirect:this.followRedirect,encryptionKey:this.client.encryptionKey}}}},function(e,t,r){const{LiveCollectionManager:n,getLiveCollectionManager:i}=r(363),{Stream:o,StreamACL:s}=r(128),{isValidReceiver:a,isValidChannelName:u,getLiveService:c}=r(51),{PubNubListener:h}=r(127),{isInitialized:l,onConnectionStatusUpdates:p,offConnectionStatusUpdates:f}=r(365);e.exports={LiveCollectionManager:n,getLiveCollectionManager:i,Stream:o,StreamACL:s,isValidReceiver:a,isValidChannelName:u,getLiveService:c,PubNubListener:h,isInitialized:l,onConnectionStatusUpdates:p,offConnectionStatusUpdates:f}},function(e,t,r){e.exports=r(368)},function(e,t,r){e.exports=r(380)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),s=(c=r.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=a;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){var n=r(22)(r(11),"Map");e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(237),o=r(238),s=r(239),a=r(240),u=r(241);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,e.exports=n},function(e,t,r){function n(e){var t=this.__data__=new i(e);this.size=t.size}var i=r(36),o=r(253),s=r(254),a=r(255),u=r(256),c=r(257);n.prototype.clear=o,n.prototype.delete=s,n.prototype.get=a,n.prototype.has=u,n.prototype.set=c,e.exports=n},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},function(e,t){e.exports=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}},function(e,t,r){var n=r(64),i=r(28),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var s=e[t];o.call(e,t)&&i(s,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(101);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){var n=r(39),i=r(25);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[i(t[r++])];return r&&r==o?e:void 0}},function(e,t,r){var n=r(44),i=r(247),o=r(251);e.exports=function(e,t){return o(i(e,t,n),e+"")}},function(e,t,r){var n=r(91);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){var n=r(66),i=r(106);e.exports=function(e){return n(function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++n<o;){var u=r[n];u&&e(t,u,n,s)}return t})}},function(e,t,r){var n=r(110)(Object.getPrototypeOf,Object);e.exports=n},function(e,t,r){var n=r(161),i=r(116),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return o.call(e,t)}))}:i;e.exports=a},function(e,t,r){var n=r(152),i=r(58),o=r(154),s=r(155),a=r(156),u=r(17),c=r(112),h=c(n),l=c(i),p=c(o),f=c(s),d=c(a),y=u;(n&&"[object DataView]"!=y(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=y(new i)||o&&"[object Promise]"!=y(o.resolve())||s&&"[object Set]"!=y(new s)||a&&"[object WeakMap]"!=y(new a))&&(y=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case h:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case f:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,r){var n=r(3),i=r(48),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,r){var n=r(17),i=r(15),o="[object Number]";e.exports=function(e){return"number"==typeof e||i(e)&&n(e)==o}},function(e,t,r){var n=r(182),i=r(99),o=r(245),s=o&&o.isTypedArray,a=s?i(s):n;e.exports=a},function(e,t,r){var n=r(64),i=r(209)(function(e,t,r){n(e,r,t)});e.exports=i},function(e,t,r){var n=r(37),i=r(18),o=r(184),s=r(3);e.exports=function(e,t){return(s(e)?n:o)(e,i(t,3))}},function(e,t,r){var n=r(62),i=r(26),o=r(18),s=r(190),a=r(3);e.exports=function(e,t,r){var u=a(e)?n:s,c=arguments.length<3;return u(e,o(t,4),r,c,i)}},function(e,t,r){var n=r(196),i=r(20);e.exports=function(e){return null==e?[]:n(e,i(e))}},function(e,t,r){"use strict";var n=r(288),i=r(287),o=r(117);e.exports={formats:o,parse:i,stringify:n}},function(e,t,r){"use strict";var n=r(82).root.Symbol;t.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,r){"use strict";(function(e){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i=r||void 0!==e&&e||n;t.root=i,function(){if(!i)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,r(8))},function(e,t,r){const n=r(4),i=r(264),o=r(13),s=r(76),a=r(276),u=r(3),c=r(78),h=r(77),l=r(7),{CacheRequest:p,AuthType:f,RequestMethod:d}=r(5),{KinveyError:y,NotFoundError:v}=r(1),{Query:m}=r(10),{Aggregation:g}=r(23),{Metadata:b}=r(55),{isDefined:_}=r(2),{KinveyObservable:w}=r(30),{NetworkStore:x}=r(84),{SyncManager:S}=r(123);t.CacheStore=class extends x{constructor(e,t={}){super(e,t),this.ttl=t.ttl||void 0,this.syncManager=new S(this.collection,t)}get syncAutomatically(){return!0}find(e,t={}){const r=!0===(t=o({syncAutomatically:this.syncAutomatically},t)).syncAutomatically;return w.create(n=>{if(e&&!(e instanceof m))return n.error(new y("Invalid query. It must be an instance of the Query class."));return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).catch(()=>[]).then((o=[])=>(n.next(o),!0===r?this.pendingSyncCount(e,t).then(r=>r>0?this.push(e,t).then(()=>this.pendingSyncCount(e,t)):r).then(r=>{if(r>0)throw new y("Unable to fetch the entities on the backend."+` There are ${r} entities that need`+" to be synced.");return super.find(e,t).toPromise()}).then(e=>{const r=i(o,e,"_id"),n=Object.keys(s(r,"_id")),a=(new m).contains("_id",n);return this.clear(a,t).then(()=>e)}).then(e=>{return new p({method:d.PUT,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,body:e,timeout:t.timeout}).execute().then(e=>e.data)}):o)).then(e=>{n.next(e)}).then(()=>{n.complete()}).catch(e=>n.error(e))})}findById(e,t={}){const r=!0===(t=o({syncAutomatically:this.syncAutomatically},t)).syncAutomatically;return w.create(n=>{if(!1===_(e))return n.next(void 0),n.complete();return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data).catch(()=>void 0).then(i=>{if(n.next(i),!0===r){const r=new m;return r.equalTo("_id",e),this.pendingSyncCount(r,t).then(e=>e>0?this.push(r,t).then(()=>this.pendingSyncCount(r,t)):e).then(e=>{if(e>0)throw new y("Unable to find the entity on the backend."+` There are ${e} entities that need`+" to be synced.")}).then(()=>super.findById(e,t).toPromise()).then(e=>{return new p({method:d.PUT,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,body:e,timeout:t.timeout}).execute().then(e=>e.data)})}return i}).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))})}group(e,t={}){const r=!0===(t=o({syncAutomatically:this.syncAutomatically},t)).syncAutomatically;return w.create(n=>{if(!(e instanceof g))return n.error(new y("Invalid aggregation. It must be an instance of the Aggregation class."));return new p({method:d.POST,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_group`}),properties:t.properties,aggregation:e,timeout:t.timeout}).execute().then(e=>e.data).catch(()=>[]).then((i=[])=>(n.next(i),!0===r?this.pendingSyncCount(null,t).then(e=>e>0?this.push(null,t).then(()=>this.pendingSyncCount(null,t)):e).then(r=>{if(r>0)throw new y("Unable to group entities on the backend."+` There are ${r} entities that need`+" to be synced.");return super.group(e,t).toPromise()}):i)).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))})}count(e,t={}){const r=!0===(t=o({syncAutomatically:this.syncAutomatically},t)).syncAutomatically;return w.create(n=>{if(e&&!(e instanceof m))return n.error(new y("Invalid query. It must be an instance of the Query class."));return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).catch(()=>[]).then((e=[])=>e.length).then(i=>(n.next(i),!0===r?this.pendingSyncCount(e,t).then(r=>r>0?this.push(e,t).then(()=>this.pendingSyncCount(e,t)):r).then(e=>{if(e>0)throw new y("Unable to count entities on the backend."+` There are ${e} entities that need`+" to be synced.")}).then(()=>super.count(e,t).toPromise()):i)).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))})}create(e,t={}){return w.create(r=>{if(!1===_(e))return r.next(null),r.complete();if(u(e))return r.error(new y("Unable to create an array of entities.","Please create entities one by one."));return new p({method:d.POST,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,body:e,timeout:t.timeout}).execute().then(e=>e.data).then(e=>this.syncManager.addCreateOperation(e,t).then(()=>e)).then(e=>{if(!0===this.syncAutomatically){const r=(new m).equalTo("_id",e._id);return this.push(r,t).then(e=>{const t=e[0];if(_(t.error))throw t.error;return t.entity})}return e}).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}update(e,t={}){return w.create(r=>{if(!1===_(e))return r.next(null),r.complete();if(u(e))return r.error(new y("Unable to update an array of entities.","Please update entities one by one."));if(!1===_(e._id))return r.error(new y("The entity provided does not contain an _id. An _id is required to update the entity.",e));return new p({method:d.PUT,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,body:e,timeout:t.timeout}).execute().then(e=>e.data).then(e=>this.syncManager.addUpdateOperation(e,t).then(()=>e)).then(e=>{if(!0===this.syncAutomatically){const r=(new m).equalTo("_id",e._id);return this.push(r,t).then(e=>{const t=e[0];if(_(t.error))throw t.error;return t.entity})}return e}).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}remove(e,t={}){return w.create(r=>{if(e&&!(e instanceof m))return r.error(new y("Invalid query. It must be an instance of the Query class."));return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).then((e=[])=>e.length>0?n.all(h(e,e=>{if(new b(e).isLocal()){const r=new m;return r.equalTo("_id",e._id),this.clearSync(r,t).then(()=>e)}return this.syncManager.addDeleteOperation(e,t).then(()=>e)})).then(()=>e):e).then(e=>{if(e.length>0&&!0===this.syncAutomatically){const r=a(e,e=>{return new b(e).isLocal()}),n=Object.keys(s(e,"_id")),i=(new m).contains("_id",n);return this.push(i,t).then(e=>e.concat(r))}return e}).then(e=>n.all(h(e,e=>{if(!1===_(e.error)){return new p({method:d.DELETE,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,authType:f.Default,timeout:t.timeout}).execute().then(e=>e.data)}return{count:0}}))).then(e=>c(e,(e,t)=>(e.count+=t.count,e),{count:0})).then().then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}removeById(e,t={}){return w.create(r=>{if(!1===_(e))return r.next({count:0}),r.complete();return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`}),properties:t.properties,authType:f.Default,timeout:t.timeout}).execute().then(e=>e.data).catch(e=>{if(e instanceof v)return null;throw e}).then(e=>{if(_(e)){if(new b(e).isLocal()){const r=new m;return r.equalTo("_id",e._id),this.clearSync(r,t).then(()=>e)}return this.syncManager.addDeleteOperation(e,t).then(()=>e)}return e}).then(e=>{if(!0===this.syncAutomatically){const r=(new m).equalTo("_id",e._id);return this.push(r,t).then(()=>e)}return e}).then(e=>{return new p({method:d.DELETE,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,authType:f.Default,timeout:t.timeout}).execute().then(e=>e.data)}).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}clear(e,t={}){return w.create(r=>{if(e&&!(e instanceof m))return r.error(new y("Invalid query. It must be an instance of the Query class."));return new p({method:d.GET,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).then((e=[])=>n.all(h(e,e=>n.resolve(e).then(e=>{if(new b(e).isLocal()){const r=new m;return r.equalTo("_id",e._id),this.clearSync(r,t).then(()=>e)}return e}).then(e=>{return new p({method:d.DELETE,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,authType:f.Default,timeout:t.timeout}).execute().then(e=>e.data)})))).then(e=>c(e,(e,t)=>(e.count+=t.count,e),{count:0})).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}pendingSyncCount(e,t){return this.syncManager.count(e,t)}pendingSyncEntities(e,t){return this.syncManager.find(e,t)}push(e,t){return this.syncManager.push(e,t)}pull(e,t={}){return t=o({useDeltaFetch:this.useDeltaFetch},t),this.syncManager.pull(e,t).then(r=>this.clear(e,t).then(()=>{return new p({method:d.PUT,url:l.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,body:r,timeout:t.timeout}).execute()}).then(()=>r))}sync(e,t){return t=o({useDeltaFetch:this.useDeltaFetch},t),this.push(e,t).then(r=>{return this.pull(e,t).then(e=>{return{push:r,pull:e}})})}clearSync(e,t){return this.syncManager.clear(e,t)}}},function(e,t,r){const n=r(6),i=r(3),o=r(7),{DeltaFetchRequest:s,KinveyRequest:a,AuthType:u,RequestMethod:c}=r(5),{KinveyError:h}=r(1),{Query:l}=r(10),{Client:p}=r(9),{isDefined:f}=r(2),{KinveyObservable:d}=r(30),{Aggregation:y}=r(23),{getLiveCollectionManager:v}=r(54);t.NetworkStore=class{constructor(e,t={}){if(e&&!n(e))throw new h("Collection must be a string.");this.collection=e,this.client=t.client,this.useDeltaFetch=!0===t.useDeltaFetch}get client(){return f(this._client)?this._client:p.sharedInstance()}set client(e){this._client=e instanceof p?e:null}get pathname(){let e=`/appdata/${this.client.appKey}`;return this.collection&&(e=`${e}/${this.collection}`),e}find(e,t={}){const r=!0===t.useDeltaFetch||this.useDeltaFetch;return d.create(n=>{if(f(e)&&!(e instanceof l))return n.error(new h("Invalid query. It must be an instance of the Query class."));const i={method:c.GET,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout,client:this.client};let p=new a(i);return!0===r&&(p=new s(i)),p.execute().then(e=>e.data).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))})}findById(e,t={}){const r=t.useDeltaFetch||this.useDeltaFetch;return d.create(n=>{if(!e)return n.next(void 0),n.complete();const i={method:c.GET,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`}),properties:t.properties,timeout:t.timeout,client:this.client};let h=new a(i);return!0===r&&(h=new s(i)),h.execute().then(e=>e.data).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))})}group(e,t={}){return d.create(r=>{if(!(e instanceof y))return r.error(new h("Invalid aggregation. It must be an instance of the Aggregation class."));return new a({method:c.POST,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_group`}),properties:t.properties,aggregation:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))})}count(e,t={}){return d.create(r=>{try{if(e&&!(e instanceof l))throw new h("Invalid query. It must be an instance of the Query class.");return new a({method:c.GET,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_count`}),properties:t.properties,query:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e?e.count:0)).then(()=>r.complete()).catch(e=>r.error(e))}catch(e){return r.error(e)}})}create(e,t={}){return d.create(r=>{if(!1===f(e))return r.next(null),r.complete();if(i(e))return r.error(new h("Unable to create an array of entities.","Please create entities one by one."));return new a({method:c.POST,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,data:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}update(e,t={}){return d.create(r=>{if(!1===f(e))return r.next(null),r.complete();if(i(e))return r.error(new h("Unable to update an array of entities.","Please update entities one by one."));if(!1===f(e._id))return r.error(new h("Unable to update entity.","Entity must contain an _id to be updated."));return new a({method:c.PUT,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,data:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}save(e,t){return e._id?this.update(e,t):this.create(e,t)}remove(e,t={}){return d.create(r=>{try{if(e&&!(e instanceof l))throw new h("Invalid query. It must be an instance of the Query class.");return new a({method:c.DELETE,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}catch(e){return r.error(e)}}).toPromise()}removeById(e,t={}){return d.create(r=>{try{if(!1===f(e))return r.next(void 0),r.complete();return new a({method:c.DELETE,authType:u.Default,url:o.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}catch(e){return r.error(e)}}).toPromise()}subscribe(e){return v().subscribeCollection(this.collection,e)}unsubscribe(){return v().unsubscribeCollection(this.collection)}}},function(e,t,r){const n=r(4),i=r(78),o=r(19),s=r(79),{isDefined:a}=r(2),{Log:u}=r(16),{Middleware:c,CacheMiddleware:h,HttpMiddleware:l,ParseMiddleware:p,SerializeMiddleware:f}=r(131);class d extends c{constructor(e="Rack"){super(e),this.middlewares=[],this.canceled=!1,this.activeMiddleware=void 0}use(e){if(a(e)){if(e instanceof c)return void this.middlewares.push(e);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}reset(){this.middlewares=[]}execute(e){return!1===a(e)?n.reject(new Error("Request is undefined. Please provide a valid request.")):i(s(this.middlewares),(t,r)=>t.then(({request:t,response:i})=>this.canceled?n.reject(new Error("Cancelled")):(this.activeMiddleware=r,r.handle(t||e,i))),n.resolve({request:e})).then(({response:e})=>!0===this.canceled?n.reject(new Error("Cancelled")):(this.canceled=!1,this.activeMiddleware=void 0,e)).catch(e=>{throw this.canceled=!1,this.activeMiddleware=void 0,e})}cancel(){return this.canceled=!0,a(this.activeMiddleware)&&o(this.activeMiddleware.cancel)?this.activeMiddleware.cancel():n.resolve()}handle(e){return this.execute(e)}generateTree(e=0){const t=super.generateTree(e);return s(this.middlewares).forEach(r=>{t.nodes.push(r.generateTree(e+1))}),t}}t.Rack=d;class y extends d{constructor(e="Cache Rack"){super(e),this.use(new h)}useCacheMiddleware(e){this.reset(),this.use(e)}execute(e){return u.debug("Executing cache request",e),super.execute(e).then(t=>(u.debug(`Received response for cache request id: ${e.id}`,t),t)).catch(t=>{throw u.error(`Received error for cache request id: ${e.id}`,t),t})}}t.CacheRack=new y;class v extends d{constructor(e="Network Rack"){super(e),this.use(new f),this.use(new l),this.use(new p)}useHttpMiddleware(e){this.reset(),this.use(new f),this.use(e),this.use(new p)}execute(e){return u.debug("Executing network request",e),super.execute(e).then(t=>(u.debug(`Received response for network request: ${e.id}`,t),t)).catch(t=>{throw u.error(`Received error for network request id: ${e.id}`,t),t})}}t.NetworkRack=new v},function(e,t,r){e.exports=r(306)},function(e,t,r){"use strict";function n(){this._cache=i(),this._timeouts=i()}function i(){return Object.create(null)}n.prototype.get=function(e){return this._cache[e]},n.prototype.set=function(e,t,r){this.delete(e),this._cache[e]=t,r&&(this._timeouts[e]=setTimeout(this.delete.bind(this,e),1e3*r))},n.prototype.delete=function(e){delete this._cache[e],e in this._timeouts&&(clearTimeout(this._timeouts[e]),delete this._timeouts[e])},n.prototype.clear=function(){this._cache=i();for(var e in this._timeouts)clearTimeout(this._timeouts[e]);this._timeouts=i()},e.exports=n},function(e,t){e.exports=function(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new s;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(144)),o="lS_",s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieOptions=Object.assign({path:"/"},t),o=t.prefix||o}return n(e,[{key:"getItem",value:function(e){var t=i.default.parse(document.cookie);return t&&t.hasOwnProperty(o+e)?t[o+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=i.default.serialize(o+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=i.default.serialize(o+e,"",t),null}},{key:"clear",value:function(){var e=i.default.parse(document.cookie);for(var t in e)0===t.indexOf(o)&&this.removeItem(t.substr(o.length));return null}}]),e}();t.default=s},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new i;++t<r;)this.add(e[t])}var i=r(59),o=r(249),s=r(250);n.prototype.add=n.prototype.push=o,n.prototype.has=s,e.exports=n},function(e,t,r){var n=r(11).Uint8Array;e.exports=n},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},function(e,t,r){var n=r(193),i=r(45),o=r(3),s=r(46),a=r(41),u=r(75),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),h=!r&&i(e),l=!r&&!h&&s(e),p=!r&&!h&&!l&&u(e),f=r||h||l||p,d=f?n(e.length,String):[],y=d.length;for(var v in e)!t&&!c.call(e,v)||f&&("length"==v||l&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,y))||d.push(v);return d}},function(e,t){e.exports=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,r){var n=r(61),i=r(3);e.exports=function(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},function(e,t,r){function n(e,t,r,s,a){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!=e&&t!=t:i(e,t,r,s,n,a))}var i=r(178),o=r(15);e.exports=n},function(e,t,r){var n=r(27),i=r(243),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(22),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,r){var n=r(90),i=r(164),o=r(100),s=1,a=2;e.exports=function(e,t,r,u,c,h){var l=r&s,p=e.length,f=t.length;if(p!=f&&!(l&&f>p))return!1;var d=h.get(e);if(d&&h.get(t))return d==t;var y=-1,v=!0,m=r&a?new n:void 0;for(h.set(e,t),h.set(t,e);++y<p;){var g=e[y],b=t[y];if(u)var _=l?u(b,g,y,t,e,h):u(g,b,y,e,t,h);if(void 0!==_){if(_)continue;v=!1;break}if(m){if(!i(t,function(e,t){if(!o(m,t)&&(g===e||c(g,e,r,u,h)))return m.push(t)})){v=!1;break}}else if(g!==b&&!c(g,b,r,u,h)){v=!1;break}}return h.delete(e),h.delete(t),v}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(8))},function(e,t,r){var n=r(96),i=r(70),o=r(20);e.exports=function(e){return n(e,o,i)}},function(e,t,r){var n=r(61),i=r(69),o=r(70),s=r(116),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:s;e.exports=a},function(e,t,r){var n=r(28),i=r(14),o=r(41),s=r(12);e.exports=function(e,t,r){if(!s(r))return!1;var a=typeof t;return!!("number"==a?i(r)&&o(t,r.length):"string"==a&&t in r)&&n(r[t],e)}},function(e,t,r){var n=r(12);e.exports=function(e){return e==e&&!n(e)}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},function(e,t){e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){var n=r(168),i=1,o=4;e.exports=function(e){return n(e,i|o)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,r){var n=r(39),i=r(19),o=r(25);e.exports=function(e,t,r){var s=-1,a=(t=n(t,e)).length;for(a||(a=1,e=void 0);++s<a;){var u=null==e?void 0:e[o(t[s])];void 0===u&&(s=a,u=r),e=i(u)?u.call(e):u}return e}},function(e,t){e.exports=function(){return[]}},function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,i){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(i.plainObjects||i.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,o){n.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t.merge(e[o],r,i):e.push(r):e[o]=r}),e):Object.keys(r).reduce(function(e,o){var s=r[o];return n.call(e,o)?e[o]=t.merge(e[o],s,i):e[o]=s,e},o)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var o=t.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(n):o<128?r+=i[o]:o<2048?r+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?r+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),r+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],s=Object.keys(o),a=0;a<s.length;++a){var u=s[a],c=o[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:u}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(122),o=r(293),s=r(119),a=r(81),u=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,r,n,i)}}return n(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,r,n,o){e.call(this),this._parentSubscriber=t;var a,u=this;i.isFunction(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==s.empty&&(u=Object.create(r),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=a,this._error=n,this._complete=o}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t,r){"use strict";t.errorObject={e:{}}},function(e,t,r){"use strict";t.isFunction=function(e){return"function"==typeof e}},function(e,t,r){const n=r(4),i=r(77),o=r(115),s=r(3),a=r(6),u=r(7),{KinveyRequest:c,RequestMethod:h,AuthType:l,CacheRequest:p,DeltaFetchRequest:f}=r(5),{SyncError:d}=r(1),{isDefined:y}=r(2),{Client:v}=r(9),{Query:m}=r(10),g=new Map,b={Create:h.POST,Update:h.PUT,Delete:h.DELETE};Object.freeze(b),t.SyncOperation=b,t.SyncManager=class{constructor(e,t={}){if(!e)throw new d("A collection is required.");if(!a(e))throw new d("Collection must be a string.");this.collection=e,this.client=t.client||v.sharedInstance()}get pathname(){return`/appdata/${this.client.appKey}/kinvey_sync`}get backendPathname(){return`/appdata/${this.client.appKey}/${this.collection}`}find(e,t={}){y(e)&&e instanceof m==!1&&(e=new m(o(e,"toJSON",e)));return new p({method:h.GET,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.backendPathname}),query:e,properties:t.properties,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(r=>{const n=new m;n.equalTo("collection",this.collection),y(e)&&n.contains("entityId",i(r,e=>e._id));return new p({method:h.GET,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:n,timeout:t.timeout,client:this.client}).execute().then(e=>e.data)})}count(e,t={}){return this.find(e,t).then(e=>e.length)}addCreateOperation(e,t={}){return this.addOperation(b.Create,e,t)}addUpdateOperation(e,t={}){return this.addOperation(b.Update,e,t)}addDeleteOperation(e,t={}){return this.addOperation(b.Delete,e,t)}addOperation(e=b.Create,t,r={}){let o=!1;return s(t)||(o=!0,t=[t]),n.all(i(t,t=>{if(!t)return n.resolve(null);const i=t._id;if(!i)return n.reject(new d("An entity is missing an _id. All entities must have an _id in order to be added to the sync table.",t));const o=(new m).equalTo("entityId",i);return new p({method:h.GET,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:r.properties,query:o,timeout:r.timeout}).execute().then(e=>e.data).then(t=>{const n=1===t.length?t[0]:{collection:this.collection,state:{},entityId:i};n.state=n.state||{},n.state.operation=e;return new p({method:h.PUT,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:r.properties,body:n,timeout:r.timeout}).execute()})})).then(()=>!0===o?t[0]:t)}pull(e,t={}){return!e||e instanceof m?this.count(e).then(t=>t>0?this.push(e).then(()=>this.count(e)):t).then(r=>{if(r>0)throw new d("Unable to pull data from the network."+` There are ${r} entities that need`+" to be synced before data is loaded from the network.");const n={method:h.GET,authType:l.Default,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.backendPathname}),properties:t.properties,query:e,timeout:t.timeout,client:this.client};let i=new c(n);return!0===t.useDeltaFetch&&(i=new f(n)),i.execute()}).then(e=>e.data):n.reject(new d("Invalid query. It must be an instance of the Query class."))}push(e,t={}){let r=0;return!0===g.get(this.collection)?n.reject(new d("Data is already being pushed to the backend. Please wait for it to complete before pushing new data to the backend.")):(g.set(this.collection,!0),this.find(e).then(e=>{if(e.length>0){const o=s=>{return new n(a=>{const f=e.slice(r,r+100);return r+=100,n.all(i(f,e=>{const{entityId:r,state:n={}}=e,i=n.operation||n.method;if(i===b.Delete){return new c({method:h.DELETE,authType:l.Default,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.backendPathname}/${r}`}),properties:t.properties,timeout:t.timeout,client:this.client}).execute().then(()=>{return new p({method:h.DELETE,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,timeout:t.timeout}).execute()}).then(()=>{return{_id:r,operation:i}}).catch(e=>{return{_id:r,operation:i,error:e}})}if(i===b.Create||i===b.Update){let n=!1;return new p({method:h.GET,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.backendPathname}/${r}`}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data).then(o=>{const s=new c({method:h.PUT,authType:l.Default,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.backendPathname}/${r}`}),properties:t.properties,timeout:t.timeout,body:o,client:this.client});return i===b.Create&&(y(o._kmd)&&!0===o._kmd.local&&(n=!0,delete o._id),s.method=h.POST,s.url=u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.backendPathname})),s.execute().then(e=>e.data).then(o=>{return new p({method:h.DELETE,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,timeout:t.timeout}).execute().then(()=>{return new p({method:h.PUT,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.backendPathname}/${o._id}`}),properties:t.properties,timeout:t.timeout,body:o}).execute().then(e=>e.data)}).then(e=>{if(n){return new p({method:h.DELETE,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.backendPathname}/${r}`}),properties:t.properties,timeout:t.timeout}).execute().then(()=>e)}return e}).then(e=>{return{_id:r,operation:i,entity:e}})}).catch(e=>{o._id=r;return{_id:r,operation:i,entity:o,error:e}})}).catch(e=>{return{_id:r,operation:i,entity:void 0,error:e}})}return{_id:r,operation:i,entity:void 0,error:new d("Unable to sync the entity since the operation was not recognized.",e)}})).then(t=>(s=s.concat(t),a(r<e.length?o(s):s)))})};return o([])}return[]}).then(e=>(g.set(this.collection,!1),e)).catch(e=>{throw g.set(this.collection,!1),e}))}clear(e,t={}){return this.find(e,t).then(e=>n.all(i(e,e=>{return new p({method:h.DELETE,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e._id}`}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data)})))}}},function(e,t,r){const n=r(7),{CacheRequest:i,RequestMethod:o}=r(5),{KinveyError:s}=r(1),{Query:a}=r(10),{Aggregation:u}=r(23),{isDefined:c}=r(2),{KinveyObservable:h}=r(30),{CacheStore:l}=r(83);t.SyncStore=class extends l{get syncAutomatically(){return!1}find(e,t={}){return h.create(r=>{if(e&&!(e instanceof a))return r.error(new s("Invalid query. It must be an instance of the Query class."));return new i({method:o.GET,url:n.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))})}findById(e,t={}){return h.create(r=>{try{if(!1===c(e))return r.next(void 0),r.complete();return new i({method:o.GET,url:n.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}catch(e){return r.error(e)}})}group(e,t={}){return h.create(r=>{if(!(e instanceof u))return r.error(new s("Invalid aggregation. It must be an instance of the Aggregation class."));return new i({method:o.POST,url:n.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_group`}),properties:t.properties,aggregation:e,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))})}count(e,t={}){return h.create(r=>{try{if(e&&!(e instanceof a))throw new s("Invalid query. It must be an instance of the Query class.");return new i({method:o.GET,url:n.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),properties:t.properties,query:e,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e?e.length:0)).then(()=>r.complete()).catch(e=>r.error(e))}catch(e){return r.error(e)}})}}},function(e,t){t.WebStorage=class{constructor(e="kinvey"){this.name=e}get masterCollectionName(){return`${this.name}master`}}},function(e,t){const r={Kinvey:"kinvey",MobileIdentityConnect:"kinveyAuth"};Object.freeze(r),t.SocialIdentity=r},function(e,t,r){const{EventEmitter:n}=r(57);class i extends n{static get statusPrefix(){return"status:"}static get unclassifiedEvents(){return"pubNubEventsNotRouted"}message(e){this.emit(e.channel,e.message)}status(e){const t=this._getEventNamesFromStatus(e.affectedChannels,e.affectedChannelGroups);t.length?t.forEach(t=>{this.emit(`${i.statusPrefix}${t}`,e)}):this.emit(i.unclassifiedEvents,e)}_getEventNamesFromStatus(e,t){return(e||[]).concat(t||[])}}t.PubNubListener=i},function(e,t,r){const{Stream:n}=r(366),{StreamACL:i}=r(129);e.exports={Stream:n,StreamACL:i}},function(e,t,r){const n=r(3),i=r(265),{KinveyError:o}=r(1),{isNonemptyString:s}=r(33);class a{constructor(e){this.publishers=[],this.subscribers=[],this.publisherGroups=[],this.subscriberGroups=[],e&&(e instanceof a&&(e=e.toPlainObject()),this._parsePlainObject(e))}static isValidACLObject(e){try{return new a(e).isNotEmpty()}catch(e){return!1}}addPublishers(e){return this._addToAcl(this.publishers,e),this}addSubscribers(e){return this._addToAcl(this.subscribers,e),this}addPublisherGroups(e){return this._addToAcl(this.publisherGroups,e),this}addSubscriberGroups(e){return this._addToAcl(this.subscriberGroups,e),this}removePublishers(e){return this._removeFromAcl(this.publishers,e),this}removeSubscribers(e){return this._removeFromAcl(this.subscribers,e),this}removePublisherGroups(e){return this._removeFromAcl(this.publisherGroups,e),this}removeSubscriberGroups(e){return this._removeFromAcl(this.subscriberGroups,e),this}isNotEmpty(){return this.publishers.length||this.subscribers.length||this.publisherGroups.length||this.subscriberGroups.length}toPlainObject(){const e={};return this.subscribers.length&&(e.subscribe=this.subscribers.slice(0)),this.publishers.length&&(e.publish=this.publishers.slice(0)),this.subscriberGroups.length&&(e.groups=e.groups||{},e.groups.subscribe=this.addSubscriberGroups.slice(0)),this.publisherGroups.length&&(e.groups=e.groups||{},e.groups.publish=this.publisherGroups.slice(0)),e}_parsePlainObject(e){e.subscribe&&(this.subscribers=this._ensureValidIdArray(e.subscribe)),e.publish&&(this.publishers=this._ensureValidIdArray(e.publish)),e.groups&&(e.groups.publish&&(this.publisherGroups=this._ensureValidIdArray(e.groups.publish)),e.groups.subscribe&&(this.subscriberGroups=this._ensureValidIdArray(e.groups.subscribe)))}_ensureValidIdArray(e){if(!this._isValidIdArray(e))throw new o("Invalid ACL object value");return e}_isValidIdArray(e){return n(e)&&i(e,e=>{const t=this._getAsId(e);return s(t)})}_addToAcl(e,t){const r=n(t)?t:[t];if(!this._isValidIdArray(r))throw new o("Invalid ACL object value");r.forEach(t=>{const r=this._getAsId(t);e.push(r)})}_removeFromAcl(e,t){(n(t)?t:[t]).forEach(t=>{const r=this._getAsId(t),n=e.indexOf(r);n>=0&&e.splice(n,1)})}_getAsId(e){return e&&e._id?e._id:e}}t.StreamACL=a},function(e,t,r){(function(e){const n=r(7),i=r(113),{KinveyError:o}=r(1),{Query:s}=r(10),{Aggregation:a}=r(23),{isDefined:u}=r(2),{Request:c}=r(53),{KinveyResponse:h}=r(32),{CacheRack:l}=r(85);t.CacheRequest=class extends c{constructor(e={}){super(e),this.aggregation=e.aggregation,this.query=e.query,this.rack=l}get body(){return this._body}set body(e){this._body=i(e)}get query(){return this._query}set query(e){if(u(e)&&!(e instanceof s))throw new o("Invalid query. It must be an instance of the Query class.");this._query=e}get aggregation(){return this._aggregation}set aggregation(e){if(u(e)&&!(e instanceof a))throw new o("Invalid aggregation. It must be an instance of the Aggregation class.");this._aggregation=e}get url(){return super.url}set url(t){super.url=t;const r=e.decodeURIComponent(n.parse(t).pathname).replace(/^\//,"").split("/");this.appKey=r[1],this.collection=r[2],this.entityId=r[3]}execute(){return super.execute().then(e=>{if(e instanceof h||(e=new h({statusCode:e.statusCode,headers:e.headers,data:e.data})),!e.isSuccess())throw e.error;return u(this.query)&&u(e.data)&&(e.data=this.query.process(e.data)),u(this.aggregation)&&u(e.data)&&(e.data=this.aggregation.process(e.data)),e})}toPlainObject(){const e=super.toPlainObject();return e.appKey=this.appKey,e.collection=this.collection,e.entityId=this.entityId,e.encryptionKey=this.client?this.client.encryptionKey:void 0,e}}}).call(t,r(8))},function(e,t,r){const{CacheMiddleware:n}=r(375),{HttpMiddleware:i}=r(376),{Middleware:o}=r(31),{ParseMiddleware:s}=r(377),{SerializeMiddleware:a}=r(378),{Storage:u,MemoryAdapter:c}=r(132);e.exports={CacheMiddleware:n,HttpMiddleware:i,Middleware:o,ParseMiddleware:s,SerializeMiddleware:a,Storage:u,MemoryAdapter:c}},function(e,t,r){r(4);const n=r(6),i=r(3),{isDefined:o}=r(2),{Queue:s}=r(370),{Log:a}=r(16),{KinveyError:u,NotFoundError:c}=r(1),{MemoryAdapter:h}=r(379),l=new s(1,1/0);t.MemoryAdapter=h,t.Storage=class{constructor(e){if(!e)throw new u("Unable to create a Storage instance without a name.");if(!n(e))throw new u("The name is not a string. A name must be a string to create a Storage instance.");this.name=e}loadAdapter(){return Promise.resolve().then(()=>h.load(this.name)).then(e=>o(e)?e:Promise.reject(new u("Unable to load a storage adapter.")))}generateObjectId(e=24){const t="abcdef0123456789";let r="";for(let n=0,i=t.length;n<e;n+=1){const e=Math.floor(Math.random()*i);r+=t.substring(e,e+1)}return r}find(e){return this.loadAdapter().then(t=>(a.debug(`Find all the entities stored in the ${e} collection.`,t),t.find(e))).catch(t=>(a.error(`Unable to find all the entities stored in the ${e} collection.`,t),t instanceof c||404===t.code?[]:Promise.reject(t))).then((e=[])=>e)}findById(e,t){if(!n(t)){const r=new u("id must be a string",t);return a.error(`Unable to find an entity with id ${t} stored in the ${e} collection.`,r.message),Promise.reject(r)}return this.loadAdapter().then(r=>(a.debug(`Find an entity with id ${t} stored in the ${e} collection.`,r),r.findById(e,t)))}save(e,t=[]){return l.add(()=>{let r=!1;return o(t)?(i(t)||(r=!0,t=[t]),t=t.map(e=>{if(!o(e._id)){const t=e._kmd||{};t.local=!0,e._kmd=t,e._id=this.generateObjectId()}return e}),this.loadAdapter().then(r=>r.save(e,t)).then(e=>r&&e.length>0?e[0]:e)):Promise.resolve(null)})}remove(e,t=[]){return Promise.all(t.map(t=>o(t._id)?this.removeById(e,t._id):Promise.reject(new u("Unable to remove this entity because it does not have _id.")))).then(e=>e.reduce((e,t)=>(e.count+=t.count,e),{count:0}))}removeById(e,t){return l.add(()=>n(t)?this.loadAdapter().then(r=>r.removeById(e,t)):Promise.reject(new u("id must be a string",t)))}clear(){return l.add(()=>this.loadAdapter().then(e=>e.clear()))}}},function(e,t,r){const n=r(4),{Buffer:i}=r(143),o=r(80),s=r(13),a=r(263),u=r(47),c=r(7),h=r(6),{Client:l}=r(9),{Query:p}=r(10),{Aggregation:f}=r(23),{isDefined:d}=r(2),{appendQuery:y}=r(134),{InvalidCredentialsError:v,NoActiveUserError:m,KinveyError:g}=r(1),{Request:b,RequestMethod:_}=r(53),{Headers:w}=r(52),{NetworkRack:x}=r(85),{KinveyResponse:S}=r(32);class E extends b{constructor(e={}){super(e),this.rack=x}}t.NetworkRequest=E;const k={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",None:"None",Session:"Session"};Object.freeze(k),t.AuthType=k;const O={all:e=>O.session(e).catch(()=>O.basic(e)),app:e=>e.appKey&&e.appSecret?n.resolve({scheme:"Basic",username:e.appKey,password:e.appSecret}):n.reject(new Error("Missing client appKey and/or appSecret. Use Kinvey.initialize() to set the appKey and appSecret for the client.")),basic:e=>O.master(e).catch(()=>O.app(e)),master:e=>e.appKey&&e.masterSecret?n.resolve({scheme:"Basic",username:e.appKey,password:e.masterSecret}):n.reject(new Error("Missing client appKey and/or masterSecret. Use Kinvey.initialize() to set the appKey and masterSecret for the client.")),none:()=>n.resolve(null),session(e){const t=e.getActiveUser();return d(t)?n.resolve({scheme:"Kinvey",credentials:t._kmd.authtoken}):n.reject(new m("There is not an active user. Please login a user and retry the request."))}};class P extends w{}t.Properties=P,t.KinveyRequest=class e extends E{constructor(e={}){super(e),e=s({skipBL:!1,trace:!1},e),this.authType=e.authType||k.None,this.query=e.query,this.aggregation=e.aggregation,this.properties=e.properties||new P,this.skipBL=!0===e.skipBL,this.trace=!0===e.trace}static executeShort(t,r,n=!0){const i=s({method:_.GET,authType:k.Session},t);r=r||l.sharedInstance(),!i.url&&h(i.pathname)&&r&&(i.url=c.format({protocol:r.apiProtocol,host:r.apiHost,pathname:i.pathname}));let o=e.execute(i);return n&&(o=o.then(e=>e.data)),o}static execute(t){return new e(t).execute()}get appVersion(){return this.client.appVersion}get query(){return this._query}set query(e){if(d(e)&&!(e instanceof p))throw new g("Invalid query. It must be an instance of the Query class.");this._query=e}get aggregation(){return this._aggregation}set aggregation(e){if(d(e)&&!(e instanceof f))throw new g("Invalid aggregation. It must be an instance of the Aggregation class.");d(e)&&(this.body=e.toPlainObject()),this._aggregation=e}get headers(){const e=super.headers;if(e.has("Accept")||e.set("Accept","application/json; charset=utf-8"),e.has("Content-Type")||e.set("Content-Type","application/json; charset=utf-8"),e.has("X-Kinvey-Api-Version")||e.set("X-Kinvey-Api-Version",4),!0===this.skipBL?e.set("X-Kinvey-Skip-Business-Logic",!0):e.remove("X-Kinvey-Skip-Business-Logic"),!0===this.trace?(e.set("X-Kinvey-Include-Headers-In-Response","X-Kinvey-Request-Id"),e.set("X-Kinvey-ResponseWrapper",!0)):(e.remove("X-Kinvey-Include-Headers-In-Response"),e.remove("X-Kinvey-ResponseWrapper")),this.appVersion?e.set("X-Kinvey-Client-App-Version",this.appVersion):e.remove("X-Kinvey-Client-App-Version"),this.properties){const t=this.properties.toString();if(u(t))e.remove("X-Kinvey-Custom-Request-Properties");else{const r=function(e){if(e){let t=0;const r=e.length;e=String(e||"");for(let n=0;n<r;n+=1){const r=encodeURI(e[n]).split("%").length;t+=1===r?1:r-1}return t}return 0}(t);if(r>=2e3)throw new Error(`The custom properties are ${r} bytes.`+"It must be less then 2000 bytes.","Please remove some custom properties.");e.set("X-Kinvey-Custom-Request-Properties",t)}}else e.remove("X-Kinvey-Custom-Request-Properties");return e}set headers(e){super.headers=e}get url(){const e=super.url,t=this.query?this.query.toQueryString():{};return u(t)?e:y(e,o.stringify(t))}set url(e){super.url=e}get properties(){return this._properties}set properties(e){e&&e instanceof P==!1&&(e=new P(e)),this._properties=e}getAuthorizationHeader(){let e=n.resolve(void 0);if(this.authType)switch(this.authType){case k.All:e=O.all(this.client);break;case k.App:e=O.app(this.client);break;case k.Basic:e=O.basic(this.client);break;case k.Master:e=O.master(this.client);break;case k.None:e=O.none(this.client);break;case k.Session:e=O.session(this.client);break;default:e=O.session(this.client).catch(e=>O.master(this.client).catch(()=>{throw e}))}return e.then(e=>{if(d(e)){let t=e.credentials;return e.username&&(t=new i(`${e.username}:${e.password}`).toString("base64")),`${e.scheme} ${t}`}})}execute(t=!1,r=!0){return this.getAuthorizationHeader().then(e=>{d(e)?this.headers.set("Authorization",e):this.headers.remove("Authorization")}).then(()=>super.execute()).then(e=>{if(e instanceof S==!1&&(e=new S({statusCode:e.statusCode,headers:e.headers,data:e.data})),!1===t&&!1===e.isSuccess())throw e.error;return e}).catch(i=>{if(r&&i instanceof v){const r=this.client.getActiveUser();if(d(r)){const o=d(r._socialIdentity)?r._socialIdentity:{},s=Object.keys(o).find(e=>"kinveyAuth"===o[e].identity),u=o[s];if(d(u)){return new e({method:_.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:k.App,url:c.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/token"}),body:{grant_type:"refresh_token",client_id:u.client_id,redirect_uri:u.redirect_uri,refresh_token:u.refresh_token},properties:this.properties,timeout:this.timeout}).execute().then(e=>e.data).then(e=>(e.identity=u.identity,e.client_id=u.client_id,e.redirect_uri=u.redirect_uri,e.protocol=this.client.micProtocol,e.host=this.client.micHost,e)).then(t=>{const r={};o[t.identity]=t,r._socialIdentity=o;return new e({method:_.POST,authType:k.App,url:c.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`/user/${this.client.appKey}/login`}),properties:this.properties,body:r,timeout:this.timeout,client:this.client}).execute().then(e=>e.data).then(e=>(e._socialIdentity[t.identity]=a(e._socialIdentity[t.identity],t),this.client.setActiveUser(e)))}).then(()=>this.execute(t,!1)).catch(()=>n.reject(i))}}}return n.reject(i)})}}},function(e,t,r){function n(e,t={},r){const i=[];let o=!1;return a(e)&&l(r)&&(o=!0),Object.keys(e).forEach(s=>{let a;const c=e[s],h=r?`${r}[${o?"":s}]`:s;if(!1===l(c)){if(!0===t.removeNull)return;a=!0===t.encodeComponents?encodeURIComponent(h):h}else a=u(c)?n(c,t,h):t.encodeComponents?`${encodeURIComponent(h)}=${encodeURIComponent(c)}`:`${h}=${c}`;i.push(a)}),i.join("&")}const i=r(7),o=r(80),s=r(13),a=r(3),u=r(29),c=r(6),h=r(47),{isDefined:l}=r(2);t.appendQuery=function(e,t,r={}){const a=i.parse(e,!0),u=c(t)?o.parse(t):t,p=s({},a.query,u);r=s({encodeComponents:!0,removeNull:!1},r),a.query=null;const f=n(p,r);return a.search=l(f)&&!1===h(f)?`?${f}`:null,i.format(a)}},function(e,t){e.exports={private:!0,version:"3.9.2",name:"kinvey-html5-sdk",description:"Kinvey JavaScript SDK for HTML5 applications.",author:"Kinvey, Inc.",homepage:"http://www.kinvey.com",license:"Apache-2.0",main:"kinvey-html5-sdk.min.js",dependencies:{"fs-extra":"4.0.2","json-loader":"^0.5.4","kinvey-html5":"3.9.2","kinvey-html5-cache":"3.9.2","kinvey-html5-http":"3.9.2","kinvey-html5-popup":"3.9.2","kinvey-acl":"3.9.2","kinvey-aggregation":"3.9.2","kinvey-datastore":"3.9.2","kinvey-endpoint":"3.9.2","kinvey-errors":"3.9.2","kinvey-filestore":"3.9.2","kinvey-identity":"3.9.2","kinvey-live":"3.9.2","kinvey-log":"3.9.2","kinvey-metadata":"3.9.2","kinvey-query":"3.9.2","kinvey-user":"3.9.2","kinvey-request":"3.9.2",rimraf:"2.6.2","uglifyjs-webpack-plugin":"1.0.1",webpack:"^2.5.1"},scripts:{prebuild:"rimraf dist",build:"webpack --config webpack.config.js",postbuild:"node scripts/postbuild"}}},function(e,t,r){e.exports=r(310)},function(e,t,r){e.exports=r(347)},function(e,t,r){e.exports=r(348)},function(e,t,r){e.exports=r(355)},function(e,t,r){e.exports=r(356)},function(e,t,r){e.exports=r(359)},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}t.byteLength=function(e){return 3*e.length/4-n(e)},t.toByteArray=function(e){var t,r,i,a,u,c=e.length;a=n(e),u=new s(3*c/4-a),r=a>0?c-4:c;var h=0;for(t=0;t<r;t+=4)i=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],u[h++]=i>>16&255,u[h++]=i>>8&255,u[h++]=255&i;return 2===a?(i=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,u[h++]=255&i):1===a&&(i=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,u[h++]=i>>8&255,u[h++]=255&i),u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o="",s=[],a=0,u=r-n;a<u;a+=16383)s.push(function(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(function(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}(n));return o.join("")}(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],o+=i[t>>2],o+=i[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=i[t>>10],o+=i[t>>4&63],o+=i[t<<2&63],o+="="),s.push(o),s.join("")};for(var i=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)i[u]=a[u],o[a.charCodeAt(u)]=u;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=o.prototype:(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);o.TYPED_ARRAY_SUPPORT?(e=t).__proto__=o.prototype:e=c(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|l(t,r),s=(e=i(e,n)).write(t,r);s!==n&&(e=e.slice(0,s));return e}(e,t,r):function(e,t){if(o.isBuffer(t)){var r=0|h(t.length);return 0===(e=i(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?i(e,0):c(e,t);if("Buffer"===t.type&&T(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(a(t),e=i(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t){var r=t.length<0?0:0|h(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function l(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(n)return E(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function f(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):d(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(i){var h=-1;for(c=r;c<a;c++)if(o(e,c)===o(t,-1===h?0:c-h)){if(-1===h&&(h=c),c-h+1===u)return h*s}else-1!==h&&(c-=c-h),h=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var l=!0,p=0;p<u;p++)if(o(e,c+p)!==o(t,p)){l=!1;break}if(l)return c}return-1}function y(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,h,l;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=e[i+1]))&&(l=(31&o)<<6|63&u)>127&&(s=l);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:u=e[i+1],c=e[i+2],h=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&h)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&h)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}function m(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function g(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function b(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function _(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function w(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,i){return i||w(e,0,r,4),A.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,i){return i||w(e,0,r,8),A.write(e,t,r,n,52,8),r+8}function E(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function k(e){return P.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}var P=r(142),A=r(147),T=r(148);t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return function(e,t,r,n){return a(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}(null,e,t,r)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!T(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return function(e,t,r){return 0===t&&r===e.length?P.fromByteArray(e):P.fromByteArray(e.slice(t,r))}(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,a=r-t,u=Math.min(s,a),c=this.slice(n,i),h=e.slice(t,r),l=0;l<u;++l)if(c[l]!==h[l]){s=c[l],a=h[l];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return f(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return f(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}(this,e,t,r);case"utf8":case"utf-8":return function(e,t,r,n){return O(E(t,e.length-r),e,r,n)}(this,e,t,r);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return function(e,t,r,n){return y(e,t,r,n)}(this,e,t,r);case"base64":return function(e,t,r,n){return O(k(t),e,r,n)}(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r,n){return O(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||m(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||m(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||m(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||m(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||m(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||m(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||m(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||m(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||m(e,4,this.length),A.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||m(e,4,this.length),A.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||m(e,8,this.length),A.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||m(e,8,this.length),A.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){g(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){g(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):b(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);g(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);g(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):b(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):b(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||g(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:E(new o(e,n).toString()),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var j=/[^+\/0-9A-Za-z-_]/g}).call(t,r(8))},function(e,t,r){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},i=t||{},s=e.split(o),a=i.decode||n,u=0;u<s.length;u++){var c=s[u],h=c.indexOf("=");if(!(h<0)){var l=c.substr(0,h).trim(),p=c.substr(++h,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==r[l]&&(r[l]=function(e,t){try{return t(e)}catch(t){return e}}(p,a))}}return r},t.serialize=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(c)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(u+="; HttpOnly"),n.secure&&(u+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return u};var n=decodeURIComponent,i=encodeURIComponent,o=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,r){var n=r(88);e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===i.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&t.call(r,e[n],n,e)}(e,t,r):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}(e,t,r):function(e,t,r){for(var n in e)o.call(e,n)&&t.call(r,e[n],n,e)}(e,t,r)};var i=Object.prototype.toString,o=Object.prototype.hasOwnProperty},function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(8))},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,p=r?-1:1,f=e[t+l];for(l+=p,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+e[t+l],l+=p,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+e[t+l],l+=p,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=c}return(f?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+f]=255&s,f+=d,s/=256,c-=8);e[r+f-d]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return n(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:void 0}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var i=n(r(151)),o=n(r(89)),s=n(r(149)),a=null;(0,i.default)("localStorage")?t.storage=a=window.localStorage:(0,i.default)("sessionStorage")?t.storage=a=window.sessionStorage:(0,i.default)("cookieStorage")?t.storage=a=new o.default:t.storage=a=new s.default,t.default=a,t.storage=a,t.isSupported=i.default,t.CookieStorage=o.default,t.MemoryStorage=s.default},function(e,t,r){"use strict";function n(e){try{var t=window[e];return t.setItem(o,"1"),t.removeItem(o),!0}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(89),o="__test"},function(e,t,r){var n=r(22)(r(11),"DataView");e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=r(221),o=r(222),s=r(223),a=r(224),u=r(225);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=s,n.prototype.has=a,n.prototype.set=u,e.exports=n},function(e,t,r){var n=r(22)(r(11),"Promise");e.exports=n},function(e,t,r){var n=r(22)(r(11),"Set");e.exports=n},function(e,t,r){var n=r(22)(r(11),"WeakMap");e.exports=n},function(e,t){e.exports=function(e,t){return e.set(t[0],t[1]),e}},function(e,t){e.exports=function(e,t){return e.add(t),e}},function(e,t){e.exports=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}},function(e,t,r){var n=r(176);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},function(e,t){e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t,r){var n=r(26);e.exports=function(e,t,r,i){return n(e,function(e,n,o){t(i,e,r(e),o)}),i}},function(e,t,r){var n=r(21),i=r(20);e.exports=function(e,t){return e&&n(t,i(t),e)}},function(e,t,r){var n=r(21),i=r(49);e.exports=function(e,t){return e&&n(t,i(t),e)}},function(e,t,r){function n(e,t,r,j,I,R){var M,q=t&S,U=t&E,N=t&k;if(r&&(M=I?r(e,j,I,R):r(e)),void 0!==M)return M;if(!w(e))return e;var D=b(e);if(D){if(M=v(e),!q)return h(e,M)}else{var L=y(e),$=L==P||L==A;if(_(e))return c(e,q);if(L==T||L==O||$&&!I){if(M=U||$?{}:g(e),!q)return U?p(e,u(M,e)):l(e,a(M,e))}else{if(!C[L])return I?e:{};M=m(e,L,n,q)}}R||(R=new i);var K=R.get(e);if(K)return K;R.set(e,M);var B=N?U?d:f:U?keysIn:x,F=D?void 0:B(e);return o(F||e,function(i,o){F&&(i=e[o=i]),s(M,o,n(i,t,r,o,e,R))}),M}var i=r(60),o=r(93),s=r(63),a=r(166),u=r(167),c=r(198),h=r(205),l=r(206),p=r(207),f=r(104),d=r(216),y=r(71),v=r(226),m=r(227),g=r(228),b=r(3),_=r(46),w=r(12),x=r(20),S=1,E=2,k=4,O="[object Arguments]",P="[object Function]",A="[object GeneratorFunction]",T="[object Object]",C={};C[O]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[T]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[P]=C["[object WeakMap]"]=!1,e.exports=n},function(e,t,r){var n=r(12),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},function(e,t,r){var n=r(90),i=r(162),o=r(163),s=r(37),a=r(99),u=r(100),c=200;e.exports=function(e,t,r,h){var l=-1,p=i,f=!0,d=e.length,y=[],v=t.length;if(!d)return y;r&&(t=s(t,a(r))),h?(p=o,f=!1):t.length>=c&&(p=u,f=!1,t=new n(t));e:for(;++l<d;){var m=e[l],g=null==r?m:r(m);if(m=h||0!==m?m:0,f&&g==g){for(var b=v;b--;)if(t[b]===g)continue e;y.push(m)}else p(t,g,h)||y.push(m)}return y}},function(e,t,r){var n=r(26);e.exports=function(e,t){var r=!0;return n(e,function(e,n,i){return r=!!t(e,n,i)}),r}},function(e,t,r){function n(e,t,r,s,a){var u=-1,c=e.length;for(r||(r=o),a||(a=[]);++u<c;){var h=e[u];t>0&&r(h)?t>1?n(h,t-1,r,s,a):i(a,h):s||(a[a.length]=h)}return a}var i=r(61),o=r(229);e.exports=n},function(e,t,r){var n=r(211)();e.exports=n},function(e,t,r){var n=r(173),i=r(20);e.exports=function(e,t){return e&&n(e,t,i)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(95),i=r(180),o=r(258);e.exports=function(e,t,r){return t==t?o(e,t,r):n(e,i,r)}},function(e,t,r){var n=r(17),i=r(15),o="[object Arguments]";e.exports=function(e){return i(e)&&n(e)==o}},function(e,t,r){var n=r(60),i=r(102),o=r(214),s=r(215),a=r(71),u=r(3),c=r(46),h=r(75),l=1,p="[object Arguments]",f="[object Array]",d="[object Object]",y=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,v,m,g){var b=u(e),_=u(t),w=b?f:a(e),x=_?f:a(t),S=(w=w==p?d:w)==d,E=(x=x==p?d:x)==d,k=w==x;if(k&&c(e)){if(!c(t))return!1;b=!0,S=!1}if(k&&!S)return g||(g=new n),b||h(e)?i(e,t,r,v,m,g):o(e,t,w,r,v,m,g);if(!(r&l)){var O=S&&y.call(e,"__wrapped__"),P=E&&y.call(t,"__wrapped__");if(O||P){var A=O?e.value():e,T=P?t.value():t;return g||(g=new n),m(A,T,r,v,g)}}return!!k&&(g||(g=new n),s(e,t,r,v,m,g))}},function(e,t,r){var n=r(60),i=r(97),o=1,s=2;e.exports=function(e,t,r,a){var u=r.length,c=u,h=!a;if(null==e)return!c;for(e=Object(e);u--;){var l=r[u];if(h&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++u<c;){var p=(l=r[u])[0],f=e[p],d=l[1];if(h&&l[2]){if(void 0===f&&!(p in e))return!1}else{var y=new n;if(a)var v=a(f,d,p,e,t,y);if(!(void 0===v?i(d,f,o|s,a,y):v))return!1}}return!0}},function(e,t){e.exports=function(e){return e!=e}},function(e,t,r){var n=r(19),i=r(231),o=r(12),s=r(112),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,h=u.toString,l=c.hasOwnProperty,p=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?p:a).test(s(e))}},function(e,t,r){var n=r(17),i=r(73),o=r(15),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[n(e)]}},function(e,t,r){var n=r(12),i=r(27),o=r(244),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=i(e),r=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&r.push(a);return r}},function(e,t,r){var n=r(26),i=r(14);e.exports=function(e,t){var r=-1,o=i(e)?Array(e.length):[];return n(e,function(e,n,i){o[++r]=t(e,n,i)}),o}},function(e,t,r){var n=r(179),i=r(217),o=r(109);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(97),i=r(269),o=r(270),s=r(72),a=r(107),u=r(109),c=r(25),h=1,l=2;e.exports=function(e,t){return s(e)&&a(t)?u(c(e),t):function(r){var s=i(r,e);return void 0===s&&s===t?o(r,e):n(t,s,h|l)}}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(65);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t,r){var n=r(195),i=r(41),o=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,s=r-1;r--;){var a=t[r];if(r==s||a!==u){var u=a;i(a)?o.call(e,a,1):n(e,a)}}return e}},function(e,t){e.exports=function(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}},function(e,t,r){var n=r(262),i=r(101),o=r(44),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=s},function(e,t){e.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){function n(e){if("string"==typeof e)return e;if(s(e))return o(e,n)+"";if(a(e))return h?h.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var i=r(24),o=r(37),s=r(3),a=r(48),u=1/0,c=i?i.prototype:void 0,h=c?c.toString:void 0;e.exports=n},function(e,t,r){var n=r(39),i=r(114),o=r(248),s=r(25);e.exports=function(e,t){return t=n(t,e),null==(e=o(e,t))||delete e[s(i(t))]}},function(e,t,r){var n=r(37);e.exports=function(e,t){return n(t,function(t){return e[t]})}},function(e,t,r){var n=r(44);e.exports=function(e){return"function"==typeof e?e:n}},function(e,t,r){(function(e){var n=r(11),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(t,r(50)(e))},function(e,t,r){var n=r(67);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},function(e,t,r){var n=r(157),i=r(62),o=r(108),s=1;e.exports=function(e,t,r){var a=t?r(o(e),s):o(e);return i(a,n,new e.constructor)}},function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,r){var n=r(158),i=r(62),o=r(111),s=1;e.exports=function(e,t,r){var a=t?r(o(e),s):o(e);return i(a,n,new e.constructor)}},function(e,t,r){var n=r(24),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,r){var n=r(67);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(21),i=r(70);e.exports=function(e,t){return n(e,i(e),t)}},function(e,t,r){var n=r(21),i=r(105);e.exports=function(e,t){return n(e,i(e),t)}},function(e,t,r){var n=r(11)["__core-js_shared__"];e.exports=n},function(e,t,r){var n=r(159),i=r(165),o=r(18),s=r(3);e.exports=function(e,t){return function(r,a){var u=s(r)?n:i,c=t?t():{};return u(r,e,o(a,2),c)}}},function(e,t,r){var n=r(14);e.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var o=r.length,s=t?o:-1,a=Object(r);(t?s--:++s<o)&&!1!==i(a[s],s,a););return r}}},function(e,t){e.exports=function(e){return function(t,r,n){for(var i=-1,o=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===r(o[u],u,o))break}return t}}},function(e,t,r){var n=r(18),i=r(14),o=r(20);e.exports=function(e){return function(t,r,s){var a=Object(t);if(!i(t)){var u=n(r,3);t=o(t),r=function(e){return u(a[e],e,a)}}var c=e(t,r,s);return c>-1?a[u?t[c]:c]:void 0}}},function(e,t,r){var n=r(28),i=Object.prototype,o=i.hasOwnProperty;e.exports=function(e,t,r,s){return void 0===e||n(e,i[r])&&!o.call(s,r)?t:e}},function(e,t,r){var n=r(24),i=r(91),o=r(28),s=r(102),a=r(108),u=r(111),c=1,h=2,l="[object Boolean]",p="[object Date]",f="[object Error]",d="[object Map]",y="[object Number]",v="[object RegExp]",m="[object Set]",g="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",x=n?n.prototype:void 0,S=x?x.valueOf:void 0;e.exports=function(e,t,r,n,x,E,k){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!E(new i(e),new i(t)));case l:case p:case y:return o(+e,+t);case f:return e.name==t.name&&e.message==t.message;case v:case g:return e==t+"";case d:var O=a;case m:var P=n&c;if(O||(O=u),e.size!=t.size&&!P)return!1;var A=k.get(e);if(A)return A==t;n|=h,k.set(e,t);var T=s(O(e),O(t),n,x,E,k);return k.delete(e),T;case b:if(S)return S.call(e)==S.call(t)}return!1}},function(e,t,r){var n=r(104),i=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,s,a,u){var c=r&i,h=n(e),l=h.length;if(l!=n(t).length&&!c)return!1;for(var p=l;p--;){var f=h[p];if(!(c?f in t:o.call(t,f)))return!1}var d=u.get(e);if(d&&u.get(t))return d==t;var y=!0;u.set(e,t),u.set(t,e);for(var v=c;++p<l;){var m=e[f=h[p]],g=t[f];if(s)var b=c?s(g,m,f,t,e,u):s(m,g,f,e,t,u);if(!(void 0===b?m===g||a(m,g,r,s,u):b)){y=!1;break}v||(v="constructor"==f)}if(y&&!v){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(y=!1)}return u.delete(e),u.delete(t),y}},function(e,t,r){var n=r(96),i=r(105),o=r(49);e.exports=function(e){return n(e,o,i)}},function(e,t,r){var n=r(107),i=r(20);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var o=t[r],s=e[o];t[r]=[o,s,n(s)]}return t}},function(e,t,r){var n=r(24),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[a]=r:delete e[a]),i}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(39),i=r(45),o=r(3),s=r(41),a=r(73),u=r(25);e.exports=function(e,t,r){for(var c=-1,h=(t=n(t,e)).length,l=!1;++c<h;){var p=u(t[c]);if(!(l=null!=e&&r(e,p)))break;e=e[p]}return l||++c!=h?l:!!(h=null==e?0:e.length)&&a(h)&&s(p,h)&&(o(e)||i(e))}},function(e,t,r){var n=r(42);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(42),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(42),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},function(e,t,r){var n=r(42),i="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?i:t,this}},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,r){var n=r(67),i=r(199),o=r(200),s=r(201),a=r(202),u=r(203),c=r(204),h="[object Boolean]",l="[object Date]",p="[object Map]",f="[object Number]",d="[object RegExp]",y="[object Set]",v="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",A="[object Uint32Array]";e.exports=function(e,t,r,T){var C=e.constructor;switch(t){case g:return n(e);case h:case l:return new C(+e);case b:return i(e,T);case _:case w:case x:case S:case E:case k:case O:case P:case A:return c(e,T);case p:return o(e,T,r);case f:case v:return new C(e);case d:return s(e);case y:return a(e,T,r);case m:return u(e)}}},function(e,t,r){var n=r(169),i=r(69),o=r(27);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},function(e,t,r){var n=r(24),i=r(45),o=r(3),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(208),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(38),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},function(e,t,r){var n=r(38);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(38);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(38);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},function(e,t,r){var n=r(153),i=r(36),o=r(58);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},function(e,t,r){var n=r(40);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,r){var n=r(40);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(40);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(40);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},function(e,t,r){var n=r(274),i=500;e.exports=function(e){var t=n(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=r(110)(Object.keys,Object);e.exports=n},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){(function(e){var n=r(103),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&n.process,a=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(t,r(50)(e))},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n=r(92),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),u=Array(a);++s<a;)u[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=r(u),n(e,this,c)}}},function(e,t,r){var n=r(65),i=r(192);e.exports=function(e,t){return t.length<2?e:n(e,i(t,0,-1))}},function(e,t){var r="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,r),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(191),i=r(252)(n);e.exports=i},function(e,t){var r=800,n=16,i=Date.now;e.exports=function(e){var t=0,o=0;return function(){var s=i(),a=n-(s-o);if(o=s,a>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(36);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(36),i=r(58),o=r(59),s=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<s-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},function(e,t){e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},function(e,t,r){var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r(242)(function(e){var t=[];return n.test(e)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(o,"$1"):r||e)}),t});e.exports=s},function(e,t,r){var n=r(21),i=r(68),o=r(49),s=i(function(e,t){n(t,o(t),e)});e.exports=s},function(e,t,r){var n=r(21),i=r(68),o=r(49),s=i(function(e,t,r,i){n(t,o(t),e,i)});e.exports=s},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var n=r(92),i=r(261),o=r(66),s=r(213),a=o(function(e){return e.push(void 0,s),n(i,void 0,e)});e.exports=a},function(e,t,r){var n=r(170),i=r(172),o=r(18),s=r(66),a=r(271),u=r(114),c=s(function(e,t){var r=u(t);return a(r)&&(r=void 0),a(e)?n(e,i(t,1,a,!0),o(r,2)):[]});e.exports=c},function(e,t,r){var n=r(160),i=r(171),o=r(18),s=r(3),a=r(106);e.exports=function(e,t,r){var u=s(e)?n:i;return r&&a(e,t,r)&&(t=void 0),u(e,o(t,3))}},function(e,t,r){e.exports=r(260)},function(e,t,r){var n=r(212)(r(268));e.exports=n},function(e,t,r){var n=r(95),i=r(18),o=r(279),s=Math.max;e.exports=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var u=null==r?0:o(r);return u<0&&(u=s(a+u,0)),n(e,i(t,3),u)}},function(e,t,r){var n=r(65);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},function(e,t,r){var n=r(175),i=r(220);e.exports=function(e,t){return null!=e&&i(e,t,n)}},function(e,t,r){var n=r(14),i=r(15);e.exports=function(e){return i(e)&&n(e)}},function(e,t){e.exports=function(e){return null===e}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(n.Cache||i),r}var i=r(59),o="Expected a function";n.Cache=i,e.exports=n},function(e,t,r){var n=r(187),i=r(188),o=r(72),s=r(25);e.exports=function(e){return o(e)?n(s(e)):i(e)}},function(e,t,r){var n=r(18),i=r(189);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var o=-1,s=[],a=e.length;for(t=n(t,3);++o<a;){var u=e[o];t(u,o,e)&&(r.push(u),s.push(o))}return i(e,s),r}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(280),i=1/0,o=1.7976931348623157e308;e.exports=function(e){if(!e)return 0===e?e:0;if((e=n(e))===i||e===-i)return(e<0?-1:1)*o;return e==e?e:0}},function(e,t,r){var n=r(278);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},function(e,t,r){var n=r(12),i=r(48),o=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=u.test(e);return r||c.test(e)?h(e.slice(2),r?2:8):a.test(e)?o:+e}},function(e,t,r){var n=r(194);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n,i;!function(o,s){"use strict";void 0!==(i="function"==typeof(n=s)?n.call(t,r,t,e):n)&&(e.exports=i)}(0,function(){"use strict";function e(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function t(e,t){for(var r=0;r<o.length;r++){var i=o[r];this[i]=r<e?n:this.methodFactory(i,e,t)}this.log=this.debug}function r(r,s,a){function u(){var e;if(typeof window!==i){try{e=window.localStorage[l]}catch(e){}if(typeof e===i)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(l)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===h.levels[e]&&(e=void 0),e}}var c,h=this,l="loglevel";r&&(l+=":"+r),h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=a||function(r,o,s){return function(t){return"debug"===t&&(t="log"),typeof console!==i&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):n)}(r)||function(e,r,n){return function(){typeof console!==i&&(t.call(this,r,n),this[e].apply(this,arguments))}}.apply(this,arguments)},h.getLevel=function(){return c},h.setLevel=function(e,n){if("string"==typeof e&&void 0!==h.levels[e.toUpperCase()]&&(e=h.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=h.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(c=e,!1!==n&&function(e){var t=(o[e]||"silent").toUpperCase();if(typeof window!==i){try{return void(window.localStorage[l]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+t+";"}catch(e){}}}(e),t.call(h,e,r),typeof console===i&&e<h.levels.SILENT)return"No console available for logging"},h.setDefaultLevel=function(e){u()||h.setLevel(e,!1)},h.enableAll=function(e){h.setLevel(h.levels.TRACE,e)},h.disableAll=function(e){h.setLevel(h.levels.SILENT,e)};var p=u();null==p&&(p=null==s?"WARN":s),h.setLevel(p,!1)}var n=function(){},i="undefined",o=["trace","debug","info","warn","error"],s=new r,a={};s.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=a[e];return t||(t=a[e]=new r(e,s.getLevel(),s.methodFactory)),t};var u=typeof window!==i?window.log:void 0;return s.noConflict=function(){return typeof window!==i&&window.log===s&&(window.log=u),s},s})},function(e,t,r){var n=r(301),i=r(145);e.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),o=n(e.slice(r+1));void 0===t[i]?t[i]=o:!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t[i])?t[i]=[t[i],o]:t[i].push(o)}),t}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){if(!f){var e=i(function(){f&&l&&(f=!1,l.length?p=l.concat(p):d=-1,p.length&&o())});f=!0;for(var t=p.length;t;){for(l=p,p=[];++d<t;)l&&l[d].run();d=-1,t=p.length}l=null,f=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var u,c,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var l,p=[],f=!1,d=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new s(e,t)),1!==p.length||f||i(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(1)),o=n(r(39)),s=n(r(40)),a=r(41),u=(r(5),function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.listenToBrowserNetworkEvents,n=void 0===r||r;e.db=s.default,e.sdkFamily="Web",e.networking=new o.default({del:a.del,get:a.get,post:a.post,sendBeacon:function(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}});var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n&&(window.addEventListener("offline",function(){i.networkDownDetected()}),window.addEventListener("online",function(){i.networkUpDetected()})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}());t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=i(r(2)),a=i(r(6)),u=i(r(8)),c=i(r(9)),h=i(r(16)),l=n(r(17)),p=n(r(18)),f=n(r(19)),d=n(r(20)),y=n(r(21)),v=n(r(22)),m=n(r(23)),g=n(r(24)),b=n(r(25)),_=n(r(26)),w=n(r(27)),x=n(r(28)),S=n(r(29)),E=n(r(30)),k=n(r(31)),O=n(r(32)),P=n(r(33)),A=n(r(34)),T=n(r(35)),C=n(r(36)),j=n(r(37)),I=n(r(12)),R=n(r(38)),M=i(r(13)),q=i(r(10)),U=i((r(5),r(3))),N=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.db,i=t.networking,o=this._config=new s.default({setup:t,db:n}),M=new a.default({config:o});i.init(o);var q={config:o,networking:i,crypto:M},U=h.default.bind(this,q,I),N=h.default.bind(this,q,_),D=h.default.bind(this,q,x),L=h.default.bind(this,q,E),$=h.default.bind(this,q,R),K=this._listenerManager=new c.default,B=new u.default({timeEndpoint:U,leaveEndpoint:N,heartbeatEndpoint:D,setStateEndpoint:L,subscribeEndpoint:$,crypto:q.crypto,config:q.config,listenerManager:K});this.addListener=K.addListener.bind(K),this.removeListener=K.removeListener.bind(K),this.removeAllListeners=K.removeAllListeners.bind(K),this.channelGroups={listGroups:h.default.bind(this,q,d),listChannels:h.default.bind(this,q,y),addChannels:h.default.bind(this,q,l),removeChannels:h.default.bind(this,q,p),deleteGroup:h.default.bind(this,q,f)},this.push={addChannels:h.default.bind(this,q,v),removeChannels:h.default.bind(this,q,m),deleteDevice:h.default.bind(this,q,b),listChannels:h.default.bind(this,q,g)},this.hereNow=h.default.bind(this,q,k),this.whereNow=h.default.bind(this,q,w),this.getState=h.default.bind(this,q,S),this.setState=B.adaptStateChange.bind(B),this.grant=h.default.bind(this,q,P),this.audit=h.default.bind(this,q,O),this.publish=h.default.bind(this,q,A),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,r.publish(e,t)},this.history=h.default.bind(this,q,T),this.deleteMessages=h.default.bind(this,q,C),this.fetchMessages=h.default.bind(this,q,j),this.time=U,this.subscribe=B.adaptSubscribeChange.bind(B),this.unsubscribe=B.adaptUnsubscribeChange.bind(B),this.disconnect=B.disconnect.bind(B),this.reconnect=B.reconnect.bind(B),this.destroy=function(e){B.unsubscribeAll(e),B.disconnect()},this.stop=this.destroy,this.unsubscribeAll=B.unsubscribeAll.bind(B),this.getSubscribedChannels=B.getSubscribedChannels.bind(B),this.getSubscribedChannelGroups=B.getSubscribedChannelGroups.bind(B),this.encrypt=M.encrypt.bind(M),this.decrypt=M.decrypt.bind(M),this.getAuthKey=q.config.getAuthKey.bind(q.config),this.setAuthKey=q.config.setAuthKey.bind(q.config),this.setCipherKey=q.config.setCipherKey.bind(q.config),this.getUUID=q.config.getUUID.bind(q.config),this.setUUID=q.config.setUUID.bind(q.config),this.getFilterExpression=q.config.getFilterExpression.bind(q.config),this.setFilterExpression=q.config.setFilterExpression.bind(q.config),this.setHeartbeatInterval=q.config.setHeartbeatInterval.bind(q.config)}return o(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return U.default.createUUID()}}]),e}();N.OPERATIONS=M.default,N.CATEGORIES=q.default,t.default=N,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(r(3)),o=(r(5),function(){function e(t){var r=t.setup,n=t.db;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._db=n,this.instanceId="pn-"+i.default.createUUID(),this.secretKey=r.secretKey||r.secret_key,this.subscribeKey=r.subscribeKey||r.subscribe_key,this.publishKey=r.publishKey||r.publish_key,this.sdkFamily=r.sdkFamily,this.partnerId=r.partnerId,this.setAuthKey(r.authKey),this.setCipherKey(r.cipherKey),this.setFilterExpression(r.filterExpression),this.origin=r.origin||"pubsub.pndsn.com",this.secure=r.ssl||!1,this.restore=r.restore||!1,this.proxy=r.proxy,this.keepAlive=r.keepAlive,this.keepAliveSettings=r.keepAliveSettings,this.autoNetworkDetection=r.autoNetworkDetection||!1,this.dedupeOnSubscribe=r.dedupeOnSubscribe||!1,this.maximumCacheSize=r.maximumCacheSize||100,this.customEncrypt=r.customEncrypt,this.customDecrypt=r.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=r.logVerbosity||!1,this.suppressLeaveEvents=r.suppressLeaveEvents||!1,this.announceFailedHeartbeats=r.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=r.announceSuccessfulHeartbeats||!1,this.useInstanceId=r.useInstanceId||!1,this.useRequestId=r.useRequestId||!1,this.requestMessageCountThreshold=r.requestMessageCountThreshold,this.setTransactionTimeout(r.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(r.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(r.useSendBeacon||!0),this.setPresenceTimeout(r.presenceTimeout||300),null!=r.heartbeatInterval&&this.setHeartbeatInterval(r.heartbeatInterval),this.setUUID(this._decideUUID(r.uuid))}return n(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.17.0"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+i.default.createUUID())}}]),e}());t.default=o,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(4));t.default={createUUID:function(){return n.default.uuid?n.default.uuid():(0,n.default)()}},e.exports=t.default},function(e,t,r){var n,i,o;i=[t],void 0!==(o="function"==typeof(n=function(e){function t(){var e,t,r="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(r+="-"),r+=(12===e?4:16===e?3&t|8:t).toString(16);return r}function r(e,t){var r=n[t||"all"];return r&&r.test(e)||!1}var n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.isUUID=r,t.VERSION="0.1.0",e.uuid=t,e.isUUID=r})?n.apply(t,i):n)&&(e.exports=o)},function(e,t){"use strict";e.exports={}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=n((n(r(2)),r(7))),s=function(){function e(t){var r=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._config=r,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return i(e,[{key:"HMACSHA256",value:function(e){return o.default.HmacSHA256(e,this._config.secretKey).toString(o.default.enc.Base64)}},{key:"SHA256",value:function(e){return o.default.SHA256(e).toString(o.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?o.default.enc.Base64.parse(e):"hex"===t.keyEncoding?o.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?o.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?o.default.mode.ECB:o.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?o.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,r){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,r)}},{key:"decrypt",value:function(e,t,r){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,r)}},{key:"pnEncrypt",value:function(e,t,r){if(!t&&!this._config.cipherKey)return e;r=this._parseOptions(r);var n=this._getIV(r),i=this._getMode(r),s=this._getPaddedKey(t||this._config.cipherKey,r);return o.default.AES.encrypt(e,s,{iv:n,mode:i}).ciphertext.toString(o.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,r){if(!t&&!this._config.cipherKey)return e;r=this._parseOptions(r);var n=this._getIV(r),i=this._getMode(r),s=this._getPaddedKey(t||this._config.cipherKey,r);try{var a=o.default.enc.Base64.parse(e),u=o.default.AES.decrypt({ciphertext:a},s,{iv:n,mode:i}).toString(o.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=s,e.exports=t.default},function(e,t){"use strict";var r=r||function(e,t){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var i=0;i<e;i++)t[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<e;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),a=r.enc={},u=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},h=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=i/(4*o);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,i=e.min(4*t,i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(n,u);u=n.splice(0,t),r.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}});var p=r.algo={};return r}(Math);!function(e){for(var t=r,n=(o=t.lib).WordArray,i=o.Hasher,o=t.algo,s=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,h=0;64>h;){var l;e:{l=c;for(var p=e.sqrt(l),f=2;f<=p;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(8>h&&(s[h]=u(e.pow(c,.5))),a[h]=u(e.pow(c,1/3)),h++),c++}var d=[],o=o.SHA256=i.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=r[6],l=r[7],p=0;64>p;p++){if(16>p)d[p]=0|e[t+p];else{var f=d[p-15],y=d[p-2];d[p]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+d[p-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+d[p-16]}f=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&h)+a[p]+d[p],y=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&o^i&o),l=h,h=c,c=u,u=s+f|0,s=o,o=i,i=n,n=f+y|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+u|0,r[5]=r[5]+c|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(o),t.HmacSHA256=i._createHmacHelper(o)}(Math),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,i=4*n;r.sigBytes>i&&(r=e.finalize(r)),r.clamp();for(var o=this._oKey=r.clone(),s=this._iKey=r.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=r,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<r;s++)e.push(n.charAt(o>>>6*(3-s)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map;(i=n.charAt(64))&&-1!=(i=e.indexOf(i))&&(r=i);for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n.indexOf(e.charAt(s-1))<<s%4*2,u=n.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,n,i,o,s){return((e=e+(t&r|~t&n)+i+s)<<o|e>>>32-o)+t}function n(e,t,r,n,i,o,s){return((e=e+(t&n|r&~n)+i+s)<<o|e>>>32-o)+t}function i(e,t,r,n,i,o,s){return((e=e+(t^r^n)+i+s)<<o|e>>>32-o)+t}function o(e,t,r,n,i,o,s){return((e=e+(r^(t|~n))+i+s)<<o|e>>>32-o)+t}for(var s=r,a=(c=s.lib).WordArray,u=c.Hasher,c=s.algo,h=[],l=0;64>l;l++)h[l]=4294967296*e.abs(e.sin(l+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(s=0;16>s;s++){u=e[a=r+s];e[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=e[r+0],u=e[r+1],c=e[r+2],l=e[r+3],p=e[r+4],f=e[r+5],d=e[r+6],y=e[r+7],v=e[r+8],m=e[r+9],g=e[r+10],b=e[r+11],_=e[r+12],w=e[r+13],x=e[r+14],S=e[r+15],E=s[0],k=s[1],O=s[2],P=s[3],k=o(k=o(k=o(k=o(k=i(k=i(k=i(k=i(k=n(k=n(k=n(k=n(k=t(k=t(k=t(k=t(k,O=t(O,P=t(P,E=t(E,k,O,P,a,7,h[0]),k,O,u,12,h[1]),E,k,c,17,h[2]),P,E,l,22,h[3]),O=t(O,P=t(P,E=t(E,k,O,P,p,7,h[4]),k,O,f,12,h[5]),E,k,d,17,h[6]),P,E,y,22,h[7]),O=t(O,P=t(P,E=t(E,k,O,P,v,7,h[8]),k,O,m,12,h[9]),E,k,g,17,h[10]),P,E,b,22,h[11]),O=t(O,P=t(P,E=t(E,k,O,P,_,7,h[12]),k,O,w,12,h[13]),E,k,x,17,h[14]),P,E,S,22,h[15]),O=n(O,P=n(P,E=n(E,k,O,P,u,5,h[16]),k,O,d,9,h[17]),E,k,b,14,h[18]),P,E,a,20,h[19]),O=n(O,P=n(P,E=n(E,k,O,P,f,5,h[20]),k,O,g,9,h[21]),E,k,S,14,h[22]),P,E,p,20,h[23]),O=n(O,P=n(P,E=n(E,k,O,P,m,5,h[24]),k,O,x,9,h[25]),E,k,l,14,h[26]),P,E,v,20,h[27]),O=n(O,P=n(P,E=n(E,k,O,P,w,5,h[28]),k,O,c,9,h[29]),E,k,y,14,h[30]),P,E,_,20,h[31]),O=i(O,P=i(P,E=i(E,k,O,P,f,4,h[32]),k,O,v,11,h[33]),E,k,b,16,h[34]),P,E,x,23,h[35]),O=i(O,P=i(P,E=i(E,k,O,P,u,4,h[36]),k,O,p,11,h[37]),E,k,y,16,h[38]),P,E,g,23,h[39]),O=i(O,P=i(P,E=i(E,k,O,P,w,4,h[40]),k,O,a,11,h[41]),E,k,l,16,h[42]),P,E,d,23,h[43]),O=i(O,P=i(P,E=i(E,k,O,P,m,4,h[44]),k,O,_,11,h[45]),E,k,S,16,h[46]),P,E,c,23,h[47]),O=o(O,P=o(P,E=o(E,k,O,P,a,6,h[48]),k,O,y,10,h[49]),E,k,x,15,h[50]),P,E,f,21,h[51]),O=o(O,P=o(P,E=o(E,k,O,P,_,6,h[52]),k,O,l,10,h[53]),E,k,g,15,h[54]),P,E,u,21,h[55]),O=o(O,P=o(P,E=o(E,k,O,P,v,6,h[56]),k,O,S,10,h[57]),E,k,d,15,h[58]),P,E,w,21,h[59]),O=o(O,P=o(P,E=o(E,k,O,P,p,6,h[60]),k,O,b,10,h[61]),E,k,c,15,h[62]),P,E,m,21,h[63]);s[0]=s[0]+E|0,s[1]=s[1]+k|0,s[2]=s[2]+O|0,s[3]=s[3]+P|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=u._createHelper(c),s.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e=r,t=e.lib,n=t.Base,i=t.WordArray,o=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=(a=this.cfg).hasher.create(),n=i.create(),o=n.words,s=a.keySize,a=a.iterations;o.length<s;){u&&r.update(u);var u=r.update(e).finalize(t);r.reset();for(var c=1;c<a;c++)u=r.finalize(u),r.reset();n.concat(u)}return n.sigBytes=4*s,n}});e.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}}(),r.lib.Cipher||function(e){var t=(d=r).lib,n=t.Base,i=t.WordArray,o=t.BufferedBlockAlgorithm,s=d.enc.Base64,a=d.algo.EvpKDF,u=t.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?y:f).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?y:f).decrypt(e,t,r,n)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=d.mode={},h=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},l=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;h.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),l.Decryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),h.call(this,e,t,n),this._prevBlock=i}}),c=c.CBC=l,l=(d.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=(r=r-e.sigBytes%r)<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(n);r=i.create(o,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:l}),reset:function(){u.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:r})}},f=t.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,p.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),d=(d.kdf={}).OpenSSL={execute:function(e,t,r,n){return n||(n=i.random(8)),e=a.create({keySize:t+r}).compute(e,n),r=i.create(e.words.slice(t),4*r),e.sigBytes=4*t,p.create({key:e,iv:r,salt:n})}},y=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=f.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,f.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],u=[],c=[],h=[],l=[],p=[],f=[],d=[],y=0;256>y;y++)d[y]=128>y?y<<1:y<<1^283;for(var v=0,m=0,y=0;256>y;y++){var g=(g=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&g^99;i[v]=g,o[g]=v;var b=d[v],_=d[b],w=d[_],x=257*d[g]^16843008*g;s[v]=x<<24|x>>>8,a[v]=x<<16|x>>>16,u[v]=x<<8|x>>>24,c[v]=x,x=16843009*w^65537*_^257*b^16843008*v,h[g]=x<<24|x>>>8,l[g]=x<<16|x>>>16,p[g]=x<<8|x>>>24,f[g]=x,v?(v=b^d[d[d[w^b]]],m^=d[d[m]]):v=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),n=this._keySchedule=[],o=0;o<r;o++)if(o<t)n[o]=e[o];else{var s=n[o-1];o%t?6<t&&4==o%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=S[o/t|0]<<24),n[o]=n[o-t]^s}for(e=this._invKeySchedule=[],t=0;t<r;t++)o=r-t,s=t%4?n[o]:n[o-4],e[t]=4>t||4>=o?s:h[i[s>>>24]]^l[i[s>>>16&255]]^p[i[s>>>8&255]]^f[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,h,l,p,f,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,s,a){for(var u=this._nRounds,c=e[t]^r[0],h=e[t+1]^r[1],l=e[t+2]^r[2],p=e[t+3]^r[3],f=4,d=1;d<u;d++)var y=n[c>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&p]^r[f++],v=n[h>>>24]^i[l>>>16&255]^o[p>>>8&255]^s[255&c]^r[f++],m=n[l>>>24]^i[p>>>16&255]^o[c>>>8&255]^s[255&h]^r[f++],p=n[p>>>24]^i[c>>>16&255]^o[h>>>8&255]^s[255&l]^r[f++],c=y,h=v,l=m;y=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[f++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&c])^r[f++],m=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^r[f++],p=(a[p>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[f++],e[t]=y,e[t+1]=v,e[t+2]=m,e[t+3]=p},keySize:8});e.AES=t._createHelper(n)}(),r.mode.ECB=function(){var e=r.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=n((n((n((n(r(6)),r(2))),r(9))),r(11))),s=n(r(14)),a=n(r(15)),u=n((r(5),r(10))),c=function(){function e(t){var r=t.subscribeEndpoint,n=t.leaveEndpoint,i=t.heartbeatEndpoint,a=t.setStateEndpoint,u=t.timeEndpoint,c=t.config,h=t.crypto,l=t.listenerManager;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listenerManager=l,this._config=c,this._leaveEndpoint=n,this._heartbeatEndpoint=i,this._setStateEndpoint=a,this._subscribeEndpoint=r,this._crypto=h,this._channels={},this._presenceChannels={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new o.default({timeEndpoint:u}),this._dedupingManager=new s.default({config:c})}return i(e,[{key:"adaptStateChange",value:function(e,t){var r=this,n=e.state,i=e.channels,o=void 0===i?[]:i,s=e.channelGroups,a=void 0===s?[]:s;return o.forEach(function(e){e in r._channels&&(r._channels[e].state=n)}),a.forEach(function(e){e in r._channelGroups&&(r._channelGroups[e].state=n)}),this._setStateEndpoint({state:n,channels:o,channelGroups:a},t)}},{key:"adaptSubscribeChange",value:function(e){var t=this,r=e.timetoken,n=e.channels,i=void 0===n?[]:n,o=e.channelGroups,s=void 0===o?[]:o,a=e.withPresence,u=void 0!==a&&a;this._config.subscribeKey&&""!==this._config.subscribeKey?(r&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=r),"0"!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),s.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var r=this,n=e.channels,i=void 0===n?[]:n,o=e.channelGroups,s=void 0===o?[]:o,a=[],u=[];i.forEach(function(e){e in r._channels&&(delete r._channels[e],a.push(e)),e in r._presenceChannels&&(delete r._presenceChannels[e],a.push(e))}),s.forEach(function(e){e in r._channelGroups&&(delete r._channelGroups[e],u.push(e)),e in r._presenceChannelGroups&&(delete r._channelGroups[e],u.push(e))}),0===a.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:a,channelGroups:u},function(e){e.affectedChannels=a,e.affectedChannelGroups=u,e.currentTimetoken=r._currentTimetoken,e.lastTimetoken=r._lastTimetoken,r._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=Object.keys(this._channels),r=Object.keys(this._channelGroups),n={};if(0!==t.length||0!==r.length){t.forEach(function(t){var r=e._channels[t].state;Object.keys(r).length&&(n[t]=r)}),r.forEach(function(t){var r=e._channelGroups[t].state;Object.keys(r).length&&(n[t]=r)});this._heartbeatEndpoint({channels:t,channelGroups:r,state:n},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this))}}},{key:"_startSubscribeLoop",value:function(){this._stopSubscribeLoop();var e=[],t=[];if(Object.keys(this._channels).forEach(function(t){return e.push(t)}),Object.keys(this._presenceChannels).forEach(function(t){return e.push(t+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(e){return t.push(e)}),Object.keys(this._presenceChannelGroups).forEach(function(e){return t.push(e+"-pnpres")}),0!==e.length||0!==t.length){var r={channels:e,channelGroups:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(r,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var r=this;if(e.error)e.category===u.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===u.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){r._config.autoNetworkDetection&&!r._isOnline&&(r._isOnline=!0,r._listenerManager.announceNetworkUp()),r.reconnect(),r._subscriptionStatusAnnounced=!0;var t={category:u.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:r._lastTimetoken,currentTimetoken:r._currentTimetoken};r._listenerManager.announceStatus(t)}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===u.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var n={};n.category=u.default.PNConnectedCategory,n.operation=e.operation,n.affectedChannels=this._pendingChannelSubscriptions,n.subscribedChannels=this.getSubscribedChannels(),n.affectedChannelGroups=this._pendingChannelGroupSubscriptions,n.lastTimetoken=this._lastTimetoken,n.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(n),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],o=this._config,s=o.requestMessageCountThreshold,c=o.dedupeOnSubscribe;if(s&&i.length>=s){var h={};h.category=u.default.PNRequestMessageCountExceededCategory,h.operation=e.operation,this._listenerManager.announceStatus(h)}i.forEach(function(e){var t=e.channel,n=e.subscriptionMatch,i=e.publishMetaData;if(t===n&&(n=null),c){if(r._dedupingManager.isDuplicate(e))return;r._dedupingManager.addEntry(e)}if(a.default.endsWith(e.channel,"-pnpres")){var o={};o.channel=null,o.subscription=null,o.actualChannel=null!=n?t:null,o.subscribedChannel=null!=n?n:t,t&&(o.channel=t.substring(0,t.lastIndexOf("-pnpres"))),n&&(o.subscription=n.substring(0,n.lastIndexOf("-pnpres"))),o.action=e.payload.action,o.state=e.payload.data,o.timetoken=i.publishTimetoken,o.occupancy=e.payload.occupancy,o.uuid=e.payload.uuid,o.timestamp=e.payload.timestamp,e.payload.join&&(o.join=e.payload.join),e.payload.leave&&(o.leave=e.payload.leave),e.payload.timeout&&(o.timeout=e.payload.timeout),r._listenerManager.announcePresence(o)}else{var s={};s.channel=null,s.subscription=null,s.actualChannel=null!=n?t:null,s.subscribedChannel=null!=n?n:t,s.channel=t,s.subscription=n,s.timetoken=i.publishTimetoken,s.publisher=e.issuingClientId,e.userMetadata&&(s.userMetadata=e.userMetadata),r._config.cipherKey?s.message=r._crypto.decrypt(e.payload):s.message=e.payload,r._listenerManager.announceMessage(s)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&(this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=c,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(10))),o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listeners=[]}return n(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(r){r!==e&&t.push(r)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=i.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=i.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(function(e){e&&e.__esModule}(r(12)),r(5),function(){function e(t){var r=t.timeEndpoint;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._timeEndpoint=r}return n(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}());t.default=i,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(function(e){e&&e.__esModule}(r(2)),function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}),o=function(){function e(t){var r=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hashHistory=[],this._config=r}return n(e,[{key:"getKey",value:function(e){var t=i(JSON.stringify(e.payload)).toString();return e.publishMetaData.publishTimetoken+"-"+t}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}();t.default=o,e.exports=t.default},function(e,t){"use strict";function r(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}e.exports={signPamFromParams:function(e){return function(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}(e).map(function(t){return t+"="+r(e[t])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(r,n){e=r,t=n}),reject:t,fulfill:e}},encodeString:r}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e,t){return e.type=t,e.error=!0,e}({message:e},"validationError")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.networking,n=e.config,c=null,h=null,l={};t.getOperation()===a.default.PNTimeOperation||t.getOperation()===a.default.PNChannelGroupsOperation?c=arguments.length<=2?void 0:arguments[2]:(l=arguments.length<=2?void 0:arguments[2],c=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||c||(h=s.default.createPromise());var p=t.validateParams(e,l);if(!p){var f=t.prepareParams(e,l),d=function(e,t,r){return e.usePost&&e.usePost(t,r)?e.postURL(t,r):e.getURL(t,r)}(t,e,l),y=void 0,v={url:d,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};f.uuid=n.UUID,f.pnsdk=function(e){var t="PubNub-JS-"+e.sdkFamily;return e.partnerId&&(t+="-"+e.partnerId),t+="/"+e.getVersion()}(n),n.useInstanceId&&(f.instanceid=n.instanceId),n.useRequestId&&(f.requestid=o.default.createUUID()),t.isAuthSupported()&&n.getAuthKey()&&(f.auth=n.getAuthKey()),n.secretKey&&function(e,t,r){var n=e.config,i=e.crypto;r.timestamp=Math.floor((new Date).getTime()/1e3);var o=n.subscribeKey+"\n"+n.publishKey+"\n"+t+"\n";o+=s.default.signPamFromParams(r);var a=i.HMACSHA256(o);a=(a=a.replace(/\+/g,"-")).replace(/\//g,"_"),r.signature=a}(e,d,f);var m=function(r,n){if(r.error)c?c(r):h&&h.reject(new u("PubNub call failed, check status for details",r));else{var i=t.handleResponse(e,n,l);c?c(r,i):h&&h.fulfill(i)}};if(t.usePost&&t.usePost(e,l)){var g=t.postPayload(e,l);y=r.POST(f,g,v,m)}else y=t.useDelete&&t.useDelete()?r.DELETE(f,v,m):r.GET(f,v,m);return t.getOperation()===a.default.PNSubscribeOperation?y:h?h.promise:void 0}return c?c(i(p)):h?(h.reject(new u("Validation failed, check status for details",i(p))),h.promise):void 0};var o=n(r(3)),s=n((r(5),r(15))),a=n((n(r(2)),r(13))),u=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,n.status=r,n.message=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();e.exports=t.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var r=t.channels,n=t.channelGroup,i=e.config;return n?r&&0!==r.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channels;return{add:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var r=t.channels,n=t.channelGroup,i=e.config;return n?r&&0!==r.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channels;return{remove:(void 0===r?[]:r).join(",")}},t.handleResponse=function(){return{}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var r=t.channelGroup,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(r)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var r=t.channelGroup,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var r=t.channelGroup;return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+o.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=t.channels,o=e.config;return r?n?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.pushGateway,n=t.channels;return{type:r,add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=t.channels,o=e.config;return r?n?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.pushGateway,n=t.channels;return{type:r,remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=e.config;return r?n?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var r=t.device,n=t.pushGateway,i=e.config;return r?n?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){var r=t.device;return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+r+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+o.default.encodeString(s)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i={};return n.length>0&&(i["channel-group"]=n.join(",")),i},t.handleResponse=function(){return{}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.uuid,i=void 0===n?r.UUID:n;return"/v2/presence/sub-key/"+r.subscribeKey+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+o.default.encodeString(s)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i=t.state,o=void 0===i?{}:i,s=e.config,a={};return n.length>0&&(a["channel-group"]=n.join(",")),a.state=JSON.stringify(o),a.heartbeat=s.getPresenceTimeout(),a},t.handleResponse=function(){return{}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.uuid,i=void 0===n?r.UUID:n,s=t.channels,a=void 0===s?[]:s,u=a.length>0?a.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+o.default.encodeString(u)+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i={};return n.length>0&&(i["channel-group"]=n.join(",")),i},t.handleResponse=function(e,t,r){var n=r.channels,i=void 0===n?[]:n,o=r.channelGroups,s=void 0===o?[]:o,a={};return 1===i.length&&0===s.length?a[i[0]]=t.payload:a=t.payload,{channels:a}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSetStateOperation},t.validateParams=function(e,t){var r=e.config,n=t.state,i=t.channels,o=void 0===i?[]:i,s=t.channelGroups,a=void 0===s?[]:s;return n?r.subscribeKey?0===o.length&&0===a.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+r.subscribeKey+"/channel/"+o.default.encodeString(s)+"/uuid/"+r.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.state,n=t.channelGroups,i=void 0===n?[]:n,o={};return o.state=JSON.stringify(r),i.length>0&&(o["channel-group"]=i.join(",")),o},t.handleResponse=function(e,t){return{state:t.payload}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=t.channelGroups,a=void 0===s?[]:s,u="/v2/presence/sub-key/"+r.subscribeKey;if(i.length>0||a.length>0){var c=i.length>0?i.join(","):",";u+="/channel/"+o.default.encodeString(c)}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.channelGroups,n=void 0===r?[]:r,i=t.includeUUIDs,o=void 0===i||i,s=t.includeState,a=void 0!==s&&s,u={};return o||(u.disable_uuids=1),a&&(u.state=1),n.length>0&&(u["channel-group"]=n.join(",")),u},t.handleResponse=function(e,t,r){var n=r.channels,i=void 0===n?[]:n,o=r.channelGroups,s=void 0===o?[]:o,a=r.includeUUIDs,u=void 0===a||a,c=r.includeState,h=void 0!==c&&c;return i.length>1||s.length>0||0===s.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(r){var n=t.payload.channels[r],i=[];return e.channels[r]={occupants:i,name:r,occupancy:n.occupancy},u&&n.uuids.forEach(function(e){h?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})}),e}),e}():function(){var e={},r=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:r,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach(function(e){h?r.push({state:e.state,uuid:e.uuid}):r.push({state:null,uuid:e})}),e}()};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var r=t.channel,n=t.channelGroup,i=t.authKeys,o=void 0===i?[]:i,s={};return r&&(s.channel=r),n&&(s["channel-group"]=n),o.length>0&&(s.auth=o.join(",")),s},t.handleResponse=function(e,t){return t.payload};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return n.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var r=t.channels,n=void 0===r?[]:r,i=t.channelGroups,o=void 0===i?[]:i,s=t.ttl,a=t.read,u=void 0!==a&&a,c=t.write,h=void 0!==c&&c,l=t.manage,p=void 0!==l&&l,f=t.authKeys,d=void 0===f?[]:f,y={};return y.r=u?"1":"0",y.w=h?"1":"0",y.m=p?"1":"0",n.length>0&&(y.channel=n.join(",")),o.length>0&&(y["channel-group"]=o.join(",")),d.length>0&&(y.auth=d.join(",")),(s||0===s)&&(y.ttl=s),y},t.handleResponse=function(){return{}};var n=function(e){return e&&e.__esModule?e:{default:e}}((r(5),r(13)))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=e.crypto,n=e.config,i=JSON.stringify(t);return n.cipherKey&&(i=r.encrypt(i),i=JSON.stringify(i)),i}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getOperation=function(){return s.default.PNPublishOperation},t.validateParams=function(e,t){var r=e.config,n=t.message;return t.channel?n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var r=t.sendByPost;return void 0!==r&&r},t.getURL=function(e,t){var r=e.config,n=t.channel,o=i(e,t.message);return"/publish/"+r.publishKey+"/"+r.subscribeKey+"/0/"+a.default.encodeString(n)+"/0/"+a.default.encodeString(o)},t.postURL=function(e,t){var r=e.config,n=t.channel;return"/publish/"+r.publishKey+"/"+r.subscribeKey+"/0/"+a.default.encodeString(n)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return i(e,t.message)},t.prepareParams=function(e,t){var r=t.meta,n=t.replicate,i=void 0===n||n,s=t.storeInHistory,a=t.ttl,u={};return null!=s&&(u.store=s?"1":"0"),a&&(u.ttl=a),!1===i&&(u.norep="true"),r&&"object"===(void 0===r?"undefined":o(r))&&(u.meta=JSON.stringify(r)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var s=n((r(5),r(13))),a=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHistoryOperation},t.validateParams=function(e,t){var r=t.channel,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var r=t.channel;return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+o.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i=t.reverse,o=t.count,s=void 0===o?100:o,a=t.stringifiedTimeToken,u=void 0!==a&&a,c={include_token:"true"};return c.count=s,r&&(c.start=r),n&&(c.end=n),u&&(c.string_message_token="true"),null!=i&&(c.reverse=i.toString()),c},t.handleResponse=function(e,t){var r={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var n={timetoken:t.timetoken,entry:function(e,t){var r=e.config,n=e.crypto;if(!r.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}(e,t.message)};r.messages.push(n)}),r};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var r=t.channel,n=e.config;return r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var r=t.channel,n=t.start,i=t.end,s=e.config,a="";return n&&(a="?start="+n),i&&(a+=(""!==a?"&":"?")+"end="+i),"/v3/history/sub-key/"+s.subscribeKey+"/channel/"+o.default.encodeString(r)+a},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i={};return r&&(i.start=r),n&&(i.end=n),{}},t.handleResponse=function(e,t){return t.payload};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var r=t.channels,n=e.config;return r&&0!==r.length?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var r=t.channels,n=void 0===r?[]:r,i=e.config,s=n.length>0?n.join(","):",";return"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+o.default.encodeString(s)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=t.start,n=t.end,i=t.count,o={};return i&&(o.max=i),r&&(o.start=r),n&&(o.end=n),o},t.handleResponse=function(e,t){var r={channels:{}};return Object.keys(t.channels||{}).forEach(function(n){r.channels[n]=[],(t.channels[n]||[]).forEach(function(t){var i={};i.channel=n,i.subscription=null,i.timetoken=t.timetoken,i.message=function(e,t){var r=e.config,n=e.crypto;if(!r.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}(e,t.message),r.channels[n].push(i)})}),r};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var r=e.config,n=t.channels,i=void 0===n?[]:n,s=i.length>0?i.join(","):",";return"/v2/subscribe/"+r.subscribeKey+"/"+o.default.encodeString(s)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var r=e.config,n=t.channelGroups,i=void 0===n?[]:n,o=t.timetoken,s=t.filterExpression,a=t.region,u={heartbeat:r.getPresenceTimeout()};return i.length>0&&(u["channel-group"]=i.join(",")),s&&s.length>0&&(u["filter-expr"]=s),o&&(u.tt=o),a&&(u.tr=a),u},t.handleResponse=function(e,t){var r=[];t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},n={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};r.push(n)});var n={timetoken:t.t.t,region:t.t.r};return{messages:r,metadata:n}};var i=n((r(5),r(13))),o=n(r(15))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=n((n(r(2)),r(10))),s=(r(5),function(){function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._modules={},Object.keys(t).forEach(function(e){r._modules[e]=t[e].bind(r)})}return i(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("pubsub."))return this._providedFQDN;var e=void 0;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("pubsub","ps"+e)}},{key:"shiftStandardOrigin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._standardOrigin=this.nextOrigin(e),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,r,n){return this._modules.post(e,t,r,n)}},{key:"GET",value:function(e,t,r){return this._modules.get(e,t,r)}},{key:"DELETE",value:function(e,t,r){return this._modules.del(e,t,r)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return o.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return o.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return o.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return o.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return o.default.PNNetworkIssuesCategory;if(e.timeout)return o.default.PNTimeoutCategory;if(e.response){if(e.response.badRequest)return o.default.PNBadRequestCategory;if(e.response.forbidden)return o.default.PNAccessDeniedCategory}return o.default.PNUnknownCategory}}]),e}());t.default=s,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,r){"use strict";function n(e,t,r){var n=this;return this._config.logVerbosity&&(e=e.use(function(e){var t=(new Date).getTime(),r=(new Date).toISOString(),n=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;n.log("<<<<<"),n.log("["+r+"]","\n",e.url,"\n",e.qs),n.log("-----"),e.on("response",function(r){var i=(new Date).getTime()-t,o=(new Date).toISOString();n.log(">>>>>>"),n.log("["+o+" / "+i+"]","\n",e.url,"\n",e.qs,"\n",r.text),n.log("-----")})})),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end(function(e,i){var o={};if(o.error=null!==e,o.operation=t.operation,i&&i.status&&(o.statusCode=i.status),e)return o.errorData=e,o.category=n._detectErrorCategory(e),r(o,null);var s=JSON.parse(i.text);return s.error&&1===s.error&&s.status&&s.message&&s.service?(o.errorData=s,o.statusCode=s.status,o.error=!0,o.category=n._detectErrorCategory(o),r(o,null)):r(o,s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,r){var o=i.default.get(this.getStandardOrigin()+t.url).query(e);return n.call(this,o,t,r)},t.post=function(e,t,r,o){var s=i.default.post(this.getStandardOrigin()+r.url).query(e).send(t);return n.call(this,s,r,o)},t.del=function(e,t,r){var o=i.default.delete(this.getStandardOrigin()+t.url).query(e);return n.call(this,o,t,r)};var i=function(e){return e&&e.__esModule?e:{default:e}}(r(42));r(5)},function(e,t,r){function n(e){if(!f(e))return e;var t=[];for(var r in e)i(t,r,e[r]);return t.join("&")}function i(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){i(e,t,r)});else if(f(r))for(var n in r)i(e,t+"["+n+"]",r[n]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function o(e){for(var t,r,n={},i=e.split("&"),o=0,s=i.length;o<s;++o)t=i[o],-1==(r=t.indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function s(e){return/[\/+]json\b/.test(e)}function a(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this._setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,i,o=e.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;a<u;++a)r=o[a],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),i=y(r.slice(t+1)),s[n]=i;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function u(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new a(r)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,e.rawResponse=r.xhr&&r.xhr.responseText?r.xhr.responseText:null,e.statusCode=r.xhr&&r.xhr.status?r.xhr.status:null,r.callback(e)}r.emit("response",t);var n;try{(t.status<200||t.status>=300)&&(n=new Error(t.statusText||"Unsuccessful HTTP response"),n.original=e,n.response=t,n.status=t.status)}catch(e){n=e}n?r.callback(n,t):r.callback(null,t)})}function c(e,t){var r=d("DELETE",e);return t&&r.end(t),r}var h;"undefined"!=typeof window?h=window:"undefined"!=typeof self?h=self:(console.warn("Using browser-only version of superagent in non-browser environment"),h=this);var l=r(43),p=r(44),f=r(45),d=e.exports=r(46).bind(null,u);d.getXHR=function(){if(!(!h.XMLHttpRequest||h.location&&"file:"==h.location.protocol&&h.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var y="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=n,d.parseString=o,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},a.prototype.get=function(e){return this.header[e.toLowerCase()]},a.prototype._setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=function(e){return e.split(/ *; */).shift()}(t);var r=function(e){return e.split(/ *; */).reduce(function(e,t){var r=t.split(/ *= */),n=r.shift(),i=r.shift();return n&&i&&(e[n]=i),e},{})}(t);for(var n in r)this[n]=r[n]},a.prototype._parseBody=function(e){var t=d.parse[this.type];return!t&&s(this.type)&&(t=d.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},a.prototype._setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},a.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",i=new Error(n);return i.status=this.status,i.method=t,i.url=r,i},d.Response=a,l(u.prototype);for(var v in p)u.prototype[v]=p[v];u.prototype.type=function(e){return this.set("Content-Type",d.types[e]||e),this},u.prototype.responseType=function(e){return this._responseType=e,this},u.prototype.accept=function(e){return this.set("Accept",d.types[e]||e),this},u.prototype.auth=function(e,t,r){switch(r||(r={type:"basic"}),r.type){case"basic":var n=btoa(e+":"+t);this.set("Authorization","Basic "+n);break;case"auto":this.username=e,this.password=t}return this},u.prototype.query=function(e){return"string"!=typeof e&&(e=n(e)),e&&this._query.push(e),this},u.prototype.attach=function(e,t,r){return this._getFormData().append(e,t,r||t.name),this},u.prototype._getFormData=function(){return this._formData||(this._formData=new h.FormData),this._formData},u.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout(),r(e,t)},u.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},u.prototype._timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},u.prototype._appendQueryString=function(){var e=this._query.join("&");e&&(this.url+=~this.url.indexOf("?")?"&"+e:"?"+e)},u.prototype.end=function(e){var t=this,r=this.xhr=d.getXHR(),n=this._timeout,i=this._formData||this._data;this._callback=e||function(){},r.onreadystatechange=function(){if(4==r.readyState){var e;try{e=r.status}catch(t){e=0}if(0==e){if(t.timedout)return t._timeoutError();if(t._aborted)return;return t.crossDomainError()}t.emit("end")}};var o=function(e,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=e,t.emit("progress",r)};if(this.hasListeners("progress"))try{r.onprogress=o.bind(null,"download"),r.upload&&(r.upload.onprogress=o.bind(null,"upload"))}catch(e){}if(n&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},n)),this._appendQueryString(),this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!this._isHost(i)){var a=this._header["content-type"],u=this._serializer||d.serialize[a?a.split(";")[0]:""];!u&&s(a)&&(u=d.serialize["application/json"]),u&&(i=u(i))}for(var c in this.header)null!=this.header[c]&&r.setRequestHeader(c,this.header[c]);return this._responseType&&(r.responseType=this._responseType),this.emit("request",this),r.send(void 0!==i?i:null),this},d.Request=u,d.get=function(e,t,r){var n=d("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},d.head=function(e,t,r){var n=d("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.options=function(e,t,r){var n=d("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.del=c,d.delete=c,d.patch=function(e,t,r){var n=d("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.post=function(e,t,r){var n=d("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},d.put=function(e,t,r){var n=d("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){var n=r(45);t.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},t.parse=function(e){return this._parser=e,this},t.serialize=function(e){return this._serializer=e,this},t.timeout=function(e){return this._timeout=e,this},t.then=function(e,t){if(!this._fullfilledPromise){var r=this;this._fullfilledPromise=new Promise(function(e,t){r.end(function(r,n){r?t(r):e(n)})})}return this._fullfilledPromise.then(e,t)},t.catch=function(e){return this.then(void 0,e)},t.use=function(e){return e(this),this},t.get=function(e){return this._header[e.toLowerCase()]},t.getHeader=t.get,t.set=function(e,t){if(n(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},t.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},t.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(n(e)){for(var r in e)this.field(r,e[r]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return this._getFormData().append(e,t),this},t.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},t.withCredentials=function(){return this._withCredentials=!0,this},t.redirects=function(e){return this._maxRedirects=e,this},t.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},t._isHost=function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}},t.send=function(e){var t=n(e),r=this._header["content-type"];if(t&&n(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(r||this.type("json"),this)}},function(e,t){e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t){e.exports=function(e,t,r){return"function"==typeof r?new e("GET",t).end(r):2==arguments.length?new e("GET",t):new e(t,r)}}])})},function(e,t,r){(function(e,n){var i;!function(o){function s(e){throw new RangeError(T[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);return n+a((e=e.replace(A,".")).split("."),t).join(".")}function c(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function h(e){return a(e,function(e){var t="";return e>65535&&(t+=I((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function l(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?j(e/x):e>>1,e+=j(e/t);e>C*_>>1;n+=g)e=j(e/C);return j(n+(C+1)*e/(e+w))}function f(e){var t,r,n,i,o,a,u,c,l,f,d=[],y=e.length,v=0,w=E,x=S;for((r=e.lastIndexOf(k))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&s("not-basic"),d.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=v,a=1,u=g;i>=y&&s("invalid-input"),((c=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:g}(e.charCodeAt(i++)))>=g||c>j((m-v)/a))&&s("overflow"),v+=c*a,l=u<=x?b:u>=x+_?_:u-x,!(c<l);u+=g)a>j(m/(f=g-l))&&s("overflow"),a*=f;x=p(v-o,t=d.length+1,0==o),j(v/t)>m-w&&s("overflow"),w+=j(v/t),v%=t,d.splice(v++,0,w)}return h(d)}function d(e){var t,r,n,i,o,a,u,h,f,d,y,v,w,x,O,P=[];for(v=(e=c(e)).length,t=E,r=0,o=S,a=0;a<v;++a)(y=e[a])<128&&P.push(I(y));for(n=i=P.length,i&&P.push(k);n<v;){for(u=m,a=0;a<v;++a)(y=e[a])>=t&&y<u&&(u=y);for(u-t>j((m-r)/(w=n+1))&&s("overflow"),r+=(u-t)*w,t=u,a=0;a<v;++a)if((y=e[a])<t&&++r>m&&s("overflow"),y==t){for(h=r,f=g;d=f<=o?b:f>=o+_?_:f-o,!(h<d);f+=g)O=h-d,x=g-d,P.push(I(l(d+O%x,0))),h=j(O/x);P.push(I(l(h,0))),o=p(r,w,n==i),r=0,++n}++r,++t}return P.join("")}"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var y="object"==typeof n&&n;var v,m=2147483647,g=36,b=1,_=26,w=38,x=700,S=72,E=128,k="-",O=/^xn--/,P=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=g-b,j=Math.floor,I=String.fromCharCode;v={version:"1.4.1",ucs2:{decode:c,encode:h},decode:f,encode:d,toASCII:function(e){return u(e,function(e){return P.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return u(e,function(e){return O.test(e)?f(e.slice(4).toLowerCase()):e})}},void 0!==(i=function(){return v}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(50)(e),r(8))},function(e,t,r){"use strict";var n=r(118),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=n.split(t.delimiter,s),u=0;u<a.length;++u){var c,h,l=a[u],p=l.indexOf("]="),f=-1===p?l.indexOf("="):p+1;-1===f?(c=t.decoder(l,o.decoder),h=t.strictNullHandling?null:""):(c=t.decoder(l.slice(0,f),o.decoder),h=t.decoder(l.slice(f+1),o.decoder)),i.call(r,c)?r[c]=[].concat(r[c]).concat(h):r[c]=h}return r}(e,r):e,a=r.plainObjects?Object.create(null):{},u=Object.keys(s),c=0;c<u.length;++c){var h=u[c],l=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),a=s?n.slice(0,s.index):n,u=[];if(a){if(!r.plainObjects&&i.call(Object.prototype,a)&&!r.allowPrototypes)return;u.push(a)}for(var c=0;null!==(s=o.exec(n))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+n.slice(s.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var o,s=e[i];if("[]"===s)o=(o=[]).concat(n);else{o=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(a,10);!isNaN(u)&&s!==a&&String(u)===a&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[])[u]=n:o[a]=n}n=o}return n}(u,t,r)}}(h,s[h],r);a=n.merge(a,l,r)}return n.compact(a)}},function(e,t,r){"use strict";var n=r(118),i=r(117),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var r=e,s=t?n.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?a.delimiter:s.delimiter,c="boolean"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,h="boolean"==typeof s.skipNulls?s.skipNulls:a.skipNulls,l="boolean"==typeof s.encode?s.encode:a.encode,p="function"==typeof s.encoder?s.encoder:a.encoder,f="function"==typeof s.sort?s.sort:null,d=void 0!==s.allowDots&&s.allowDots,y="function"==typeof s.serializeDate?s.serializeDate:a.serializeDate,v="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,s.format))throw new TypeError("Unknown format option provided.");var m,g,b=i.formatters[s.format];"function"==typeof s.filter?r=(g=s.filter)("",r):Array.isArray(s.filter)&&(m=g=s.filter);var _=[];if("object"!=typeof r||null===r)return"";var w;w=s.arrayFormat in o?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var x=o[w];m||(m=Object.keys(r)),f&&m.sort(f);for(var S=0;S<m.length;++S){var E=m[S];h&&null===r[E]||(_=_.concat(function e(t,r,i,o,s,u,c,h,l,p,f,d){var y=t;if("function"==typeof c)y=c(r,y);else if(y instanceof Date)y=p(y);else if(null===y){if(o)return u&&!d?u(r,a.encoder):r;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||n.isBuffer(y))return u?[f(d?r:u(r,a.encoder))+"="+f(u(y,a.encoder))]:[f(r)+"="+f(String(y))];var v=[];if(void 0===y)return v;var m;if(Array.isArray(c))m=c;else{var g=Object.keys(y);m=h?g.sort(h):g}for(var b=0;b<m.length;++b){var _=m[b];s&&null===y[_]||(v=Array.isArray(y)?v.concat(e(y[_],i(r,_),i,o,s,u,c,h,l,p,f,d)):v.concat(e(y[_],r+(l?"."+_:"["+_+"]"),i,o,s,u,c,h,l,p,f,d)))}return v}(r[E],E,x,c,h,l?p:null,g,f,d,y,b,v)))}var k=_.join(u),O=!0===s.addQueryPrefix?"?":"";return k.length>0?O+k:""}},function(e,t,r){"use strict";e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var h,l,p,f,d=e[c].replace(s,"%20"),y=d.indexOf(r);y>=0?(h=d.substr(0,y),l=d.substr(y+1)):(h=d,l=""),p=decodeURIComponent(h),f=decodeURIComponent(l),!function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(o,p)?o[p]=f:n(o[p])?o[p].push(f):o[p]=[o[p],f]}return o};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(289),t.encode=t.stringify=r(290)},function(e,t,r){"use strict";var n=r(82),i=r(298),o=r(294),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=s},function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=r(296),o=r(297),s=r(122),a=r(299),u=r(121),c=r(295),h=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,h=this._parents,l=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=h?h.length:0;r;)r.remove(this),r=++f<d&&h[f]||null;if(s.isFunction(l)){(v=a.tryCatch(l).call(this))===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?n(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(p))for(f=-1,d=p.length;++f<d;){var y=p[f];if(o.isObject(y)){var v=a.tryCatch(y.unsubscribe).call(y);if(v===u.errorObject){t=!0,e=e||[];var m=u.errorObject.e;m instanceof c.UnsubscriptionError?e=e.concat(n(m.errors)):e.push(m)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=h},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var i=r(82);t.getSymbolObservable=n,t.observable=n(i.root),t.$$observable=t.observable},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(t,e),t}(Error);t.UnsubscriptionError=i},function(e,t,r){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,r){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";var n=r(120),i=r(81),o=r(119);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},function(e,t,r){"use strict";var n,i=r(121);t.tryCatch=function(e){return n=e,function(){try{return n.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}}},function(e,t){!function(){"use strict";function r(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date?e.getTime():n(e)?e.map(i):e&&"function"==typeof e.toJSON?e.toJSON():e}function o(e,t){return r(e.get)?e.get(t):e[t]}function s(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,s=r.length;i<s;i++)if(e(t,o(r,i)))return!0;return!1}}function a(e,t,r,n){return e.v(e.a,t,r,n)}function u(e,t){for(var r=0;r<e.length;r++){o(e,r);if(a(t,o(e,r)))return r}return-1}function c(e,t){return{a:e,v:t}}function h(e,t,r,i,s){if(r!==t.length&&void 0!=e){var a=o(t,r);if(n(e)&&isNaN(Number(a)))for(var u=0,c=e.length;u<c;u++)h(o(e,u),t,r,e,s);else h(o(e,a),t,r+1,e,s)}else s.push([e,t[r-1],i])}function l(e){(e=i(e))&&function(e){return e&&e.constructor===Object}(e)||(e={$eq:e});var t=[];for(var r in e){var n=e[r];if("$options"!==r)if(d[r])y[r]&&(n=y[r](n,e)),t.push(c(i(n),d[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);t.push(function(e,t){return{a:{k:e,nv:t},v:function(e,t){var r=[];if(h(t,e.k,0,t,r),1===r.length){var n=r[0];return a(e.nv,n[0],n[1],n[2])}for(var i=0;i<r.length;i++){var o=r[i];if(a(e.nv,o[0],o[1],o[2]))return!0}return!1}}}(r.split("."),l(n)))}}return 1===t.length?t[0]:c(t,d.$and)}function p(e,t){var r=l(e);return t&&(r={a:r,v:function(e,r,n,i){return a(e,t(r),n,i)}}),r}function f(e,t,n){function i(e,t,r){return a(o,e,t,r)}r(t)&&(n=t,t=void 0);var o=p(e,n);return t?t.filter(i):i}var d={$eq:s(function(e,t){return e(t)}),$ne:function(e){return function(t,r){if(!n(r)||!r.length)return e(t,r);for(var i=0,s=r.length;i<s;i++)if(!e(t,o(r,i)))return!1;return!0}}(function(e,t){return!e(t)}),$gt:s(function(e,t){return f.compare(i(t),e)>0}),$gte:s(function(e,t){return f.compare(i(t),e)>=0}),$lt:s(function(e,t){return f.compare(i(t),e)<0}),$lte:s(function(e,t){return f.compare(i(t),e)<=0}),$mod:s(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array)){var r=i(t);if(r===t&&"object"==typeof t)for(s=e.length;s--;)if(String(e[s])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===r)for(s=e.length;s--;)if(null==e[s])return!0;for(s=e.length;s--;){var n=a(p(o(e,s),void 0),t,s,e);if(n&&"[object Object]"!==String(n)&&"[object Object]"!==String(t))return!0}return!!~e.indexOf(r)}for(var s=t.length;s--;)if(~e.indexOf(i(o(t,s))))return!0;return!1},$nin:function(e,t,r,n){return!d.$in(e,t,r,n)},$not:function(e,t,r,n){return!a(e,t,r,n)},$type:function(e,t){return void 0!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t,r,n){return d.$and(e,t,r,n)},$size:function(e,t){return!!t&&e===t.length},$or:function(e,t,r,n){for(var i=0,s=e.length;i<s;i++)if(a(o(e,i),t,r,n))return!0;return!1},$nor:function(e,t,r,n){return!d.$or(e,t,r,n)},$and:function(e,t,r,n){for(var i=0,s=e.length;i<s;i++)if(!a(o(e,i),t,r,n))return!1;return!0},$regex:s(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t,r,n){return e.call(t,t,r,n)},$elemMatch:function(e,t,r,i){return n(t)?!!~u(t,e):a(e,t,r,i)},$exists:function(e,t,r,n){return n.hasOwnProperty(r)===e}},y={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:n(e)&&!e.length?function(e){return n(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===f.compare(i(t),e)}},$ne:function(e){return y.$eq(e)},$and:function(e){return e.map(l)},$all:function(e){return y.$and(e)},$or:function(e){return e.map(l)},$nor:function(e){return e.map(l)},$not:function(e){return l(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return l(e)},$exists:function(e){return!!e}};f.use=function(e){if(r(e))return e(f);for(var t in e)36===t.charCodeAt(0)&&(d[t]=e[t])},f.indexOf=function(e,t,r){return u(t,p(e,r))},f.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}},void 0!==e&&void 0!==e.exports&&(Object.defineProperty(t,"__esModule",{value:!0}),e.exports=f,t.default=e.exports.default=f),"undefined"!=typeof window&&(window.sift=f)}()},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,r){var n,i;!function(o,s,a){void 0!==e&&e.exports?e.exports=a():void 0!==(i="function"==typeof(n=a)?n.call(t,r,t,e):n)&&(e.exports=i)}(0,0,function(){return function(){var e=arguments;"object"==typeof arguments[0]&&(e=arguments[0],arguments[1]);return function(e,t){return e=function(e,t){return e.substr(0,t.length)===t}(e,"file://")?e.replace(/(\/{0,3})\/*/g,"$1"):(e=e.replace(/:\//g,"://")).replace(/([^:\s\%\3\A])\/+/g,"$1/"),e=e.replace(/\/(\?|&|#[^!])/g,"$1"),e=e.replace(/(\?.+)\?/g,"$1&")}([].slice.call(e,0).join("/"))}})},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t,r){var n=e;return a(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=c(t,{uri:e}),n.callback=r,n}function i(e,t,r){return t=n(e,t,r),o(t)}function o(e){function t(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,m)}function r(){if(!c){var t;clearTimeout(h),t=e.useXDR&&void 0===s.status?200:1223===s.status?204:s.status;var r=m,n=null;return 0!==t?(r={body:function(){var e=void 0;if(e=s.response?s.response:s.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(s),v)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:p,headers:{},url:l,rawRequest:s},s.getAllResponseHeaders&&(r.headers=u(s.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var n=!1,o=function(t,r,i){n||(n=!0,e.callback(t,r,i))},s=e.xhr||null;s||(s=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var a,c,h,l=s.url=e.uri||e.url,p=s.method=e.method||"GET",f=e.body||e.data,d=s.headers=e.headers||{},y=!!e.sync,v=!1,m={body:void 0,headers:{},statusCode:0,method:p,url:l,rawRequest:s};if("json"in e&&!1!==e.json&&(v=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),s.onreadystatechange=function(){4===s.readyState&&setTimeout(r,0)},s.onload=r,s.onerror=t,s.onprogress=function(){},s.onabort=function(){c=!0},s.ontimeout=t,s.open(p,l,!y,e.username,e.password),y||(s.withCredentials=!!e.withCredentials),!y&&e.timeout>0&&(h=setTimeout(function(){if(!c){c=!0,s.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},e.timeout)),s.setRequestHeader)for(a in d)d.hasOwnProperty(a)&&s.setRequestHeader(a,d[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(s.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(s),s.send(f||null),s}var s=r(146),a=r(88),u=r(283),c=r(305);e.exports=i,i.XMLHttpRequest=s.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:s.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,r,i){return r=n(t,r,i),r.method=e.toUpperCase(),o(r)}})},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},function(e,t,r){const n=r(29),i=r(3),o=r(13),{KinveyError:s}=r(1),{isDefined:a}=r(2);t.Acl=class{constructor(e){if(!1===n(e))throw new s("entity argument must be an object");e._acl=e._acl||{},this.entity=e}get creator(){return this.entity._acl.creator}get readers(){return i(this.entity._acl.r)?this.entity._acl.r:[]}get writers(){return i(this.entity._acl.w)?this.entity._acl.w:[]}get readerGroups(){return a(this.entity._acl.groups)&&i(this.entity._acl.groups.r)?this.entity._acl.groups.r:[]}get writerGroups(){return a(this.entity._acl.groups)&&i(this.entity._acl.groups.w)?this.entity._acl.groups.w:[]}set globallyReadable(e){this.entity._acl.gr=!0===e&&e}set globallyWritable(e){this.entity._acl.gw=!0===e&&e}addReader(e){const t=this.readers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.r=t,this}addReaderGroup(e){const t=this.readerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.groups=o({},this.entity._acl.groups,{r:t}),this}addWriter(e){const t=this.writers;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.w=t,this}addWriterGroup(e){const t=this.writerGroups;return-1===t.indexOf(e)&&t.push(e),this.entity._acl.groups=o({},this.entity._acl.groups,{w:t}),this}isGloballyReadable(){return!0===this.entity._acl.gr&&this.entity._acl.gr}isGloballyWritable(){return!0===this.entity._acl.gw&&this.entity._acl.gw}removeReader(e){const t=this.readers,r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.entity._acl.r=t,this}removeReaderGroup(e){const t=this.readerGroups,r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.entity._acl.groups=o({},this.entity._acl.groups,{r:t}),this}removeWriter(e){const t=this.writers,r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.entity._acl.w=t,this}removeWriterGroup(e){const t=this.writerGroups,r=t.indexOf(e);return-1!==r&&t.splice(r,1),this.entity._acl.groups=o({},this.entity._acl.groups,{w:t}),this}toPlainObject(){return this.entity._acl}}},function(e,t,r){const n=r(13),i=r(43),o=r(6),s=r(12),a=r(19),u=r(113),{KinveyError:c}=r(1),{isDefined:h}=r(2),{Query:l}=r(10);t.Aggregation=class e{constructor(e){e=n({query:null,initial:{},key:{},reduceFn:function(){}.toString()},e),this.query=e.query,this.initial=e.initial,this.key=e.key,this.reduceFn=e.reduceFn}get initial(){return u(this._initial)}set initial(e){if(!s(e))throw new c("initial must be an Object.");this._initial=e}get query(){return this._query}set query(e){if(h(e)&&!(e instanceof l))throw new c("Invalid query. It must be an instance of the Query class.");this._query=e}get reduceFn(){return this._reduceFn}set reduceFn(e){if(a(e)&&(e=e.toString()),!o(e))throw new c("fn argument must be of type function or string.");this._reduceFn=e}by(e){return this.key[e]=!0,this}process(e=[]){const t=this.toPlainObject(),r=Object.keys(t.key),o=t.reduceFn.replace(/function[\s\S]*?\([\s\S]*?\)/,"");if(t.reduce=new Function(["doc","out"],o),this.query&&(e=this.query.process(e)),r.length>0){const i=[];return r.forEach(r=>{const o={};e.forEach(e=>{const n=e[r];let i=h(o[n])?o[n]:u(t.initial);const s=t.reduce(e,i);h(s)&&(i=s),o[n]=i}),Object.keys(o).forEach(e=>{let t={};t[r]=e,t=n({},t,o[e]),i.push(t)})}),i}let s=u(t.initial);return i(e,e=>{const r=t.reduce(e,s);h(r)&&(s=r)}),s}toPlainObject(){return{key:this.key,initial:this.initial,reduce:this.reduceFn,reduceFn:this.reduceFn,condition:this.query?this.query.toPlainObject().filter:{},query:this.query?this.query.toPlainObject():null}}static count(t=""){t=t.replace("'","\\'");const r=new e;return r.by(t),r.initial={count:0},r.reduceFn="function(doc, out) {  out.count += 1;  return out;}",r}static sum(t=""){t=t.replace("'","\\'");const r=new e;return r.initial={sum:0},r.reduceFn="function(doc, out) {"+`  out.sum += doc["${t}"];`+"  return out;}",r}static min(t=""){t=t.replace("'","\\'");const r=new e;return r.initial={min:1/0},r.reduceFn="function(doc, out) {"+`  out.min = Math.min(out.min, doc["${t}"]);`+"  return out;}",r}static max(t=""){t=t.replace("'","\\'");const r=new e;return r.initial={max:-1/0},r.reduceFn="function(doc, out) {"+`  out.max = Math.max(out.max, doc["${t}"]);`+"  return out;}",r}static average(t=""){t=t.replace("'","\\'");const r=new e;return r.initial={count:0,average:0},r.reduceFn="function(doc, out) {"+`  out.average = (out.average * out.count + doc["${t}"]) / (out.count + 1);`+"  out.count += 1;  return out;}",r}}},function(e,t,r){const n=r(87),i=r(7),o=r(6),s=r(74),{KinveyError:a}=r(1),{Log:u}=r(16),{isDefined:c}=r(2),{uuidv4:h}=r(33);let l=null;class p{constructor(){this.memory=new n}get(e){if(!o(e))throw new a("ActiveUserStorage key must be a string.");try{return JSON.parse(this.memory.get(e))}catch(e){return null}}set(e,t){if(!o(e))throw new a("ActiveUserStorage key must be a string.");return c(t)?this.memory.set(e,JSON.stringify(t)):this.memory.delete(e),t}}t.Client=class e{constructor(e={}){let t=o(e.apiHostname)?e.apiHostname:"https://baas.kinvey.com";!1===/^https?:\/\//i.test(t)&&(t=`https://${t}`);const r=i.parse(t);this.deviceId=h(),this.apiProtocol=r.protocol,this.apiHost=r.host;let n=o(e.micHostname)?e.micHostname:"https://auth.kinvey.com";!1===/^https?:\/\//i.test(n)&&(n=`https://${n}`);const a=i.parse(n);this.micProtocol=a.protocol,this.micHost=a.host,this.appKey=e.appKey,this.appSecret=e.appSecret,this.masterSecret=e.masterSecret,this.encryptionKey=e.encryptionKey,this.appVersion=e.appVersion,this.defaultTimeout=s(e.defaultTimeout)&&e.defaultTimeout>=0?e.defaultTimeout:6e4,this.activeUserStorage=new p}getActiveUser(){return this.activeUserStorage.get(`${this.appKey}.active_user`)}setActiveUser(e){return this.activeUserStorage.set(`${this.appKey}.active_user`,e)}get apiHostname(){return i.format({protocol:this.apiProtocol,host:this.apiHost})}get micHostname(){return i.format({protocol:this.micProtocol,host:this.micHost})}get appVersion(){return this._appVersion}set appVersion(e){e&&!o(e)&&(e=String(e)),this._appVersion=e}get defaultTimeout(){return this._defaultTimeout}set defaultTimeout(e){if(e=parseInt(e,10),!1===s(e)||isNaN(e))throw new a("Invalid timeout. Timeout must be a number.");e<0&&(u.info(`Default timeout is less than 0. Setting default timeout to ${defaultTimeout}ms.`),e=defaultTimeout),this._defaultTimeout=e}toPlainObject(){return{deviceId:this.deviceId,apiHostname:this.apiHostname,apiProtocol:this.apiProtocol,apiHost:this.apiHost,micHostname:this.micHostname,micProtocol:this.micProtocol,micHost:this.micHost,appKey:this.appKey,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey,appVersion:this.appVersion}}static initialize(){throw new a("Please use Client.init().")}static init(t){return l=new e(t)}static sharedInstance(){if(!1===c(l))throw new a("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return l}}},function(e,t,r){const n=r(6),i=r(7),{CacheRequest:o,RequestMethod:s}=r(5),{KinveyError:a}=r(1),{isDefined:u}=r(2),{Client:c}=r(9),{NetworkStore:h}=r(84),{CacheStore:l}=r(83),{SyncStore:p}=r(124),f={Cache:"Cache",Network:"Network",Sync:"Sync"};Object.freeze(f),t.DataStoreType=f,t.DataStore=class{constructor(){throw new a("Not allowed to construct a DataStore instance. Please use the collection() function to get an instance of a DataStore instance.")}static collection(e,t=f.Cache,r){let i;if(!1===u(e)||!1===n(e))throw new a("A collection is required and must be a string.");switch(t){case f.Network:i=new h(e,r);break;case f.Sync:i=new p(e,r);break;case f.Cache:default:i=new l(e,r)}return i}static getInstance(e,t,r){return this.collection(e,t,r)}static clearCache(e={}){const t=e.client||c.sharedInstance(),r=`/appdata/${t.appKey}`;return new o({method:s.DELETE,url:i.format({protocol:t.apiProtocol,host:t.apiHost,pathname:r}),properties:e.properties,timeout:e.timeout}).execute().then(e=>e.data)}}},function(e,t,r){const n=r(4),i=r(6),o=r(7),{KinveyError:s}=r(1),{Client:a}=r(9),{RequestMethod:u,AuthType:c,KinveyRequest:h}=r(5);t.CustomEndpoint=class{constructor(){throw new s("Not allowed to create an instance of the `CustomEndpoint` class.","Please use `CustomEndpoint.execute()` function.")}static execute(e,t,r={}){const l=r.client||a.sharedInstance();if(!e)return n.reject(new s("An endpoint argument is required."));if(!i(e))return n.reject(new s("The endpoint argument must be a string."));return new h({method:u.POST,authType:c.Default,url:o.format({protocol:l.apiProtocol,host:l.apiHost,pathname:`/rpc/${l.appKey}/custom/${e}`}),properties:r.properties,body:t,timeout:r.timeout,client:l}).execute().then(e=>e.data)}}},function(e,t,r){function n(e,t,r,n){this.name="ActiveUserError",this.message=e||"An active user already exists.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="APIVersionNotAvailableError",this.message=e||"This API version is not available for your app.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="APIVersionNotImplementedError",this.message=e||"This API version is not implemented.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="AppProblemError",this.message=e||"There is a problem with this app backend that prevents execution of this operation. Please contact support@kinvey.com for assistance.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="BadRequestError",this.message=e||"Unable to understand request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="BLError",this.message=e||"The Business Logic script did not complete.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="CORSDisabledError",this.message=e||"Cross Origin Support is disabled for this application.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="DuplicateEndUsersError",this.message=e||"More than one user registered with this username for this application.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="FeatureUnavailableError",this.message=e||"Requested functionality is unavailable in this API version.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="IncompleteRequestBodyError",this.message=e||"The request body is either missing or incomplete.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="IndirectCollectionAccessDisallowedError",this.message=e||"Please use the appropriate API to access this collection for this app backend.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="InsufficientCredentialsError",this.message=e||"The credentials used to authenticate this request are not authorized to run this operation. Please retry your request with appropriate credentials.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="InvalidCredentialsError",this.message=e||"Invalid credentials. Please retry your request with correct credentials.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="InvalidIdentifierError",this.message=e||"One of more identifier names in the request has an invalid format.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="InvalidQuerySyntaxError",this.message=e||"The query string in the request has an invalid syntax.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="JSONParseError",this.message=e||"Unable to parse the JSON in the request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="KinveyError",this.message=e||"An error occurred.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="KinveyInternalErrorRetry",this.message=e||"The Kinvey server encountered an unexpected error. Please retry your request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="KinveyInternalErrorStop",this.message=e||"The Kinvey server encountered an unexpected error. Please contact support@kinvey.com for assistance.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="MissingQueryError",this.message=e||"The request is missing a query string.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="MissingRequestHeaderError",this.message=e||"The request is missing a required header.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="MissingRequestParameterError",this.message=e||"A required parameter is missing from the request.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="MobileIdentityConnectError",this.message=e||"An error has occurred with Mobile Identity Connect.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="NetworkConnectionError",this.message=e||"There was an error connecting to the network.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="NoActiveUserError",this.message=e||"There is not an active user.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="NoResponseError",this.message=e||"No response was provided.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="NotFoundError",this.message=e||"The entity was not found.",this.debug=t||void 0,this.code=r||404,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="ParameterValueOutOfRangeError",this.message=e||"The value specified for one of the request parameters is out of range.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="PopupError",this.message=e||"Unable to open a popup on this platform.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="QueryError",this.message=e||"An error occurred with the query.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="ServerError",this.message=e||"An error occurred on the server.",this.debug=t||void 0,this.code=r||500,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="StaleRequestError",this.message=e||"The time window for this request has expired.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="SyncError",this.message=e||"An error occurred during sync.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="TimeoutError",this.message=e||"The request timed out.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="UserAlreadyExistsError",this.message=e||"This username is already taken. Please retry your request with a different username.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t,r,n){this.name="WritesToCollectionDisallowedError",this.message=e||"This collection is configured to disallow any modifications to an existing entity or creation of new entities.",this.debug=t||void 0,this.code=r||void 0,this.kinveyRequestId=n||void 0,this.stack=(new Error).stack}const i=r(0);(n.prototype=Object.create(i.prototype)).constructor=n,e.exports=n},function(e,t,r){function n(e,t){const r=e?parseInt(e.split("-")[1],10)+1:0;return r>=t?t-1:r}const i=r(4),o=r(77),s=r(13),a=r(19),u=r(74),c=r(7),{NetworkRequest:h,KinveyRequest:l,AuthType:p,RequestMethod:f,Headers:d}=r(5),{KinveyError:y}=r(1),{KinveyObservable:v}=r(30),{Log:m}=r(16),{isDefined:g}=r(2),{Query:b}=r(10),{NetworkStore:_}=r(34);class w extends _{get pathname(){return`/blob/${this.client.appKey}`}find(e,t={}){const r={tls:!0===(t=s({tls:!0},t)).tls};u(t.ttl)&&(r.ttl_in_seconds=parseInt(t.ttl,10));return v.create(n=>{if(g(e)&&!(e instanceof b))return n.error(new y("Invalid query. It must be an instance of the Query class."));return new l({method:f.GET,authType:p.Default,url:c.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname,query:r}),properties:t.properties,query:e,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))}).toPromise().then(e=>!0===t.download?i.all(o(e,e=>this.downloadByUrl(e._downloadURL,t))):e)}findById(e,t){return this.download(e,t)}download(e,t={}){const r={tls:!0===(t=s({tls:!0},t)).tls};u(t.ttl)&&(r.ttl_in_seconds=parseInt(t.ttl,10));return v.create(n=>{if(!1===g(e))return n.next(void 0),n.complete();return new l({method:f.GET,authType:p.Default,url:c.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`,query:r}),properties:t.properties,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>n.next(e)).then(()=>n.complete()).catch(e=>n.error(e))}).toPromise().then(e=>!0===t.stream?e:(t.mimeType=e.mimeType,this.downloadByUrl(e._downloadURL,t)))}downloadByUrl(e,t={}){return new h({method:f.GET,url:e,timeout:t.timeout}).execute().then(e=>e.data)}stream(e,t={}){return t.stream=!0,this.download(e,t)}upload(e,t={},r={}){t=this.transformMetadata(e,t);let o=null;return this.saveFileMetadata(r,t).then(e=>(o=e.data,this.makeStatusCheckRequest(e.data._uploadURL,e.data._requiredHeaders,t,r.timeout))).then(s=>{if(m.debug("File upload status check response",s),!s.isSuccess())return i.reject(s.error);if(200===s.statusCode||201===s.statusCode)return s;if(308!==s.statusCode){const e=new y("Unexpected response for upload file status check request.",!1,s.statusCode,s.headers.get("X-Kinvey-Request-ID"));return i.reject(e)}const a={start:n(s.headers.get("range"),t.size),timeout:r.timeout,maxBackoff:r.maxBackoff,headers:o._requiredHeaders};return this.retriableUpload(o._uploadURL,e,t,a)}).then(()=>(delete o._expiresAt,delete o._requiredHeaders,delete o._uploadURL,o._data=e,o))}transformMetadata(e,t){const r=s({filename:e._filename||e.name,public:!1,size:e.size||e.length,mimeType:e.mimeType||e.type||"application/octet-stream"},t);return r._filename=t.filename,delete r.filename,r._public=t.public,delete r.public,r}saveFileMetadata(e,t){const r=g(t._id);return new l({method:r?f.PUT:f.POST,authType:p.Default,headers:{"X-Kinvey-Content-Type":t.mimeType},url:c.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:r?`${this.pathname}/${t._id}`:this.pathname}),properties:e.properties,timeout:e.timeout,body:t,client:this.client}).execute()}makeStatusCheckRequest(e,t,r,n){const i=new d(t);i.set("content-type",r.mimeType),i.set("content-range",`bytes */${r.size}`);return new h({method:f.PUT,url:e,timeout:n,headers:i}).execute()}retriableUpload(e,t,r,o){return o=s({count:0,start:0,maxBackoff:32e3},o),m.debug("Start file upload"),m.debug("File upload headers",o.headers),m.debug("File upload upload url",c),m.debug("File upload file",t),m.debug("File upload metadata",r),m.debug("File upload options",o),this.makeUploadRequest(e,t,r,o).then(e=>{if(m.debug("File upload response",e),e.isClientError())return i.reject(e.error);if(!e.isSuccess()&&!e.isServerError()&&308!==e.statusCode){const t=new y("Unexpected response for upload file request.",!1,e.statusCode,e.headers.get("X-Kinvey-Request-ID"));return i.reject(t)}return e}).then(e=>{let t=0;return e.isServerError()?(m.debug("File upload server error. Probably network congestion.",e.statusCode,e.data),(t=2**o.count+function(e,t){return Math.floor(Math.random()*(t-e))+e}(1,1001))>=o.maxBackoff?i.reject(e.error):(m.debug(`File upload will try again in ${t} seconds.`),new i(e=>{setTimeout(()=>{o.count+=1,e(!0)},t)}))):308===e.statusCode?(m.debug("File upload was incomplete (statusCode 308). Trying to upload the remainder of file."),o.start=n(e.headers.get("range"),r.size),new i(e=>{setTimeout(()=>{o.count=0,e(!0)},t)})):new i(e=>{setTimeout(()=>{e(!1)},t)})}).then(n=>n?this.retriableUpload(e,t,r,o):null)}makeUploadRequest(e,t,r,n){const i=new d(n.headers);i.set("content-type",r.mimeType),i.set("content-range",`bytes ${n.start}-${r.size-1}/${r.size}`);return new h({method:f.PUT,url:e,headers:i,body:a(t.slice)?t.slice(n.start):t,timeout:n.timeout}).execute()}create(e,t,r){return this.upload(e,t,r)}update(e,t,r){return this.upload(e,t,r)}remove(){throw new y("Please use removeById() to remove files one by one.")}}t.Files=new w},function(e,t,r){const{CacheMiddleware:n}=r(5),{Storage:i}=r(349);t.CacheMiddleware=class extends n{loadStorage(e){return new i(e)}}},function(e,t,r){const{Storage:n}=r(5),{IndexedDBAdapter:i}=r(350),{WebSQLAdapter:o}=r(351),{LocalStorageAdapter:s,SessionStorageAdapter:a}=r(352);t.Storage=class extends n{loadAdapter(){return o.load(this.name).then(e=>e||i.load(this.name)).then(e=>e||s.load(this.name)).then(e=>e||a.load(this.name)).then(e=>e||super.loadAdapter())}}},function(e,t,r){(function(e){const n=r(4),{KinveyError:i,NotFoundError:o}=r(1),{isDefined:s}=r(2);let a,u={};const c={ReadWrite:"readwrite",ReadOnly:"readonly"};Object.freeze(c);class h{constructor(e){if(!1===s(e))throw new Error("A name is required to use the IndexedDB adapter.",e);if("string"!=typeof e)throw new Error("The name must be a string to use the IndexedDB adapter",e);this.name=e,this.inTransaction=!1,this.queue=[]}openTransaction(t,r=!1,n,a,h=!1){const l=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB;let p=u[this.name];if(s(p)){if("function"==typeof p.objectStoreNames.contains?p.objectStoreNames.contains(t):-1!==p.objectStoreNames.indexOf(t))try{const e=r?c.ReadWrite:c.ReadOnly,o=p.transaction(t,e);if(s(o))return n(o);throw new i(`Unable to open a transaction for ${t}`+` collection on the ${this.name} IndexedDB database.`)}catch(e){return a(e)}else if(!1===r)return a(new o(`The ${t} collection was not found on`+` the ${this.name} IndexedDB database.`))}if(!1===h&&this.inTransaction)return this.queue.push(()=>{this.openTransaction(t,r,n,a)});this.inTransaction=!0;let f;try{if(s(p)){const e=p.version+1;p.close(),f=l.open(this.name,e)}else f=l.open(this.name)}catch(e){a(e)}return f.onupgradeneeded=(e=>{p=e.target.result,u[this.name]=p,!0===r&&p.createObjectStore(t,{keyPath:"_id"})}),f.onsuccess=(e=>{p=e.target.result,u[this.name]=p,p.onversionchange=(()=>{s(p)&&(p.close(),p=null,u[this.name]=null)});const i=e=>{return t=>{if(e(t),this.inTransaction=!1,this.queue.length>0){const e=this.queue;this.queue=[],e.forEach(e=>{e.call(this)})}}};return this.openTransaction(t,r,i(n),i(a),!0)}),f.onblocked=(()=>{}),f.onerror=(e=>{a(new Error(`Unable to open the ${this.name} IndexedDB database.`+` ${e.target.error.message}.`))}),f}close(){const e=u[this.name];s(e)&&e.close()}find(e){return new n((t,r)=>{this.openTransaction(e,!1,n=>{const i=n.objectStore(e).openCursor(),o=[];i.onsuccess=(e=>{const r=e.target.result;return s(r)?(o.push(r.value),r.continue()):t(o)}),i.onerror=(e=>{r(e)})},e=>{e instanceof o&&t([]),r(e)})})}findById(e,t){return new n((r,n)=>{this.openTransaction(e,!1,i=>{const a=i.objectStore(e).get(t);a.onsuccess=(e=>{const t=e.target.result;r(s(t)?t:void 0)}),a.onerror=(()=>{n(new o(`An entity with _id = ${t} was not found in the ${e}`+` collection on the ${this.name} IndexedDB database.`))})},n)})}save(e,t){let r=!1;return Array.isArray(t)||(r=!0,t=[t]),0===t.length?n.resolve(null):new n((n,o)=>{this.openTransaction(e,!0,s=>{const a=s.objectStore(e);t.forEach(e=>{a.put(e)}),s.oncomplete=(()=>{n(r?t[0]:t)}),s.onerror=(t=>{o(new i(`An error occurred while saving the entities to the ${e}`+` collection on the ${this.name} IndexedDB database. ${t.target.error.message}.`))})},o)})}removeById(e,t){return new n((r,n)=>{this.openTransaction(e,!0,i=>{const a=i.objectStore(e),u=a.get(t);a.delete(t),i.oncomplete=(()=>{const e=u.result;r(s(e)?{count:1}:{count:0})}),i.onerror=(()=>{n(new o(`An entity with id = ${t} was not found in the ${e}`+` collection on the ${this.name} IndexedDB database.`))})},n)})}clear(){return this.close(),new n((t,r)=>{const n=(e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB).deleteDatabase(this.name);n.onsuccess=(()=>{u={},t(null)}),n.onerror=(e=>{r(new i(`An error occurred while clearing the ${this.name} IndexedDB database.`+` ${e.target.error.message}.`))}),n.onblocked=(()=>{r(new i(`The ${this.name} IndexedDB database could not be cleared`+" due to the operation being blocked."))})})}}t.IndexedDBAdapter={load(t){const r=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,i=new h(t);return!1===s(r)?n.resolve(void 0):s(a)?a?n.resolve(i):n.resolve(void 0):i.save("__testSupport__",{_id:"1"}).then(()=>(a=!0,i)).catch(()=>{a=!1})}}}).call(t,r(8))},function(e,t,r){(function(e){const n=r(4),{KinveyError:i}=r(1),{isDefined:o}=r(2);let s;class a{constructor(e="kinvey"){if(!1===o(e))throw new i("A name is required to use the WebSQL adapter.",e);if("string"!=typeof e)throw new i("The name must be a string to use the WebSQL adapter",e);this.name=e}openTransaction(t,r,o,s=!1){const a=`"${t}"`,u="sqlite_master"===t,c=Array.isArray(r);return r=c?r:[[r,o]],new n((n,o)=>{try{const h=e.openDatabase(this.name,1,"Kinvey Cache",2097152);h[s||"function"!=typeof h.readTransaction?"transaction":"readTransaction"](e=>{s&&!u&&e.executeSql(`CREATE TABLE IF NOT EXISTS ${a} `+"(key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");let t=r.length;const i=[];0===t?n(c?i:i.shift()):r.forEach(r=>{const o=r[0].replace("#{collection}",a);e.executeSql(o,r[1],(e,r)=>{const o={rowCount:r.rowsAffected,result:[]};if(r.rows.length>0)for(let e=0,t=r.rows.length;e<t;e+=1)try{const t=r.rows.item(e).value,n=u?t:JSON.parse(t);o.result.push(n)}catch(e){}i.push(o),0===(t-=1)&&n(c?i:i.shift())})})},e=>{if((e="string"==typeof e?e:e.message)&&-1===e.indexOf("no such table"))return n({result:[]});const r=["table",t];return this.openTransaction("sqlite_master","SELECT name AS value from #{collection} WHERE type = ? AND name = ?",r).then(e=>0===e.result.length?n({result:[]}):o(new i(`Unable to open a transaction for the ${t}`+` collection on the ${this.name} WebSQL database.`))).catch(o)})}catch(e){o(e)}})}find(e){return this.openTransaction(e,"SELECT value FROM #{collection}",[]).then(e=>e.result)}findById(e,t){return this.openTransaction(e,"SELECT value FROM #{collection} WHERE key = ?",[t]).then(e=>e.result).then(e=>e[0])}save(e,t){const r=[];let i=!1;return Array.isArray(t)||(i=!0,t=[t]),0===t.length?n.resolve(null):(t=t.map(e=>(r.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[e._id,JSON.stringify(e)]]),e)),this.openTransaction(e,r,null,!0).then(()=>i?t[0]:t))}removeById(e,t){return this.openTransaction(e,"DELETE FROM #{collection} WHERE key = ?",[t],!0).then(e=>({count:e.rowCount}))}clear(){return this.openTransaction("sqlite_master","SELECT name AS value FROM #{collection} WHERE type = ?",["table"],!1).then(e=>e.result).then(e=>{if(0===e.length)return null;const t=e.filter(e=>/^[a-zA-Z0-9-]{1,128}/.test(e)).map(e=>[`DROP TABLE IF EXISTS '${e}'`]);return this.openTransaction("sqlite_master",t,null,!0)}).then(()=>null)}}t.WebSQLAdapter={load(t){const r=new a(t);return!1===o(e.openDatabase)?n.resolve(void 0):o(s)?!0===s?n.resolve(r):n.resolve(void 0):r.save("__testSupport__",{_id:"1"}).then(()=>(s=!0,r)).catch(()=>{s=!1})}}}).call(t,r(8))},function(e,t,r){const{LocalStorageAdapter:n}=r(353),{SessionStorageAdapter:i}=r(354);e.exports={LocalStorageAdapter:n,SessionStorageAdapter:i}},function(e,t,r){(function(e){const n=r(4),{WebStorage:i}=r(125);class o extends i{find(t){try{const r=JSON.parse(e.localStorage.getItem(`${this.name}.${t}`));return n.resolve(r||[])}catch(e){return n.reject(e)}}findById(e,t){return this.find(e).then(e=>e.find(e=>e._id===t))}save(t,r=[]){let n=!1;return Array.isArray(r)||(r=[r],n=!0),this.find("__master__").then(r=>(-1===r.indexOf(t)&&(r.push(t),e.localStorage.setItem(`${this.name}.__master__`,JSON.stringify(r))),this.find(t))).then(i=>(r.forEach(e=>{const t=i.findIndex(t=>t._id===e._id);-1===t?i.push(e):i[t]=e}),e.localStorage.setItem(`${this.name}.${t}`,JSON.stringify(i)),n?r[0]:r))}removeById(t,r){return this.find(t).then(n=>{const i=n.findIndex(e=>e._id===r);return-1===i?{count:0}:(n.splice(i,1),e.localStorage.setItem(`${this.name}.${t}`,JSON.stringify(n)),{count:1})})}clear(){return this.find("__master__").then(t=>(t.forEach(t=>{e.localStorage.removeItem(`${this.name}.${t}`)}),e.localStorage.removeItem(`${this.name}.__master__`),null))}}t.LocalStorageAdapter={load(t){if(e.localStorage){const r="__testSupport__";try{return e.localStorage.setItem(r,r),e.localStorage.getItem(r),e.localStorage.removeItem(r),n.resolve(new o(t))}catch(e){return n.resolve(void 0)}}return n.resolve(void 0)}}}).call(t,r(8))},function(e,t,r){(function(e){const n=r(4),{WebStorage:i}=r(125);class o extends i{find(t){try{const r=JSON.parse(e.sessionStorage.getItem(`${this.name}.${t}`));return n.resolve(r||[])}catch(e){return n.reject(e)}}findById(e,t){return this.find(e).then(e=>e.find(e=>e._id===t))}save(t,r=[]){let n=!1;return Array.isArray(r)||(r=[r],n=!0),this.find("__master__").then(r=>(-1===r.indexOf(t)&&(r.push(t),e.sessionStorage.setItem(`${this.name}.__master__`,JSON.stringify(r))),this.find(t))).then(i=>(r.forEach(e=>{const t=i.findIndex(t=>t._id===e._id);-1===t?i.push(e):i[t]=e}),e.sessionStorage.setItem(`${this.name}.${t}`,JSON.stringify(i)),n?r[0]:r))}removeById(t,r){return this.find(t).then(n=>{const i=n.findIndex(e=>e._id===r);return-1===i?{count:0}:(n.splice(i,1),e.sessionStorage.setItem(`${this.name}.${t}`,JSON.stringify(n)),{count:1})})}clear(){return this.find("__master__").then(t=>(t.forEach(t=>{e.sessionStorage.removeItem(`${this.name}.${t}`)}),e.sessionStorage.removeItem(`${this.name}.__master__`),null))}}t.SessionStorageAdapter={load(t){if(e.sessionStorage){const r="__testSupport__";try{return e.sessionStorage.setItem(r,r),e.sessionStorage.getItem(r),e.sessionStorage.removeItem(r),n.resolve(new o(t))}catch(e){return n.resolve(void 0)}}return n.resolve(void 0)}}}).call(t,r(8))},function(e,t,r){(function(e){const n=r(304),i=r(4),{Middleware:o}=r(5),{NetworkConnectionError:s,TimeoutError:a}=r(1),{isDefined:u}=r(2);t.HttpMiddleware=class extends o{constructor(e){super(),this.pkg=e}get deviceInformation(){return function(t){const r=[];let n,i,o,s;null!==i&&void 0!==i||!e.navigator||(i=(n=function(e){return e=e.toLowerCase(),/(chrome)\/([\w]+)/.exec(e)||/(firefox)\/([\w.]+)/.exec(e)||/(msie) ([\w.]+)/i.exec(e)||/(opera)(?:.*version)?[ /]([\w.]+)/.exec(e)||/(safari)\/([\w.]+)/.exec(e)||[]}(e.navigator.userAgent))[1],o=n[2],s=e.navigator.platform),void 0!==e.angular&&r.push(`angularjs/${e.angular.version.full}`),void 0!==e.Backbone&&r.push(`backbonejs/${e.Backbone.VERSION}`),void 0!==e.Ember&&r.push(`emberjs/${e.Ember.VERSION}`),void 0!==e.jQuery&&r.push(`jquery/${e.jQuery.fn.jquery}`),void 0!==e.ko&&r.push(`knockout/${e.ko.version}`),void 0!==e.Zepto&&r.push("zeptojs");const a=[`js-kinvey-html5-sdk/${t.version}`];return 0!==r.length&&a.push(`(${r.sort().join(", ")})`),a.concat([i,o,s]).map(e=>e?e.toString().replace(/\s/g,"_").toLowerCase():"unknown").join(" ")}(this.pkg)}handle(e){return new i((t,r)=>{const{url:i,method:o,headers:c,body:h,timeout:l,followRedirect:p}=e;this.xhrRequest=n({method:o,url:i,headers:c,body:h,followRedirect:p,timeout:l},(e,n,i)=>u(e)?r("ESOCKETTIMEDOUT"===e.code||"ETIMEDOUT"===e.code?new a("The network request timed out."):new s("There was an error connecting to the network.",e)):t({response:{statusCode:n.statusCode,headers:n.headers,data:i}}))})}cancel(){return u(this.xhrRequest)&&"function"==typeof this.xhrRequest.abort&&this.xhrRequest.abort(),i.resolve()}}}).call(t,r(8))},function(e,t,r){(function(e){const{EventEmitter:n}=r(57);t.Popup=class t extends n{open(t="/"){const r=this,n=e.open(t,"_blank","toolbar=no,location=no");if(!n)throw new Error("The popup was blocked.");{const t=e.setInterval(()=>{if(n.closed)e.clearInterval(t),this.emit("exit");else try{const e={url:n.location.href};this.emit("loadstart",e),this.emit("load",e)}catch(e){this.emit("error",e)}},100)}return{on:(...e)=>r.on(...e),close(){return n&&!n.closed&&n.close(),this}}}static open(e){return(new t).open(e)}}}).call(t,r(8))},function(e,t,r){const{client:n,getAppVersion:i,setAppVersion:o,init:s,initialize:a,ping:u}=r(141),{Acl:c}=r(86),{Aggregation:h}=r(23),{AuthorizationGrant:l}=r(35),{CustomEndpoint:p}=r(136),{DataStore:f,DataStoreType:d,SyncOperation:y}=r(34),v=r(54),{Files:m}=r(137),{Log:g}=r(16),{Metadata:b}=r(55),{Query:_}=r(10),{User:w}=r(56),{ActiveUserError:x,APIVersionNotAvailableError:S,APIVersionNotImplementedError:E,AppProblemError:k,BadRequestError:O,BLError:P,CORSDisabledError:A,DuplicateEndUsersError:T,FeatureUnavailableError:C,IncompleteRequestBodyError:j,IndirectCollectionAccessDisallowedError:I,InsufficientCredentialsError:R,InvalidCredentialsError:M,InvalidIdentifierError:q,InvalidQuerySyntaxError:U,JSONParseError:N,KinveyError:D,KinveyInternalErrorRetry:L,KinveyInternalErrorStop:$,MissingQueryError:K,MissingRequestHeaderError:B,MissingRequestParameterError:F,MobileIdentityConnectError:H,NoActiveUserError:G,NetworkConnectionError:z,NoResponseError:V,NotFoundError:Q,ParameterValueOutOfRangeError:W,PopupError:Y,QueryError:X,ServerError:J,StaleRequestError:Z,SyncError:ee,TimeoutError:te,UserAlreadyExistsError:re,WritesToCollectionDisallowedError:ne}=r(1),{CacheRack:ie,NetworkRack:oe}=r(5),{MobileIdentityConnect:se}=r(35),{CacheMiddleware:ae}=r(138),{HttpMiddleware:ue}=r(139),{Popup:ce}=r(140),he=r(135);ie.useCacheMiddleware(new ae),oe.useHttpMiddleware(new ue(he)),se.usePopupClass(ce),e.exports={client:n,getAppVersion:i,setAppVersion:o,init:s,initialize:a,ping:u,Acl:c,Aggregation:h,AuthorizationGrant:l,CustomEndpoint:p,DataStore:f,DataStoreType:d,SyncOperation:y,LiveService:v,Files:m,Log:g,Metadata:b,Query:_,User:w,ActiveUserError:x,APIVersionNotAvailableError:S,APIVersionNotImplementedError:E,AppProblemError:k,BadRequestError:O,BLError:P,CORSDisabledError:A,DuplicateEndUsersError:T,FeatureUnavailableError:C,IncompleteRequestBodyError:j,IndirectCollectionAccessDisallowedError:I,InsufficientCredentialsError:R,InvalidCredentialsError:M,InvalidIdentifierError:q,InvalidQuerySyntaxError:U,JSONParseError:N,KinveyError:D,KinveyInternalErrorRetry:L,KinveyInternalErrorStop:$,MissingQueryError:K,MissingRequestHeaderError:B,MissingRequestParameterError:F,MobileIdentityConnectError:H,NoActiveUserError:G,NetworkConnectionError:z,NoResponseError:V,NotFoundError:Q,ParameterValueOutOfRangeError:W,PopupError:Y,QueryError:X,ServerError:J,StaleRequestError:Z,SyncError:ee,TimeoutError:te,UserAlreadyExistsError:re,WritesToCollectionDisallowedError:ne}},function(e,t,r){const{storage:n}=r(150),{Client:i}=r(9),{KinveyError:o}=r(1),{Log:s}=r(16),{isDefined:a}=r(2);class u{get(e){if("string"!=typeof e)throw new o("ActiveUserStorage key must be a string.");try{return JSON.parse(n.getItem(e))}catch(e){return s.debug("Unable to parse stored active user.",e),null}}set(e,t){if("string"!=typeof e)throw new o("ActiveUserStorage key must be a string.");return a(t)?n.setItem(e,JSON.stringify(t)):n.removeItem(e),t}}class c extends i{static init(e){const t=i.init(e);return t.activeUserStorage=new u,t}}t.Client=c},function(e,t,r){function n(e){if(!h(e.appKey))throw new l("No App Key was provided. Unable to create a new Client without an App Key.");if(!h(e.appSecret)&&!h(e.masterSecret))throw new l("No App Secret or Master Secret was provided. Unable to create a new Client without an App Secret.");return y.init(e)}const i=r(7),o=r(4),{client:s,getAppVersion:a,setAppVersion:u,ping:c}=r(382),{isDefined:h}=r(2),{KinveyError:l}=r(1),{CacheRequest:p,RequestMethod:f}=r(5),{User:d}=r(56),{Client:y}=r(358),v="user",m="kinvey_active_user";t.client=s,t.getAppVersion=a,t.setAppVersion=u,t.ping=c,t.init=n,t.initialize=function(e){try{const t=n(e),r=d.getActiveUser(t);return h(r)?o.resolve(r):new p({method:f.GET,url:i.format({protocol:t.apiProtocol,host:t.apiHost,pathname:`/${v}/${t.appKey}/${m}`})}).execute().then(e=>e.data).then(e=>e.length>0?e[0]:null).then(e=>h(e)?h(e.data)?t.setActiveUser(e.data):t.setActiveUser(e):e).then(()=>d.getActiveUser(t))}catch(e){return o.reject(e)}}},function(e,t,r){const{Client:n}=r(9),{KinveyError:i}=r(1);t.Identity=class{constructor(e={}){this.client=e.client||n.sharedInstance()}get identity(){throw new i("A subclass must override this property.")}static get identity(){throw new i("A subclass must override this property.")}static isSupported(){return!1}isSupported(){return!1}isOnline(e){const t=(new Date).getTime()/1e3;return e&&e.access_token&&e.expires>t}}},function(e,t,r){const n=r(4),i=r(6),o=r(7),s=r(302),{AuthType:a,RequestMethod:u,KinveyRequest:c}=r(5),{KinveyError:h,MobileIdentityConnectError:l}=r(1),{isDefined:p}=r(2),{CorePopup:f}=r(362),{Identity:d}=r(360),{SocialIdentity:y}=r(126);let v=f;const m={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};Object.freeze(m),t.AuthorizationGrant=m,t.MobileIdentityConnect=class e extends d{get identity(){return y.MobileIdentityConnect}static get identity(){return y.MobileIdentityConnect}static isSupported(){return!0}isSupported(){return!0}login(t,r=m.AuthorizationCodeLoginPage,o={}){let s=this.client.appKey;i(o.micId)&&(s=`${s}.${o.micId}`);return n.resolve().then(()=>{if(r===m.AuthorizationCodeLoginPage)return this.requestCodeWithPopup(s,t,o);if(r===m.AuthorizationCodeAPI)return this.requestTempLoginUrl(s,t,o).then(e=>this.requestCodeWithUrl(e,s,t,o));throw new h(`The authorization grant ${r} is unsupported. `+"Please use a supported authorization grant.")}).then(e=>this.requestToken(e,s,t,o)).then(r=>(r.identity=e.identity,r.client_id=s,r.redirect_uri=t,r.protocol=this.client.micProtocol,r.host=this.client.micHost,r))}refresh(t,r,i,o={}){return n.resolve().then(()=>this.refreshToken(t,r,i,o)).then(t=>(t.identity=e.identity,t.client_id=r,t.redirect_uri=i,t.protocol=this.client.micProtocol,t.host=this.client.micHost,t))}requestTempLoginUrl(e,t,r={}){let n="/oauth/auth";if(r.version){let e=r.version;!1===i(e)&&(e=String(e)),n=s(0===e.indexOf("v")?e:`v${e}`,n)}return new c({method:u.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:o.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:n}),properties:r.properties,body:{client_id:e,redirect_uri:t,response_type:"code"}}).execute().then(e=>e.data.temp_login_uri)}requestCodeWithPopup(e,t,r={}){return n.resolve().then(()=>{let n="/oauth/auth";const a=new v;if(r.version){let e=r.version;i(e)||(e=String(e)),n=s(0===e.indexOf("v")?e:`v${e}`,n)}return a.open(o.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:n,query:{client_id:e,redirect_uri:t,response_type:"code"}}))}).then(e=>{return new n((r,n)=>{function i(n){try{n.url&&0===n.url.indexOf(t)&&!1===s&&(s=!0,e.removeAllListeners(),e.close(),r(o.parse(n.url,!0).query.code))}catch(e){}}let s=!1;e.on("loadstart",i),e.on("loadstop",i),e.on("error",function(i){try{i.url&&0===i.url.indexOf(t)&&!1===s?(s=!0,e.removeAllListeners(),e.close(),r(o.parse(i.url,!0).query.code)):!1===s&&(e.removeAllListeners(),e.close(),n(new h(i.message,"",i.code)))}catch(e){}}),e.on("exit",function(){!1===s&&(e.removeAllListeners(),n(new h("Login has been cancelled.")))})})})}requestCodeWithUrl(e,t,r,i={}){return n.resolve().then(()=>{return new c({method:u.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:e,properties:i.properties,body:{client_id:t,redirect_uri:r,response_type:"code",username:i.username,password:i.password},followRedirect:!1}).execute()}).then(e=>{const t=e.headers.get("location");if(t)return o.parse(t,!0).query.code;throw new l(`Unable to authorize user with username ${i.username}.`,"A location header was not provided with a code to exchange for an auth token.")})}requestToken(e,t,r,n={}){return new c({method:u.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:a.App,url:o.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/token"}),properties:n.properties,body:{grant_type:"authorization_code",client_id:t,redirect_uri:r,code:e}}).execute().then(e=>e.data)}refreshToken(e,t,r,n={}){return new c({method:u.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:a.App,url:o.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/token"}),body:{grant_type:"refresh_token",client_id:t,redirect_uri:r,refresh_token:e},properties:n.properties,timeout:n.timeout}).execute().then(e=>e.data)}logout(e,t={}){return new c({method:u.GET,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:a.App,url:o.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:"/oauth/invalidate",query:{user:e._id}}),properties:t.properties}).execute().then(e=>e.data)}static usePopupClass(e){p(e)&&(v=e)}}},function(e,t,r){const{EventEmitter:n}=r(57),{PopupError:i}=r(1);t.Popup=class extends n{open(){throw new i("Unable to open a popup on this platform.")}close(){return this}static isSupported(){return!1}}},function(e,t,r){e.exports=r(364)},function(e,t,r){const{Client:n}=r(9),{KinveyError:i}=r(1),{KinveyRequest:o,RequestMethod:s}=r(5),{getLiveService:a,isValidReceiver:u,isValidChannelName:c}=r(51);class h{constructor(e){this._client=e||n.sharedInstance()}subscribeCollection(e,t){return c(e)?u(t)?this._makeSubscriptionRequest(e,"_subscribe").then(()=>{const r=this._buildChannelName(e);a().subscribeToChannel(r,t)}):Promise.reject(new i("Invalid or missing receiver")):Promise.reject(new i("Invalid or missing collection name"))}unsubscribeCollection(e){return c(e)?this._makeSubscriptionRequest(e,"_unsubscribe").then(()=>{const t=this._buildChannelName(e);a().unsubscribeFromChannel(t)}):Promise.reject(new i("Invalid or missing collection name"))}_buildChannelName(e){return`${this._client.appKey}.c-${e}`}_makeSubscriptionRequest(e,t){return o.executeShort({method:s.POST,pathname:`/appdata/${this._client.appKey}/${e}/${t}`,body:{deviceId:this._client.deviceId}})}}t.LiveCollectionManager=h;let l;t.getLiveCollectionManager=function(e){return l||(l=new h(e)),l}},function(e,t,r){function n(){const e=i.sharedInstance();return s(e)}const{Client:i}=r(9),{Stream:o}=r(128),{getLiveService:s}=r(51);t.onConnectionStatusUpdates=function(e){n().onConnectionStatusUpdates(e)},t.offConnectionStatusUpdates=function(e){n().offConnectionStatusUpdates(e)},t.isInitialized=function(){return n().isInitialized()},t.Stream=o},function(e,t,r){const{KinveyError:n}=r(1),{Client:i}=r(9),{isNonemptyString:o}=r(33),{getLiveService:s}=r(51),{KinveyRequest:a,RequestMethod:u,StatusCode:c}=r(5),{StreamACL:h}=r(129);class l{constructor(e){this.name=e,this._client=i.sharedInstance(),this._liveService=s(this._client),this._subscribeChannels={},this._publishChannels={}}static get StreamACL(){return h}getSubstreams(){return this._makeStreamRequest("_substreams",u.GET)}getACL(e){return o(e)?this._makeStreamRequest(e,u.GET):Promise.reject(new n("Invalid or missing id"))}setACL(e,t){return o(e)?h.isValidACLObject(t)?(t instanceof h||(t=new h(t)),this._makeStreamRequest(e,u.PUT,t.toPlainObject())):Promise.reject(new n("Invalid or missing ACL object")):Promise.reject(new n("Invalid or missing id"))}follow(e,t){return this._subscribe(e,t)}unfollow(e){return this._unsubscribe(e)}post(e){const t=this._client.getActiveUser()._id;return this._publish(t,e)}listen(e){const t=this._client.getActiveUser()._id;return this._subscribe(t,e)}stopListening(){const e=this._client.getActiveUser()._id;return this._unsubscribe(e)}send(e,t){return this._publish(e,t)}_unsubscribeFromSubstream(e){const t=`${e}/unsubscribe`;return this._makeStreamRequest(t,u.POST,{deviceId:this._client.deviceId})}_subscribe(e,t){return this._requestSubscribeAccess(e).then(()=>{const r=this._subscribeChannels[e];this._liveService.subscribeToChannel(r,t)})}_unsubscribe(e){return this._unsubscribeFromSubstream(e).then(()=>{const t=this._subscribeChannels[e];this._liveService.unsubscribeFromChannel(t),delete this._subscribeChannels[e]})}_publish(e,t){return this._publishChannels[e]?this._retriablePublish(e,t):this._publishWithAccessRequest(e,t)}_publishWithAccessRequest(e,t){return this._requestPublishAccess(e).then(()=>{const r=this._publishChannels[e];return this._liveService.publishToChannel(r,t)})}_retriablePublish(e,t){const r=this._publishChannels[e];return this._liveService.publishToChannel(r,t).catch(r=>{let n=Promise.reject(r);return r.statusCode===c.Forbidden&&(n=this._publishWithAccessRequest(e,t)),n})}_requestPublishAccess(e){return this._makeStreamRequest(`${e}/publish`,u.POST).then(t=>(t.substreamChannelName&&(this._publishChannels[e]=t.substreamChannelName),t))}_requestSubscribeAccess(e){const t={deviceId:this._client.deviceId};return this._makeStreamRequest(`${e}/subscribe`,u.POST,t).then(t=>(this._subscribeChannels[e]=t.substreamChannelName,t))}_makeStreamRequest(e,t,r){return a.executeShort({method:t,pathname:`/stream/${this._client.appKey}/${this.name}/${e}`,body:r},this._client)}}t.Stream=l},function(e,t,r){const n=r(282);n.setDefaultLevel(n.levels.SILENT);const i=n.methodFactory;n.methodFactory=function(e,t,r){const n=i(e,t,r);return function(e,...t){e=`Kinvey: ${e}`,t.length>0?n(e,t):n(e)}},t.Log=n},function(e,t,r){const n=r(29),{KinveyError:i}=r(1),{isDefined:o}=r(2);t.Metadata=class{constructor(e){if(!1===n(e))throw new i("entity argument must be an object");e._kmd=e._kmd||{},this.entity=e}get createdAt(){if(o(this.entity._kmd.ect))return new Date(this.entity._kmd.ect)}get ect(){return this.createdAt}get emailVerification(){if(o(this.entity._kmd.emailVerification))return this.entity._kmd.emailVerification.status}get lastModified(){if(o(this.entity._kmd.lmt))return new Date(this.entity._kmd.lmt)}get lmt(){return this.lastModified}get authtoken(){return this.entity._kmd.authtoken}isLocal(){return!0===this.entity._kmd.local}toPlainObject(){return this.entity._kmd}}},function(e,t,r){const n=r(4),{Observable:i}=r(292),{Subscriber:o}=r(120),{rxSubscriber:s}=r(81),a=r(19),{isDefined:u}=r(2),c={closed:!0,next(){},error(e){throw e},complete(){},status(){},presence(){}};class h extends o{constructor(e,t,r,n,i,o){super();let s,u=this;this._parentSubscriber=e,a(t)?s=t:t&&(s=t.next,r=t.error,n=t.complete,t!==c&&(u=Object.create(t),a(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=n,this._status=i,this._presence=o}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}status(e){if(!this.isStopped&&this._status){const{_parentSubscriber:t}=this;t.syncErrorThrowable?this.__tryOrSetError(t,this._status,e)&&this.unsubscribe():this.__tryOrUnsub(this._status,e)}}presence(e){if(!this.isStopped&&this._presence){const{_parentSubscriber:t}=this;t.syncErrorThrowable?this.__tryOrSetError(t,this._presence,e)&&this.unsubscribe():this.__tryOrUnsub(this._presence,e)}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}}__tryOrSetError(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}class l extends o{constructor(e,t,r,n,i){switch(super(e,t,r),arguments.length){case 0:this.destination=c;break;case 1:if(!1===u(e)){this.destination=c;break}if("object"==typeof e){e instanceof o?(this.destination=e,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new h(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new h(this,e,t,r,n,i)}}status(e){this.isStopped||this._status(e)}presence(e){this.isStopped||this._presence(e)}_status(e){this.destination.status(e)}_presence(e){this.destination.presence(e)}}t.KinveyObservable=class e extends i{subscribe(e,t,r,n,i){const{operator:o}=this,a=function(e,t,r,n,i){if(e){if(e instanceof l)return e;if(e[s])return e[s]()}return e||t||r||n||i?new l(e,t,r,n,i):new l(c)}(e,t,r,n,i);if(o?o.call(a,this.source):a.add(this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}toPromise(){return new n((e,t)=>{let r;this.subscribe(e=>{r=e},t,()=>{e(r)})})}static create(t){return new e(t)}}},function(e,t,r){e.exports=r(371)},function(e,t,r){const n=r(4);t.Queue=class{constructor(e,t){this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}add(e){return new n((t,r,n)=>{this.queue.length>=this.maxQueuedPromises?r(new Error("Queue limit reached")):(this.queue.push({promiseGenerator:e,resolve:t,reject:r,notify:n||function(){}}),this._dequeue())})}getPendingLength(){return this.pendingPromises}getQueueLength(){return this.queue.length}_dequeue(){if(this.pendingPromises>=this.maxPendingPromises)return!1;const e=this.queue.shift();if(!e)return!1;try{this.pendingPromises+=1,function(e){return e&&"function"==typeof e.then?e:n.resolve(e)}(e.promiseGenerator()).then(t=>{this.pendingPromises-=1,e.resolve(t),this._dequeue()},t=>{this.pendingPromises-=1,e.reject(t),this._dequeue()},t=>{e.notify(t)})}catch(t){this.pendingPromises-=1,e.reject(t),this._dequeue()}return!0}}},function(e,t,r){const n=r(300),i=r(29),{QueryError:o}=r(1),{nested:s,isDefined:a,isNumber:u}=r(2),{Log:c}=r(16),h=["$nearSphere"];t.Query=class e{constructor(e){e=Object.assign({fields:[],filter:{},sort:null,limit:null,skip:0},e),this.fields=e.fields,this.filter=e.filter,this.sort=e.sort,this.limit=e.limit,this.skip=e.skip,this._parent=null}get fields(){return this._fields}set fields(e){if(e=e||[],!Array.isArray(e))throw new o("fields must be an Array");a(this._parent)?this._parent.fields=e:this._fields=e}get filter(){return this._filter}set filter(e){this._filter=e}get sort(){return this._sort}set sort(e){if(e&&!i(e))throw new o("sort must an Object");a(this._parent)?this._parent.sort=e:this._sort=e||{}}get limit(){return this._limit}set limit(e){if("string"==typeof e&&(e=parseFloat(e)),a(e)&&!1===u(e))throw new o("limit must be a number");this._parent?this._parent.limit=e:this._limit=e}get skip(){return this._skip}set skip(e){if("string"==typeof e&&(e=parseFloat(e)),!1===u(e))throw new o("skip must be a number");a(this._parent)?this._parent.skip=e:this._skip=e}isSupportedOffline(){return Object.keys(this.filter).reduce((e,t)=>{if(e){const e=this.filter[t];return h.some(t=>!e||!Object.keys(e).some(e=>e===t))}return e},!0)}equalTo(e,t){return this.addFilter(e,t)}contains(e,t){if(!1===a(t))throw new o("You must supply a value.");return!1===Array.isArray(t)&&(t=[t]),this.addFilter(e,"$in",t)}containsAll(e,t){if(!1===a(t))throw new o("You must supply a value.");return!1===Array.isArray(t)&&(t=[t]),this.addFilter(e,"$all",t)}greaterThan(e,t){if(!1===u(t)&&"string"!=typeof t)throw new o("You must supply a number or string.");return this.addFilter(e,"$gt",t)}greaterThanOrEqualTo(e,t){if(!1===u(t)&&"string"!=typeof t)throw new o("You must supply a number or string.");return this.addFilter(e,"$gte",t)}lessThan(e,t){if(!1===u(t)&&"string"!=typeof t)throw new o("You must supply a number or string.");return this.addFilter(e,"$lt",t)}lessThanOrEqualTo(e,t){if(!1===u(t)&&"string"!=typeof t)throw new o("You must supply a number or string.");return this.addFilter(e,"$lte",t)}notEqualTo(e,t){return this.addFilter(e,"$ne",t)}notContainedIn(e,t){return!1===Array.isArray(t)&&(t=[t]),this.addFilter(e,"$nin",t)}and(...e){return this.join("$and",e)}nor(...e){return a(this._parent)&&Object.hasOwnProperty.call(this._parent.filter,"$and")?this._parent.nor(...e):this.join("$nor",e)}or(...e){return a(this._parent)?this._parent.or(...e):this.join("$or",e)}exists(e,t){return t=void 0===t||(t||!1),this.addFilter(e,"$exists",t)}mod(e,t,r=0){if("string"==typeof t&&(t=parseFloat(t)),"string"==typeof r&&(r=parseFloat(r)),!u(t))throw new o("divisor must be a number");if(!u(r))throw new o("remainder must be a number");return this.addFilter(e,"$mod",[t,r])}matches(e,t,r={}){const n=[];if(t instanceof RegExp||(t=new RegExp(t)),0!==t.source.indexOf("^"))throw new o("regExp must have '^' at the beginning of the expression to make it an anchored expression.");if((t.ignoreCase||r.ignoreCase)&&!1!==r.ignoreCase)throw new o("ignoreCase flag is not supported");return(t.multiline||r.multiline)&&!1!==r.multiline&&n.push("m"),!0===r.extended&&n.push("x"),!0===r.dotMatchesAll&&n.push("s"),n.length>0&&this.addFilter(e,"$options",n.join("")),this.addFilter(e,"$regex",t.source)}near(e,t,r){if(!Array.isArray(t)||!u(t[0])||!u(t[1]))throw new o("coord must be a [number, number]");const n=this.addFilter(e,"$nearSphere",[t[0],t[1]]);return u(r)&&this.addFilter(e,"$maxDistance",r),n}withinBox(e,t,r){if(!Array.isArray(t)||!u(t[0])||!u(t[1]))throw new o("bottomLeftCoord must be a [number, number]");if(!Array.isArray(r)||!u(r[0])||!u(r[1]))throw new o("upperRightCoord must be a [number, number]");t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),r[0]=parseFloat(r[0]),r[1]=parseFloat(r[1]);const n=[[t[0],t[1]],[r[0],r[1]]];return this.addFilter(e,"$within",{$box:n})}withinPolygon(e,t){if(!1===Array.isArray(t)||0===t.length||t.length>3)throw new o("coords must be a [[number, number]]");return t=t.map(e=>{if(!1===u(e[0])||!1===u(e[1]))throw new o("coords argument must be a [number, number]");return[parseFloat(e[0]),parseFloat(e[1])]}),this.addFilter(e,"$within",{$polygon:t})}size(e,t){if("string"==typeof t&&(t=parseFloat(t)),!u(t))throw new o("size must be a number");return this.addFilter(e,"$size",t)}ascending(e){return a(this._parent)?this._parent.ascending(e):this.sort[e]=1,this}descending(e){return a(this._parent)?this._parent.descending(e):this.sort[e]=-1,this}addFilter(e,t,r){return a(t)&&a(r)?(i(this.filter[e])||(this.filter[e]={}),this.filter[e][t]=r):this.filter[e]=t,this}join(t,r){let n=this;const s={};0===(r=r.map(t=>{if(!(t instanceof e)){if(!i(t))throw new o("query argument must be of type: Kinvey.Query[] or Object[].");t=new e(t)}return t.toPlainObject().filter})).length&&(r=[(n=new e).toPlainObject().filter],n._parent=this);return Object.keys(this.filter).forEach(e=>{s[e]=this.filter[e],delete this.filter[e]}),this.filter[t]=[s].concat(r),n}process(e){if(!this.isSupportedOffline()){let e="This query is not able to run locally. The following filters are not supported locally:";throw h.forEach(t=>{e=`${e} ${t}`}),c.error(e),new o(e)}if(!Array.isArray(e))throw new o("data argument must be of type: Array.");c.debug("Data length before processiong query",e.length);const t=this.toPlainObject();return e=n(t.filter,e),c.debug("Data length after applying query filter",t.filter,e.length),Array.isArray(t.fields)&&t.fields.length>0&&(c.debug("Removing fields from data",t.fields),e=e.map(e=>{return Object.keys(e).forEach(r=>{-1===t.fields.indexOf(r)&&delete e[r]}),e})),a(t.sort)&&(c.debug("Sorting data",t.sort),e.sort((e,r)=>{for(const n in t.sort)if(t.sort.hasOwnProperty(n)){const i=s(e,n),o=s(r,n);if(a(i)&&!1===a(o))return-1;if(a(o)&&!1===a(i))return 1;if(i!==o){const e=t.sort[n];return(i<o?-1:1)*e}}return 0})),u(t.skip)?u(t.limit)&&t.limit>0?(c.debug("Skipping and limiting data",t.skip,t.limit),e.slice(t.skip,t.skip+t.limit)):(c.debug("Skipping data",t.skip),e.slice(t.skip)):e}toPlainObject(){if(a(this._parent))return this._parent.toPlainObject();return{fields:this.fields,filter:this.filter,sort:this.sort,skip:this.skip,limit:this.limit}}toQueryString(){const e={};Object.keys(this.filter).length>0&&(e.query=this.filter),this.fields.length>0&&(e.fields=this.fields.join(",")),u(this.limit)&&(e.limit=this.limit),u(this.skip)&&this.skip>0&&(e.skip=this.skip),Object.keys(this.sort).length>0&&(e.sort=this.sort);return Object.keys(e).forEach(t=>{e[t]="string"==typeof e[t]?e[t]:JSON.stringify(e[t])}),e}toString(){return JSON.stringify(this.toQueryString())}}},function(e,t,r){const n=r(4),i=r(76),o=r(78),s=r(115),a=r(79),u=r(43),c=r(3),h=r(6),{KinveyError:l,NotFoundError:p}=r(1),{isDefined:f}=r(2),{Query:d}=r(10),{RequestMethod:y}=r(53),{KinveyRequest:v}=r(133),{CacheRequest:m}=r(130),{Response:g,StatusCode:b}=r(32);t.DeltaFetchRequest=class extends v{get method(){return super.method}set method(e){switch(h(e)||(e=String(e)),e=e.toUpperCase()){case y.GET:super.method=e;break;case y.POST:case y.PATCH:case y.PUT:case y.DELETE:default:throw new l("Invalid request Method. Only RequestMethod.GET is allowed.")}}execute(){return new m({method:y.GET,url:this.url,headers:this.headers,query:this.query,timeout:this.timeout,client:this.client}).execute().then(e=>e.data).catch(e=>{if(!(e instanceof p))throw e;return[]}).then(e=>{if(c(e)&&e.length>0){const t=i(e,"_id"),r=new d(s(this.query,"toJSON",this.query));r.fields=["_id","_kmd.lmt"];return new v({method:y.GET,url:this.url,headers:this.headers,authType:this.authType,query:r,timeout:this.timeout,client:this.client,properties:this.properties,skipBL:this.skipBL,trace:this.trace,followRedirect:this.followRedirect,cache:this.cache}).execute().then(e=>e.data).then(e=>{const r=i(e,"_id"),o=r,a=Object.keys(t);u(a,e=>{const n=t[e],i=r[e];i&&f(i._kmd)&&f(n._kmd)&&i._kmd.lmt===n._kmd.lmt?delete o[e]:delete t[e]});const c=Object.keys(o),h=[];let l=0;for(;l<c.length;){const e=new d(s(this.query,"toJSON",this.query)),t=c.slice(l,c.length>200+l?200:c.length);e.contains("_id",t);const r=new v({method:y.GET,url:this.url,headers:this.headers,authType:this.authType,query:e,timeout:this.timeout,client:this.client,properties:this.properties,skipBL:this.skipBL,trace:this.trace,followRedirect:this.followRedirect,cache:this.cache}).execute();h.push(r),l+=200}return n.all(h)}).then(e=>{const r=o(e,(e,t)=>{if(t.isSuccess()){const r=e.headers;r.addAll(t.headers),e.headers=r,e.data=e.data.concat(t.data)}return e},new g({statusCode:b.Ok,data:[]}));if(r.data=r.data.concat(a(t)),this.query){const e=new d(s(this.query,"toJSON",this.query));e.skip=0,e.limit=0,r.data=e.process(r.data)}return r})}return new v({method:y.GET,url:this.url,headers:this.headers,authType:this.authType,query:this.query,timeout:this.timeout,client:this.client,properties:this.properties,skipBL:this.skipBL,trace:this.trace,followRedirect:this.followRedirect,cache:this.cache}).execute()})}}},function(e,t){const r=[],n=String.fromCharCode(9500),i=String.fromCharCode(9472),o=String.fromCharCode(9492),s=String.fromCharCode(9474);t.AsciiTree=class{static generate(e={},t){let a=function(e,t){if(0===e.level)return e.value;let a="\r\n";const u=t?o:n;for(let t=1;t<e.level;t+=1)a=`${a=`${a}${r[t]?" ":s}`}  `;return`${a}${u}${i} ${e.value}`}(e,t);if(e.nodes.length>0){const t=e.nodes.length-1;e.nodes.forEach((e,n)=>{r[e.level]=n===t,a+=this.generate(e,n===t)})}return a}}},function(e,t,r){const n=r(47),{isDefined:i}=r(2),{Middleware:o}=r(31),{Storage:s}=r(132);t.CacheMiddleware=class extends o{constructor(e="Cache Middleware"){super(e)}loadStorage(e){return new s(e)}handle(e){const{method:t,body:r,appKey:o,collection:s,entityId:a,encryptionKey:u}=e,c=this.loadStorage(o,u);let h;return"GET"===t?h=i(a)?c.findById(s,a):c.find(s):"POST"===t||"PUT"===t?h="_group"===a?c.find(s):c.save(s,r):"DELETE"===t&&(h=!1===i(s)?c.clear():c.removeById(s,a)),h.then(e=>{const r={statusCode:"POST"===t?201:200,data:e};return"POST"===t&&"_group"===a&&(r.statusCode=200),(!1===i(e)||n(e))&&(r.statusCode=204),r}).catch(e=>({statusCode:e.code})).then(e=>({response:e}))}}},function(e,t,r){const n=r(4),{KinveyError:i}=r(1),{Middleware:o}=r(31);t.HttpMiddleware=class extends o{constructor(e="Http Middleware"){super(e)}handle(){return n.reject(new i("Unable to send network request.","Please override the core HttpMiddleware."))}cancel(){return n.resolve()}}},function(e,t,r){const n=r(4),{isDefined:i}=r(2),{Middleware:o}=r(31);t.ParseMiddleware=class extends o{constructor(e="Parse Middleware"){super(e)}handle(e,t){if(i(t)&&i(t.data)){const e=t.headers["content-type"]||t.headers["Content-Type"];if(e&&0===e.indexOf("application/json"))try{t.data=JSON.parse(t.data)}catch(e){}}return n.resolve({response:t})}}},function(e,t,r){(function(e){const n=r(4),{isDefined:i}=r(2),{Middleware:o}=r(31);t.SerializeMiddleware=class extends o{constructor(e="Serialize Middleware"){super(e)}handle(t){if(i(t)&&i(t.body)){const r=t.headers["content-type"]||t.headers["Content-Type"];if(i(r))if(0===r.indexOf("application/json"))t.body=JSON.stringify(t.body);else if(0===r.indexOf("application/x-www-form-urlencoded")){const r=t.body,n=[];Object.keys(r).forEach(t=>{n.push(`${e.encodeURIComponent(t)}=${e.encodeURIComponent(r[t])}`)}),t.body=n.join("&")}}return n.resolve({request:t})}}}).call(t,r(8))},function(e,t,r){const n=r(4),i=r(87),o=r(76),s=r(43),a=r(79),u=r(267),c=r(6),h=r(3),{isDefined:l}=r(2),{NotFoundError:p}=r(1),f={};class d{constructor(e){if(!l(e))throw new Error("A name for the collection is required to use the memory persistence adapter.",e);if(!c(e))throw new Error("The name of the collection must be a string to use the memory persistence adapter",e);this.name=e,this.cache=f[e],l(this.cache)||(this.cache=new i,f[e]=this.cache)}find(e){try{const t=this.cache.get(e);return t?n.resolve(JSON.parse(t)):n.resolve([])}catch(e){return n.reject(e)}}findById(e,t){return this.find(e).then(r=>{const i=u(r,e=>e._id===t);return i||n.reject(new p(`An entity with _id = ${t} was not found in the ${e}`+` collection on the ${this.name} memory database.`))})}save(e,t){let r=!1;return h(t)||(t=[t],r=!0),0===t.length?n.resolve(t):this.find(e).then(n=>{n=o(n,"_id"),t=o(t,"_id");const i=Object.keys(t);return s(i,e=>{n[e]=t[e]}),this.cache.set(e,JSON.stringify(a(n))),t=a(t),r?t[0]:t})}removeById(e,t){return this.find(e).then(r=>{const i=(r=o(r,"_id"))[t];return l(i)?(delete r[t],this.cache.set(e,JSON.stringify(a(r))),{count:1}):n.reject(new p(`An entity with _id = ${t} was not found in the ${e}`+` collection on the ${this.name} memory database.`))})}clear(){return this.cache.clear(),n.resolve(null)}}t.MemoryAdapter={load:e=>new d(e)}},function(e,t,r){const n=r(4),i=r(13),o=r(6),s=r(12),a=r(47),u=r(7),{Client:c}=r(9),{AuthType:h,RequestMethod:l,KinveyRequest:p}=r(5),{KinveyError:f,NotFoundError:d,ActiveUserError:y}=r(1),{DataStore:v}=r(34),{MobileIdentityConnect:m}=r(35),{Log:g}=r(16),{isDefined:b}=r(2),{Acl:_}=r(86),{Metadata:w}=r(55),{getLiveService:x}=r(54),{UserStore:S}=r(381);t.User=class e{constructor(e={},t={}){this.data=e,this.client=t.client||c.sharedInstance()}get _id(){return this.data._id}get _acl(){return new _(this.data)}get metadata(){return new w(this.data)}get _kmd(){return this.metadata}get _socialIdentity(){return this.data._socialIdentity}get authtoken(){return this.metadata.authtoken}get username(){return this.data.username}get email(){return this.data.email}get pathname(){return`/user/${this.client.appKey}`}isActive(){const t=e.getActiveUser(this.client);return!(!b(t)||t._id!==this._id)}isEmailVerified(){return"confirmed"===this.metadata.emailVerification}login(t,r,o={}){let a=t;const c=this.isActive(),d=e.getActiveUser(this.client);if(!0===c)return n.reject(new y("This user is already the active user."));if(b(d))return n.reject(new y("An active user already exists. Please logout the active user before you login."));if(s(a)?o=r||{}:a={username:t,password:r},b(a.username)&&(a.username=String(a.username).trim()),b(a.password)&&(a.password=String(a.password).trim()),!(b(a.username)&&""!==a.username&&b(a.password)&&""!==a.password||b(a._socialIdentity)))return n.reject(new f("Username and/or password missing. Please provide both a username and password to login."));return new p({method:l.POST,authType:h.App,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/login`}),body:a,properties:o.properties,timeout:o.timeout,client:this.client}).execute().then(e=>e.data).then(e=>{if(b(a._socialIdentity)&&b(e._socialIdentity)){Object.keys(e._socialIdentity).forEach(t=>{e._socialIdentity[t]=i({},a._socialIdentity[t],e._socialIdentity[t])}),e._socialIdentity=i({},a._socialIdentity,e._socialIdentity)}return delete e.password,this.client.setActiveUser(e)}).then(e=>(this.data=e,this))}static login(e,t,r={}){return new this({},r).login(e,t,r)}loginWithMIC(t,r,i={}){const o=this.isActive(),s=e.getActiveUser(this.client);if(o)return n.reject(new y("This user is already the active user."));if(b(s))return n.reject(new y("An active user already exists. Please logout the active user before you login."));return new m({client:this.client}).login(t,r,i).then(e=>this.connectIdentity(m.identity,e,i))}static loginWithMIC(e,t,r={}){return new this({},r).loginWithMIC(e,t,r)}connectIdentity(e,t,r={}){const n=this.isActive(),i={},o=i._socialIdentity||{};return o[e]=t,i._socialIdentity=o,n?this.update(i,r):this.login(i,r).catch(n=>{if(n instanceof d)return this.signup(i,r).then(()=>this.connectIdentity(e,t,r));throw n})}static connectIdentity(e,t,r={}){return new this({},r).connectIdentity(e,t,r)}disconnectIdentity(e,t={}){let r=n.resolve();return e===m.identity&&(r=m.logout(this,t)),r.catch(e=>{g.error(e)}).then(()=>{const r=this.data,n=r._socialIdentity||{};return delete n[e],r._socialIdentity=n,this.data=r,this._id?this.update(r,t):this}).then(()=>this)}logout(e={}){const t=new p({method:l.POST,authType:h.Session,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_logout`}),properties:e.properties,timeout:e.timeout,client:this.client});return this.unregisterFromLiveService().then(()=>t.execute()).catch(e=>(g.error(e),null)).then(()=>this.client.setActiveUser(null)).catch(e=>(g.error(e),null)).then(()=>v.clearCache({client:this.client})).catch(e=>(g.error(e),null)).then(()=>this)}static logout(t={}){const r=e.getActiveUser(t.client);return b(r)?r.logout(t):n.resolve(null)}signup(t,r={}){const n=e.getActiveUser(this.client);if(!0===(r=i({state:!0},r)).state&&b(n))throw new y("An active user already exists. Please logout the active user before you login.");t instanceof e&&(t=t.data),t=i(this.data,t);return new p({method:l.POST,authType:h.App,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname}),body:a(t)?null:t,properties:r.properties,timeout:r.timeout,client:this.client}).execute().then(e=>e.data).then(e=>!0===r.state?this.client.setActiveUser(e):e).then(e=>(this.data=e,this))}static signup(e,t={}){return new this({},t).signup(e,t)}signupWithIdentity(e,t,r={}){const n={};return n._socialIdentity={},n._socialIdentity[e]=t,this.signup(n,r)}static signupWithIdentity(e,t,r={}){return new this({},r).signupWithIdentity(e,t,r)}update(e,t={}){e=i(this.data,e);return(new S).update(e,t).then(e=>this.isActive()?this.client.setActiveUser(e):e).then(e=>(this.data=e,this))}static update(t,r={}){const i=e.getActiveUser(r.client);return b(i)?i.update(t,r):n.resolve(null)}me(e={}){return new p({method:l.GET,authType:h.Session,url:u.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_me`}),properties:e.properties,timeout:e.timeout}).execute().then(e=>e.data).then(e=>(e=i(this.data,e),delete e.password,this.isActive()?this.client.setActiveUser(e):e)).then(e=>(this.data=e,this))}static registerForLiveService(){const t=e.getActiveUser();return t?t.registerForLiveService():n.reject(new y("There is no active user"))}static unregisterFromLiveService(){const t=e.getActiveUser();return t?t.unregisterFromLiveService():n.reject(new y("There is no active user"))}registerForLiveService(){const e=x(this.client);let t=n.resolve();return e.isInitialized()||(t=e.fullInitialization(this)),t}unregisterFromLiveService(){const e=x(this.client);let t=n.resolve();return e.isInitialized()&&(t=e.fullUninitialization()),t}static me(t={}){const r=e.getActiveUser(t.client);return r?r.me(t):n.resolve(null)}static getActiveUser(e=c.sharedInstance()){const t=e.getActiveUser();return b(t)?new this(t,{client:e}):null}static verifyEmail(e,t={}){if(!e)return n.reject(new f("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!o(e))return n.reject(new f("The provided username is not a string."));const r=t.client||c.sharedInstance();return new p({method:l.POST,authType:h.App,url:u.format({protocol:r.apiProtocol,host:r.apiHost,pathname:`/rpc/${r.appKey}/${e}/user-email-verification-initiate`}),properties:t.properties,timeout:t.timeout,client:r}).execute().then(e=>e.data)}static forgotUsername(e,t={}){if(!e)return n.reject(new f("An email was not provided.","Please provide an email for the user that you would like to retrieve their username."));if(!o(e))return n.reject(new f("The provided email is not a string."));const r=t.client||c.sharedInstance();return new p({method:l.POST,authType:h.App,url:u.format({protocol:r.apiProtocol,host:r.apiHost,pathname:`/rpc/${r.appKey}/user-forgot-username`}),properties:t.properties,data:{email:e},timeout:t.timeout,client:r}).execute().then(e=>e.data)}static resetPassword(e,t={}){if(!e)return n.reject(new f("A username was not provided.","Please provide a username for the user that you would like to verify their email."));if(!o(e))return n.reject(new f("The provided username is not a string."));const r=t.client||c.sharedInstance();return new p({method:l.POST,authType:h.App,url:u.format({protocol:r.apiProtocol,host:r.apiHost,pathname:`/rpc/${r.appKey}/${e}/user-password-reset-initiate`}),properties:t.properties,timeout:t.timeout,client:r}).execute().then(e=>e.data)}static lookup(e,t={}){return(new S).lookup(e,t)}static exists(e,t={}){return(new S).exists(e,t)}static remove(e,t={}){return(new S).removeById(e,t)}static restore(){return n.reject(new f("This function requires a master secret to be provided for your application. We strongly advise not to do this."))}}},function(e,t,r){const n=r(4),i=r(3),o=r(6),s=r(7),{AuthType:a,RequestMethod:u,KinveyRequest:c}=r(5),{KinveyError:h}=r(1),{KinveyObservable:l}=r(30),{isDefined:p}=r(2),{Query:f}=r(10),{NetworkStore:d}=r(34);t.UserStore=class extends d{constructor(e){super(null,e)}get pathname(){return`/user/${this.client.appKey}`}lookup(e,t={}){return l.create(r=>{if(p(e)&&!(e instanceof f))return r.error(new h("Invalid query. It must be an instance of the Query class."));return new c({method:u.POST,authType:a.Default,url:s.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/_lookup`}),properties:t.properties,body:p(e)?e.toPlainObject().filter:null,timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))})}create(){return n.reject(new h("Please use `User.signup()` to create a user."))}update(e,t={}){return e?i(e)?n.reject(new h("Only one user can be updated at one time.",e)):e._id?super.update(e,t):n.reject(new h("User must have an _id.")):n.reject(new h("No user was provided to be updated."))}exists(e,t={}){return new c({method:u.POST,authType:a.App,url:s.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`/rpc/${this.client.appKey}/check-username-exists`}),properties:t.properties,data:{username:e},timeout:t.timeout,client:this.client}).execute().then(e=>e.data).then((e={})=>!0===e.usernameExists)}removeById(e,t={}){return l.create(r=>{if(!1===p(e))return r.error(new h("An id was not provided.","Please provide a valid id for a user that you would like to remove."));if(!1===o(e))return r.error(new h("The id provided is not a string.","Please provide a valid id for a user that you would like to remove."));return new c({method:u.DELETE,authType:a.Default,url:s.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:`${this.pathname}/${e}`,query:!0===t.hard?{hard:!0}:void 0}),properties:t.properties,timeout:t.timeout}).execute().then(e=>e.data).then(e=>r.next(e)).then(()=>r.complete()).catch(e=>r.error(e))}).toPromise()}}},function(e,t,r){e.exports=r(383)},function(e,t,r){function n(){return u.sharedInstance()}function i(e={}){if(!1===a(e.appKey))throw new s("No App Key was provided. Unable to create a new Client without an App Key.");if(!1===a(e.appSecret)&&!1===a(e.masterSecret))throw new s("No App Secret or Master Secret was provided. Unable to create a new Client without an App Secret.");return u.init(e)}const{Promise:o}=r(4),{KinveyError:s}=r(1),{isDefined:a}=r(2),{Client:u}=r(9),{User:c}=r(56),{AuthType:h,RequestMethod:l,KinveyRequest:p}=r(5);t.client=n,t.getAppVersion=function(){const e=n();if(e)return e.appVersion},t.setAppVersion=function(e){const t=n();t&&(t.appVersion=e)},t.init=i,t.initialize=function(e){try{const t=i(e);return o.resolve(c.getActiveUser(t))}catch(e){return o.reject(e)}},t.ping=function(){const e=n();return new p({method:l.GET,authType:h.All,url:`${e.apiHostname}/appdata/${e.appKey}`}).execute().then(e=>e.data)}},function(e,t){}])});
//# sourceMappingURL=kinvey-html5-sdk.min.js.map